"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1578],{98536:function(e,t,r){function n(e,t){var r="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"===typeof e)return o(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return o(e,t)}(e))||t&&e&&"number"===typeof e.length){r&&(e=r);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var l,c=!0,a=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return c=e.done,e},e:function(e){a=!0,l=e},f:function(){try{c||null==r.return||r.return()}finally{if(a)throw l}}}}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function i(e,t){var r,o=t.existing,i=t.getKey,l=new Map,c=n(e);try{for(c.s();!(r=c.n()).done;){var a=r.value;l.set(i(a),a)}}catch(b){c.e(b)}finally{c.f()}var u,s=new Set,d=[],p=n(o);try{for(p.s();!(u=p.n()).done;){var f=i(u.value),h=l.get(f);h&&(d.push(h),s.add(f))}}catch(b){p.e(b)}finally{p.f()}var g,m=n(e);try{for(m.s();!(g=m.n()).done;){var v=g.value;s.has(i(v))||d.push(v)}}catch(b){m.e(b)}finally{m.f()}return d}r.d(t,{Z:function(){return i}})},34152:function(e,t,r){r.d(t,{Z:function(){return Qe}});var n=r(70917),o=r(97131),i=r(92809),l=r(67294),c=r(49512),a=r(82457),u=r(30281),s=r(223),d=r(14900),p=r(45187),f=r(95203),h=r(32046),g=r(91761),m=r(98536),v=r(10921),b=r(11069),Z=r(10277),y=r(53753),O=r(85984),w=r(58548),x=r(35944);function P(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function j(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?P(Object(r),!0).forEach((function(t){(0,i.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):P(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var I=(0,c.K)("div"),S=(0,c.K)("li"),C={searchValue:"",loading:!1,repls:[]};function B(e,t){switch(t.type){case"data":var r,n=(null===(r=t.data.currentUser)||void 0===r?void 0:r.publishableReplSearch)||[];return j(j({},e),{},{loading:!1,repls:(0,m.Z)(n,{existing:e.repls,getKey:function(e){return e.id}})});case"loading":return j(j({},e),{},{loading:!0});case"searchValue":return j(j({},e),{},{searchValue:t.searchValue})}}function k(e){var t;return e?"".concat(null===(t=e.owner)||void 0===t?void 0:t.username,"/").concat(e.title):""}var D={name:"bjn8wh",styles:"position:relative"},V={name:"bjn8wh",styles:"position:relative"},X={name:"bjn8wh",styles:"position:relative"};function R(e){var t,r=l.useRef(null);(0,w.rf)((function(){var t;e.selectedRepl&&(null===(t=r.current)||void 0===t||t.blur())}),[e.selectedRepl]);var n=null!==(t=e.selectedRepl)&&void 0!==t&&t.iconUrl&&e.inputValue&&k(e.selectedRepl)===e.inputValue?(0,x.tZ)(c.Z,{css:[a.l0.px(8),a.l0.center,"position:absolute;top:0;left:0;height:100%;",""],children:(0,x.tZ)(v.Z,{alt:e.selectedRepl.title,iconUrl:e.selectedRepl.iconUrl,size:16})}):null;return(0,x.BX)(c.Z,{css:D,children:[(0,x.BX)(I,j(j({},e.getComboboxProps()),{},{css:V,children:[n,(0,x.tZ)(f.ZP,j({css:[a.l0.pr(32),n&&a.l0.pl(32),"",""]},e.getInputProps({placeholder:"Search for a repl",onFocus:e.onFocus,ref:r}))),(0,x.tZ)(c.Z,{css:[a.l0.center,a.l0.px(8),"position:absolute;top:0;right:0;height:100%;",""],children:e.loading&&e.isOpen?(0,x.tZ)(b.Z,{}):(0,x.tZ)(Z.Z,{})})]})),(0,x.tZ)(I,j(j({},e.getMenuProps()),{},{css:X,children:e.isOpen?(0,x.BX)(y.Z,{children:[e.loading&&0===e.repls.length?(0,x.tZ)(S,{css:[a.l0.center,a.l0.py(32),"",""],children:(0,x.tZ)(b.Z,{})}):null,e.loading||0!==e.repls.length?null:(0,x.tZ)(S,{css:[a.l0.center,a.l0.py(32),"",""],children:(0,x.tZ)(s.x,{color:"dimmer",variant:"small",children:"No repls found"})}),e.repls.map((function(t,r){return(0,x.tZ)(S,j(j({},e.getItemProps({item:t,index:r})),{},{children:(0,x.tZ)(O.Z,{filter:"",title:k(t),subtitle:(0,g.F)(t.timeUpdated),selected:e.selectedRepl===t,highlighted:e.highlightedIndex===r,icon:t.iconUrl?(0,x.tZ)(v.Z,{iconUrl:t.iconUrl,alt:t.title,size:16}):void 0})}),t.id)}))]}):null}))]})}var E=r(17513),W=r(70565),G=r(55412);function T(){var e=(0,l.useState)(!1),t=e[0],r=e[1];return(0,x.BX)(d.Z,{background:t?"higher":"default",css:[a.l0.borderRadius(8),a.l0.colWithGap(16),a.l0.p(8),"",""],children:[(0,x.BX)(c.Z,{css:[a.l0.colWithGap(8),"",""],children:[(0,x.BX)(c.Z,{onClick:function(){return r(!t)},css:[a.l0.rowWithGap(8),"cursor:pointer;",""],children:[(0,x.tZ)(s.x,{children:"Style your post with Markdown"}),(0,x.tZ)(G.Z,{rotate:t?0:270})]}),t?(0,x.tZ)(s.x,{color:"dimmer",multiline:!0,children:"You can style your post with a limited set of Markdown. Here are some supported content types:"}):null]}),t?(0,x.BX)(x.HY,{children:[(0,x.BX)(c.Z,{css:[a.l0.colWithGap(8),"",""],children:[(0,x.tZ)(s.x,{children:"Bold Text"}),(0,x.tZ)(s.x,{color:"dimmer",children:"**bold**"})]}),(0,x.BX)(c.Z,{css:[a.l0.colWithGap(8),"",""],children:[(0,x.tZ)(s.x,{children:"Italic Text"}),(0,x.tZ)(s.x,{color:"dimmer",children:"__italic__"})]}),(0,x.BX)(c.Z,{css:[a.l0.colWithGap(8),"",""],children:[(0,x.tZ)(s.x,{children:"Links"}),(0,x.tZ)(s.x,{color:"dimmer",children:"[Link Name](https://yourlink.com)"})]}),(0,x.BX)(c.Z,{css:[a.l0.colWithGap(8),"",""],children:[(0,x.tZ)(s.x,{children:"Images"}),(0,x.tZ)(s.x,{color:"dimmer",children:"![Image alt text](https://linktoyourimage.com)"})]}),(0,x.BX)(c.Z,{css:[a.l0.colWithGap(8),"",""],children:[(0,x.tZ)(s.x,{children:"Code Blocks"}),(0,x.BX)(s.x,{color:"dimmer",children:["```",(0,x.tZ)("br",{}),"this is for large, multiline code blocks",(0,x.tZ)("br",{}),"```"]})]}),(0,x.BX)(c.Z,{css:[a.l0.colWithGap(8),"",""],children:[(0,x.tZ)(s.x,{children:"Inline Code"}),(0,x.tZ)(s.x,{color:"dimmer",children:"`this is for code in the middle of sentences`"})]})]}):null]})}var A=r(67871),U=r(18618),F=r(79270),K=r(85231),M=r(80723),L=r(96887),z=r(61519);function _(e,t){var r="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"===typeof e)return N(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return N(e,t)}(e))||t&&e&&"number"===typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,l=!0,c=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return l=e.done,e},e:function(e){c=!0,i=e},f:function(){try{l||null==r.return||r.return()}finally{if(c)throw i}}}}function N(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var Y=/^[0-9a-zA-Z]+$/,q=function(e){return e.id};function H(e){var t=e.onSelect,r=e.filter,n=void 0===r?function(){return!0}:r,i=(0,l.useState)(""),c=i[0],a=i[1],u=(0,h.Z)(c,100),s=(0,L.Z)(t),d=function(e){var t=e.search,r=e.filter,n=(0,p.zdu)({variables:{limit:t?10:3,search:t}}).data,o=(0,l.useState)({official:[],community:[]}),i=o[0],c=o[1],a=(0,l.useMemo)((function(){if(n){var e,o=[],i=[],l=new Set,c=_(n.tagGroups.official);try{for(c.s();!(e=c.n()).done;){var a=e.value;l.add(a.id.toLowerCase()),r(a)&&o.push(a)}}catch(f){c.e(f)}finally{c.f()}var u,s=_(n.tagGroups.community);try{for(s.s();!(u=s.n()).done;){var d=u.value;l.add(d.id.toLowerCase()),r(d)&&i.push(d)}}catch(f){s.e(f)}finally{s.f()}var p=t&&0===i.length&&!l.has(t.toLowerCase())?{id:t,isOfficial:!1,replCount:0}:void 0;return{official:o,community:i,newTag:p&&r(p)?p:void 0}}}),[n,r,t]);return(0,l.useEffect)((function(){if(a){var e=a.official,t=a.community,r=a.newTag;c((function(n){return{official:(0,m.Z)(e,{existing:n.official,getKey:q}),community:(0,m.Z)(t,{existing:n.community,getKey:q}),newTag:r}}))}}),[a]),{tagGroups:i,reset:function(){c({official:[],community:[]})}}}({search:u,filter:n}),f=d.tagGroups,g=d.reset,v=(0,M.Kb)({inputValue:c,items:f.newTag?[f.newTag]:[].concat((0,o.Z)(f.official),(0,o.Z)(f.community)),defaultHighlightedIndex:0,itemToString:function(e){return e?e.id:""},onSelectedItemChange:function(e){e.selectedItem&&(g(),a(""),v.reset(),v.openMenu())}});return(0,z.Z)((function(){v.selectedItem&&s.current(v.selectedItem)}),[v.selectedItem]),{tagGroups:f,combobox:v,onChange:function(e){var t=e.currentTarget.value;t&&!Y.test(t)||t.length>30||a(t)}}}var $=r(80718),J=r(65292);function Q(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ee(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Q(Object(r),!0).forEach((function(t){(0,i.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Q(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var te=(0,c.K)("ul"),re=(0,c.K)("li"),ne={name:"50zrmy",styles:"text-transform:uppercase"};function oe(e){var t=e.children;return(0,x.tZ)(c.Z,{css:[a.l0.px(8),a.l0.pt(8),"",""],children:(0,x.tZ)(s.x,{css:ne,variant:"small",color:"dimmer",children:t})})}function ie(e){var t=e.highlighted,r=e.tag;return(0,x.BX)(c.Z,{css:[a.l0.rowWithGap(8),a.l0.p(8),t&&{backgroundColor:u.gU.listItem[":not([disabled])"][":active"].backgroundColor},"cursor:pointer;",""],children:[(0,x.BX)(c.Z,{css:[a.l0.flex.growAndShrink(1),a.l0.rowWithGap(4),"",""],children:[(0,x.tZ)(s.x,{children:r.id}),r.isOfficial?(0,x.tZ)(J.Z,{}):null]}),r.replCount>0?(0,x.tZ)(s.x,{variant:"small",color:"dimmest",children:(0,$.d)(r.replCount)}):null]})}var le=l.memo((function(e){var t=e.getItemProps,r=e.highlightedIndex,n=e.data;return"newTag"===n.type?(0,x.tZ)(y.Z,{css:[a.l0.minWidth(200),"",""],children:(0,x.BX)(re,{children:[(0,x.tZ)(oe,{children:"Community Tags"}),(0,x.tZ)(s.x,{css:[a.l0.p(8),a.l0.pt(16),"",""],color:"dimmest",children:"No tags found"}),(0,x.tZ)(te,{children:(0,x.tZ)(re,ee(ee({},t({item:n.newTag,index:0})),{},{css:[a.l0.p(8),"",""],children:(0,x.BX)(d.Z,{elevated:!0,css:[a.l0.borderRadius(8),a.l0.p(8),"cursor:pointer;",""],children:['Create "',n.newTag.id,'" tag']})}))})]})}):(0,x.tZ)(y.Z,{css:[a.l0.minWidth(200),"",""],children:n.sections.reduce((function(e,n){return e.sections.push((0,x.BX)(re,{children:[(0,x.tZ)(oe,{children:n.title}),(0,x.tZ)(te,{css:[a.l0.pt(4),a.l0.pb(8),"",""],children:n.tags.map((function(n){var o=e.itemIndex++;return(0,x.tZ)(re,ee(ee({},t({item:n,index:o})),{},{children:(0,x.tZ)(ie,{tag:n,highlighted:r===o})}),n.id)}))})]},n.title)),e}),{sections:[],itemIndex:0}).sections})}));function ce(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ae(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ce(Object(r),!0).forEach((function(t){(0,i.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ce(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var ue=(0,c.K)("div"),se=(0,c.K)("input"),de=(0,n.iv)([a.l0.fontSize(12),a.l0.pl(24),a.l0.pr(8),a.l0.py(4)],"","");function pe(){return(0,x.tZ)(s.x,{css:[a.l0.px(4),a.l0.flex.row,a.l0.align.center,a.l0.position.absolute(),a.l0.height("100%"),a.l0.color.foregroundDefault,"top:0;left:4px;pointer-events:none;",""],children:(0,x.tZ)(K.Z,{size:12})})}function fe(e){var t=e.text,r=e.children;return(0,x.BX)(d.Z,{elevated:!0,css:[a.l0.position.relative(),a.l0.minWidth(30),a.l0.borderRadius(16),{border:"1px solid transparent","&:focus-within":{borderColor:a.TV.outlineDimmer,backgroundColor:"transparent"}},"",""],children:[(0,x.tZ)(pe,{}),(0,x.tZ)(s.x,{css:["visibility:hidden;",de,"",""],children:t}),r]})}function he(e){var t=e.onSelect,r=H({filter:e.filter,onSelect:t}),n=r.combobox,o=r.tagGroups,i=r.onChange,u=(0,l.useMemo)((function(){return function(e){if(e.newTag)return{type:"newTag",newTag:e.newTag};var t=[];return e.official.length&&t.push({title:"Official Tags",tags:e.official}),e.community.length&&t.push({title:"Community Tags",tags:e.community}),0===t.length?null:{type:"sections",sections:t}}(o)}),[o]),s="Add tag";return(0,x.BX)(c.Z,{children:[(0,x.tZ)(ue,ae(ae({},n.getComboboxProps()),{},{css:[a.l0.flex.row,"",""],children:(0,x.tZ)(fe,{text:n.inputValue||s,children:(0,x.tZ)(se,ae({css:[a.l0.coverContainer,de,a.l0.color.foregroundDefault,{backgroundColor:"transparent","&::placeholder":a.l0.color.foregroundDefault,"&:focus::placeholder":a.l0.color.foregroundDimmest},"",""]},n.getInputProps({placeholder:s,onChange:i,onFocus:function(){n.openMenu()}})))})})),(0,x.tZ)(ue,ae(ae({},n.getMenuProps()),{},{css:[a.l0.position.relative(),"",""],children:u&&n.isOpen?(0,x.tZ)(le,{getItemProps:n.getItemProps,highlightedIndex:n.highlightedIndex,data:u}):null}))]})}function ge(e){var t=e.tags,r=e.max,n=void 0===r?5:r,o=e.onAdd,i=e.onRemove,l=t.map((function(e){return e.id}));return(0,x.BX)(c.Z,{css:[a.l0.flex.row,a.l0.flex.wrap,{margin:"calc(-1 * ".concat(a.TV.space4)},"",""],children:[t.map((function(e,t){return(0,x.tZ)(c.Z,{css:[a.l0.m(4),""],children:(0,x.tZ)(F.g,{small:!0,tag:e,onClick:function(){return i(t)}})},e.id)})),t.length<n?(0,x.tZ)(c.Z,{css:[a.l0.m(4),"",""],children:(0,x.tZ)(he,{onSelect:o,filter:function(e){return!l.includes(e.id.toLowerCase())}})}):null]})}var me=r(82490),ve=r(5537),be=r(95211),Ze=r(50573),ye=r(32087),Oe=r(30266),we=r(809),xe=r.n(we),Pe=r(54298),je=r(60461),Ie=r(51218);function Se(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Ce(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Se(Object(r),!0).forEach((function(t){(0,i.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Se(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var Be=(0,c.K)("div"),ke=(0,c.K)("li");function De(e){return Ve.apply(this,arguments)}function Ve(){return(Ve=(0,Oe.Z)(xe().mark((function e(t){var r,n;return xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Ie.l){e.next=2;break}throw new Error("Expected apolloClient");case 2:return e.next=4,Ie.l.query({query:p.ofZ,variables:{query:t,limit:5}});case 4:return r=e.sent,n=r.data,e.abrupt("return",n.usernameSearch);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Xe={name:"bjn8wh",styles:"position:relative"},Re={name:"1mzyfz7",styles:"position:relative;max-width:180px"};function Ee(e){var t,r=e.onChange,n=e.initialValue,o=e.autoFocus,i=e.placeholder,u=e.onKeyDown,s=e.onBlur,d=e.onFocus,p=e.userSearch,h=(0,L.Z)(r),g=function(e){var t=e.initialValue,r=e.userSearch,n=void 0===r?De:r;return(0,Pe.Z)({initialValue:t,textTriggers:{"@":function(){var e=(0,Oe.Z)(xe().mark((function e(t){var r;return xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n(t);case 2:return r=e.sent,e.abrupt("return",r.map((function(e){return{icon:(0,x.tZ)(je.Z,{alt:e.username,src:e.image,size:16}),value:e.username}})));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}})}({initialValue:n,userSearch:p}),m=g.setSelectionRange;return(0,z.Z)((function(){h.current(g.value)}),[g.value]),(0,l.useEffect)((function(){if(o&&n){var e=n.length;m(e,e)}}),[n,o,m]),(0,x.BX)(Be,Ce(Ce({css:Xe},g.combobox.getComboboxProps()),{},{children:[(0,x.tZ)(f.B,Ce(Ce({},g.combobox.getInputProps({placeholder:i||"Write something about this post",ref:g.ref,onKeyDown:u,onBlur:s,onFocus:d,value:g.value,onChange:function(e){return g.setValue(e.currentTarget.value)},onPaste:g.handlePaste,autoFocus:o})),{},{css:[a.l0.width("100%"),"min-height:120px;resize:vertical;",""]})),(0,x.tZ)(Be,Ce(Ce({},g.combobox.getMenuProps()),{},{css:["position:absolute;",g.caretCoordinates&&{top:g.caretCoordinates.top+g.caretCoordinates.height,left:g.caretCoordinates.left-4},"",""],children:null!==(t=g.suggestions)&&void 0!==t&&t.length?(0,x.tZ)(y.Z,{css:Re,children:g.suggestions.map((function(e,t){return(0,x.tZ)(ke,Ce(Ce({},g.combobox.getItemProps({item:e,index:t})),{},{children:(0,x.tZ)(O.Z,{title:e.value,selected:g.combobox.selectedItem===e,highlighted:g.combobox.highlightedIndex===t,icon:e.icon?(0,x.tZ)(c.Z,{children:e.icon}):void 0})}),e.value)}))}):null}))]}))}var We=r(79056),Ge=r(11163),Te=r(38934),Ae=r(50133);function Ue(e){return e?e.length>100?{message:"Title should not be more than ".concat(100," characters")}:void 0:{message:"Give your post a title"}}function Fe(e){return e?e.length>5e3?{message:"Post should not be more than ".concat(5e3," characters")}:void 0:{message:"Write something about this post"}}function Ke(e){var t;if(null!==e&&void 0!==e&&e.error)return"Something went wrong";if(null===e||void 0===e||!e.data)return null;var r=null===(t=e.data)||void 0===t?void 0:t.createReplPost2;return"UserError"===r.__typename||"NotFoundError"===r.__typename?r.message:null}var Me=r(26341);function Le(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ze(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Le(Object(r),!0).forEach((function(t){(0,i.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Le(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var _e=(0,c.K)("form"),Ne=(0,c.K)("button");function Ye(){return(0,x.BX)(c.Z,{css:[a.l0.rowWithGap(4),a.l0.align.center,a.l0.py(12),"",""],children:[(0,x.tZ)(ve.Z,{}),(0,x.tZ)(s.x,{children:"Add a Post to your Repl"})]})}function qe(e){var t=e.onClick;return(0,x.BX)(Ne,{onClick:t,css:[a.l0.rowWithGap(8),a.l0.align.center,a.l0.justify.spaceBetween,a.l0.px(8),a.l0.color.foregroundDefault,u.gU.outlined,"",""],children:[(0,x.tZ)(Ye,{}),(0,x.tZ)(c.Z,{children:(0,x.tZ)(me.Z,{})})]})}function He(e){var t=e.onFile,r=e.text,n=(0,l.useRef)(null);return(0,x.BX)(c.Z,{css:[a.l0.position.relative(),"",""],children:[(0,x.tZ)("input",{css:[[a.l0.coverContainer,{opacity:0,zIndex:-1}],"",""],ref:n,accept:"image/png, image/jpeg",type:"file",onChange:function(e){var r=e.target,n=r.validity,o=r.files;if(n.valid){var i=o?o[0]:null;i&&t(i)}}}),(0,x.tZ)(E.zx,{outlined:!0,stretch:!0,text:r,iconLeft:(0,x.tZ)(ye.Z,{}),onClick:function(){var e;return null===(e=n.current)||void 0===e?void 0:e.click()},type:"button"})]})}function $e(e){var t=e.onClose;return(0,x.BX)(c.Z,{css:[a.l0.rowWithGap(8),a.l0.align.center,a.l0.justify.spaceBetween,"",""],children:[(0,x.tZ)(Ye,{}),(0,x.tZ)(c.Z,{children:(0,x.tZ)(W.Z,{alt:"Remove post",onClick:function(){return t()},children:(0,x.tZ)(be.Z,{})})})]})}function Je(e){if(0===e.length)return"Adding tags helps others find your repl.";var t="Your Repl will be shared to";if(1===e.length)return"".concat(t," #").concat(e[0].id,".");if(2===e.length)return"".concat(t," #").concat(e[0].id," and #").concat(e[1].id,".");var r=e[e.length-1];return"".concat(t," ").concat(e.slice(0,-1).map((function(e){return"#".concat(e.id)})).join(", "),", and #").concat(r.id,".")}function Qe(e){var t=e.replId,r=function(e){var t,r=(0,l.useState)(!1),n=r[0],o=r[1],i=(0,Ae.Y)(e.replId||null,(function(e){return e?null:{message:"Select a Repl to share"}})),c=(0,Ae.Y)("",Ue),a=(0,Ae.Y)("",Fe),u=(0,Ae.Y)(null,(function(){return null})),s=(0,Ae.Y)([],(function(){return null})),d=(0,p.Nfb)({variables:{id:i.value||""},skip:!i.value}),f="Repl"===(null===(t=d.data)||void 0===t?void 0:t.repl.__typename)?d.data.repl:null,h=(0,L.Z)(s.setValue),g=(0,L.Z)(u.setValue);(0,l.useEffect)((function(){f&&(h.current(f.tags),g.current(f.iconUrl.endsWith(".svg")?null:f.iconUrl))}),[f,h,g]);var m=(0,L.Z)([i.validate,c.validate,a.validate]);(0,l.useEffect)((function(){m.current.map((function(e){return e()}))}),[m]);var v=Boolean(n&&(c.value||a.value));function b(){if(!i.isValid)return null;if(v&&(!c.isValid||!a.isValid))return null;var e=i.value;if(null===e)throw new Error("Expected replId");var t=v?c.value:void 0,r=v?a.value:void 0;return{replId:e,iconUrl:u.value||void 0,title:t,body:r,tags:s.value.map((function(e){return e.id}))}}return{replIdField:i,titleField:c,bodyField:a,replIconUrlField:u,tagsField:s,addPostIsExpanded:n,setAddPostIsExpanded:o,getInput:b,input:b(),inputError:function(){var e,t;return i.error?i.error.message:v?(null===(e=c.error)||void 0===e?void 0:e.message)||(null===(t=a.error)||void 0===t?void 0:t.message):void 0}(),selectedRepl:f}}({replId:t}),i=r.replIdField,u=r.titleField,g=r.bodyField,m=r.replIconUrlField,b=r.tagsField,Z=r.addPostIsExpanded,y=r.setAddPostIsExpanded,O=r.input,w=r.inputError,P=r.selectedRepl,j=function(){var e=(0,l.useReducer)(B,C),t=e[0],r=e[1],n=(0,h.Z)(t.searchValue,200),o=(0,p.b1W)({variables:{search:n},notifyOnNetworkStatusChange:!0,onCompleted:function(e){r({type:"data",data:e})}}).loading;(0,l.useEffect)((function(){o&&r({type:"loading"})}),[o]);var i=(0,l.useCallback)((function(e){return r({type:"searchValue",searchValue:e})}),[]);return{repls:t.repls,loading:t.loading,searchValue:t.searchValue,setSearchValue:i}}(),I=(0,M.Kb)({items:j.repls,initialHighlightedIndex:-1,onInputValueChange:function(e){var t=e.inputValue;j.setSearchValue(t)},onSelectedItemChange:function(e){null!==e&&void 0!==e&&e.selectedItem&&(i.setValue(e.selectedItem.id),I.closeMenu())},itemToString:k}),S=function(){var e=(0,Ge.useRouter)(),t=(0,p.HKC)({onCompleted:function(t){var r,n,o,i="Post"===t.createReplPost2.__typename?t.createReplPost2:null;i&&((0,Te.track)(Te.events.POST_MADE,{source:"replTalk",isPublish:!1,title:i.title,description:null===(r=i.replComment)||void 0===r?void 0:r.body,isRemixed:Boolean(null===(n=i.repl)||void 0===n||null===(o=n.origin)||void 0===o?void 0:o.id),coverImage:!1}),e.push({pathname:"/postsFeed",query:{order:"new"}},{pathname:"/talk/all",query:{order:"new"}}))}}),r=(0,We.Z)(t,2),n=r[0],o=r[1];return{createReplPost:function(e){o.loading||n({variables:{input:e}})},error:Ke(o),loading:o.loading}}(),D=S.createReplPost,V=S.error,X=S.loading,W=Boolean(m.value&&!m.value.endsWith(".svg")),G=(0,Me.W)(m.setValue);return(0,x.BX)(d.Z,{elevated:!0,css:[a.l0.p(16),a.l0.colWithGap(16),a.l0.borderRadius(8),"",""],children:[(0,x.BX)(s.x,{variant:"subheadBig",children:["Publish ",t?"this":"a"," Repl"]}),(0,x.BX)(_e,{onSubmit:function(e){e.preventDefault(),null!==O&&D(O)},css:[a.l0.colWithGap(24),"",""],children:[(0,x.BX)(c.Z,{css:[a.l0.colWithGap(8),"",""],children:[(0,x.tZ)(s.x,{variant:"small",color:"dimmer",children:"REPL"}),t&&P?(0,x.BX)(c.Z,{css:[a.l0.rowWithGap(8),a.l0.align.center,"",""],children:[(0,x.tZ)(v.Z,{size:24,iconUrl:m.value||P.iconUrl,alt:P.title}),(0,x.tZ)(s.x,{variant:"subheadBig",children:P.title})]}):null,t?null:(0,x.tZ)(R,{getComboboxProps:I.getComboboxProps,getInputProps:I.getInputProps,getItemProps:I.getItemProps,getMenuProps:I.getMenuProps,isOpen:I.isOpen,highlightedIndex:I.highlightedIndex,inputValue:I.inputValue,selectedRepl:I.selectedItem?ze(ze({},I.selectedItem),{},{iconUrl:m.value||I.selectedItem.iconUrl}):void 0,repls:j.repls,loading:j.loading,onFocus:function(e){I.selectedItem&&(e.preventDefault(),e.currentTarget.select(),j.setSearchValue("")),I.openMenu()}})]}),(0,x.BX)(c.Z,{css:[a.l0.colWithGap(8),"",""],children:[(0,x.BX)(c.Z,{css:[a.l0.rowWithGap(4),"",""],children:[(0,x.tZ)(s.x,{variant:"small",color:"dimmer",children:"TAGS"})," ",(0,x.BX)(s.x,{variant:"small",color:"dimmest",children:[b.value.length,"/",5]})]}),(0,x.BX)(c.Z,{css:[a.l0.colWithGap(4),"",""],children:[(0,x.tZ)(ge,{max:5,tags:b.value,onAdd:function(e){return b.setValue([].concat((0,o.Z)(b.value),[e]))},onRemove:function(e){return b.setValue([].concat((0,o.Z)(b.value.slice(0,e)),(0,o.Z)(b.value.slice(e+1))))}}),(0,x.tZ)(s.x,{multiline:!0,color:"dimmest",variant:"small",children:Je(b.value)})]})]}),(0,x.BX)(c.Z,{css:[a.l0.colWithGap(8),"",""],children:[(0,x.tZ)(s.x,{variant:"small",color:"dimmer",children:"ICON"}),(0,x.BX)(c.Z,{css:[a.l0.rowWithGap(8),a.l0.align.start,"",""],children:[(0,x.tZ)(v.L,{alt:"icon",size:84,iconUrl:G.previewUrl||m.value||(null===P||void 0===P?void 0:P.templateInfo.iconUrl),isLoading:Boolean(G.previewUrl)}),(0,x.BX)(c.Z,{css:[a.l0.colWithGap(8),a.l0.flex.growAndShrink(1),"",""],children:[W?(0,x.BX)(c.Z,{css:[a.l0.rowWithGap(8),a.l0.flex.growAndShrink(1),"",""],children:[(0,x.tZ)(c.Z,{css:[a.l0.flex.growAndShrink(1),"",""],children:(0,x.tZ)(He,{text:"Change image",onFile:G.uploadImage})}),(0,x.tZ)(c.Z,{css:[a.l0.flex.growAndShrink(1),"",""],children:(0,x.tZ)(E.zx,{text:"Remove image",onClick:function(){return m.setValue(null)},outlined:!0,stretch:!0,iconLeft:(0,x.tZ)(be.Z,{}),type:"button"})})]}):(0,x.tZ)(c.Z,{css:[a.l0.flex.growAndShrink(1),"",""],children:(0,x.tZ)(He,{text:"Upload custom image",onFile:G.uploadImage})}),G.error?(0,x.tZ)(c.Z,{children:(0,x.tZ)(A.Z,{icon:(0,x.tZ)(U.Z,{}),colorway:"negative",text:G.error,closable:!0,closeAction:G.clearError})}):null]})]})]}),(0,x.tZ)(c.Z,{css:(0,n.iv)({borderBottom:"1px solid "+a.TV.outlineDimmest},"","")}),(0,x.BX)(c.Z,{css:[a.l0.colWithGap(8),"",""],children:[(0,x.BX)(c.Z,{css:[a.l0.rowWithGap(4),"",""],children:[(0,x.tZ)(s.x,{variant:"small",color:"dimmer",children:"POST"})," ",(0,x.tZ)(s.x,{variant:"small",color:"dimmest",children:"(Optional)"})]}),Z?(0,x.BX)(c.Z,{css:[a.l0.borderRadius(8),a.l0.px(8),a.l0.pb(8),{border:"1px solid "+a.TV.outlineDefault},"",""],children:[(0,x.tZ)($e,{onClose:function(){return y(!1)}}),(0,x.BX)(c.Z,{css:[a.l0.colWithGap(8),"",""],children:[(0,x.tZ)(f.ZP,{autoFocus:!0,value:u.value,onChange:function(e){return u.setValue(e.currentTarget.value)},placeholder:"Give your post a title"}),(0,x.tZ)(Ee,{onChange:g.setValue,placeholder:"You can write a Post to explain why you are sharing your Repl in detail. Posts can be about project updates, bug fixes, launches, questions, and more."}),(0,x.tZ)(T,{})]})]}):(0,x.tZ)(qe,{onClick:function(){return y(!0)}})]}),V?(0,x.tZ)(A.Z,{colorway:"negative",icon:(0,x.tZ)(U.Z,{}),text:V}):null,(0,x.tZ)(c.Z,ze(ze({},w?{"aria-label":w,"data-microtip-position":"bottom",role:"tooltip"}:{}),{},{children:(0,x.tZ)(E.zx,{iconLeft:(0,x.tZ)(Ze.Z,{}),disabled:X||Boolean(w),colorway:"primary",text:X?"Publishing...":"Publish Repl",type:"submit",stretch:!0})}))]})]})}},95203:function(e,t,r){r.d(t,{B:function(){return m}});var n=r(92809),o=r(67294),i=r(70917),l=r(49512),c=r(30281),a=r(82457),u=r(35944);function s(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function d(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?s(Object(r),!0).forEach((function(t){(0,n.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):s(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var p=(0,i.iv)([c.gU.filledAndOutlined,a.l0.p(8),a.l0.flex.growAndShrink(1),a.l0.color.foregroundDefault,{outline:"0 none",fontSize:a.TV.fontSizeDefault,lineHeight:"16px",fontFamily:a.TV.fontFamilyDefault,"&::placeholder":[a.l0.color.foregroundDimmest],"&:not([disabled])":{cursor:"text"}}],"",""),f=(0,l.K)("input"),h=o.forwardRef((function(e,t){return(0,u.tZ)(f,d(d({},e),{},{ref:t,css:p}))}));t.ZP=h;var g=(0,l.K)("textarea"),m=o.forwardRef((function(e,t){return(0,u.tZ)(g,d(d({},e),{},{ref:t,css:p}))}))},92169:function(e,t,r){r.d(t,{Z:function(){return a}});var n=r(92809),o=(r(67294),r(96622)),i=r(35944);function l(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function c(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?l(Object(r),!0).forEach((function(t){(0,n.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):l(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function a(e){return(0,i.tZ)(o.Z,c(c({},e),{},{children:(0,i.tZ)("path",{d:"M12 19V5M12 5L5 12M12 5L19 12",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})}))}},82490:function(e,t,r){r.d(t,{Z:function(){return a}});var n=r(92809),o=(r(67294),r(96622)),i=r(35944);function l(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function c(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?l(Object(r),!0).forEach((function(t){(0,n.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):l(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function a(e){return(0,i.tZ)(o.Z,c(c({},e),{},{children:(0,i.tZ)("path",{d:"M9 18L15 12L9 6",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})}))}}}]);
//# sourceMappingURL=1578-4ce067673e16d1466670.js.map