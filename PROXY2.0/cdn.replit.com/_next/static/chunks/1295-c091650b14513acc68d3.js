"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1295],{97949:function(e,t,n){n.d(t,{hI:function(){return U},nD:function(){return L},G_:function(){return B}});var r=n(97131),i=n(92809),o=n(79056),a=n(30266),s=n(809),c=n.n(s),u=n(91674),l=n(78120),d=n(28519),f=n(62126),p=n(34790),g=n(47421),h=n(73599),v=n(41678),m=n(20881);function b(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function y(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?b(Object(n),!0).forEach((function(t){(0,i.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):b(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function w(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"===typeof e)return x(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return x(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function x(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function k(e){if(Array.isArray(e)){var t,n="",r=w(e);try{for(r.s();!(t=r.n()).done;){n+=k(t.value)+"\n\n"}}catch(i){r.e(i)}finally{r.f()}return n}return"string"===typeof e?e:e.value}function E(e,t){var n,r=[],i=w(e);try{for(i.s();!(n=i.n()).done;){var o=n.value,a=(0,v.R)(t,o.range.start),s=(0,v.R)(t,o.range.end);if("number"===typeof a&&"number"===typeof s&&a!==s){var c="info";if(void 0!==o.severity)switch(o.severity){case u.H_.Error:c="error";break;case u.H_.Warning:c="warning";break;case u.H_.Hint:case u.H_.Information:c="info"}r.push({from:a,to:s,severity:c,message:o.message,source:o.source})}}}catch(l){i.e(l)}finally{i.f()}return r}function O(e){var t=e.lspClient,n=e.path;return g.lg.define((function(e){var r=t.onDiagnostics((function(t){if(t.path===n){var r=E(t.diagnostics,e.state.doc);e.dispatch((0,d.p0)(e.state,r))}}));return{destroy:function(){r()}}}))}function j(e){var t=e.hover,n=e.doc,r=e.offset,i=e.setHoverTooltipParams;if((Array.isArray(t.contents)||"string"===typeof t.contents)&&0===t.contents.length)return i(null),null;var o=t.range,a=r,s=null;return o&&(a=(0,v.R)(n,o.start),s=(0,v.R)(n,o.end)),null===a?(i(null),null):{pos:a,end:null===s?a+1:s,create:function(){var e=document.createElement("div");e.classList.add("hover-tooltip"),e.style.padding="0",e.style.border="2px solid var(--background-highest)";var n=k(t.contents);return setTimeout((function(){i({dom:e,content:n})})),{dom:e}},above:!0}}function Z(e){var t=Object.keys(e).join(""),n=/\w/.test(t);return n&&(t=t.replace(/\w/g,"")),"[".concat(n?"\\w":"").concat(t.replace(/[^\w\s]/g,"\\$&"),"]")}function S(e,t){var n,r=e.state,i=e.pos,o=e.explicit,a=r.doc.lineAt(i),s=f.Ij.Invoked;return!o&&null!==t&&void 0!==t&&t.includes(a.text[i-a.from-1])&&(s=f.Ij.TriggerCharacter,n=a.text[e.pos-a.from-1]),s!==f.Ij.Invoked||e.matchBefore(/\w+$/)?{triggerKind:s,triggerCharacter:n}:null}function C(){return(C=(0,a.Z)(c().mark((function e(t,n){var r,i,o;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.request.resolveCompletionItem(t);case 2:if(r=e.sent,i=document.createElement("div"),"result"in r){e.next=6;break}return e.abrupt("return",i);case 6:if(r.result){e.next=8;break}return e.abrupt("return",i);case 8:if(o=r.result.detail){e.next=11;break}return e.abrupt("return",i);case 11:return i.textContent=o,i.className="cm-completionDetail",e.abrupt("return",i);case 14:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var P=Object.entries(u.cm).reduce((function(e,t){var n=(0,o.Z)(t,2),r=n[0],a=n[1];return y((0,i.Z)({},a,r.toLowerCase()),e)}),{});function D(e,t,n,r){var i=t.map((function(e){var t,n=e.detail,i=e.label,o=e.kind,a=e.textEdit,s=e.documentation,c=e.filterText,u=e.sortText,l={label:i,detail:n,apply:a?(t=a,function(e){var n=t.newText,r=(0,v.R)(e.state.doc,t.range.start),i=(0,v.R)(e.state.doc,t.range.end);null!==r&&null!==i&&e.dispatch({changes:{from:r,to:i,insert:n},selection:{anchor:r+n.length}})}):i,type:o&&P[o],filterText:(null!==c&&void 0!==c?c:i).toLowerCase(),sortText:u||i};return s?l.info=k(s):n?l.info=n:r&&(l.info=function(){return function(e,t){return C.apply(this,arguments)}(e,r)}),l})),a=function(e){var t,n=Object.create(null),r=Object.create(null),i=w(e);try{for(i.s();!(t=i.n()).done;){var o=t.value.label;n[o[0]]=!0;for(var a=1;a<o.length;a++)r[o[a]]=!0}}catch(c){i.e(c)}finally{i.f()}var s=Z(n)+Z(r)+"*$";return[new RegExp("^"+s),new RegExp(s)]}(i),s=(0,o.Z)(a,2),c=s[0],u=s[1],l=e.matchBefore(u),d=e.pos;if(l){d=l.from;var f=l.text.toLowerCase(),p=n?f.lastIndexOf(n):-1;p>-1&&(d+=p+1,f=f.slice(p+1)),/^\w+$/.test(f)&&(i=i.filter((function(e){return e.filterText.startsWith(f)})).sort((function(e,t){var n=e.sortText,r=t.sortText;return n.startsWith(l.text)&&!r.startsWith(l.text)?-1:!n.startsWith(l.text)&&r.startsWith(l.text)?1:0})))}return{from:d,options:i,span:c}}function I(e,t,n,r){return T.apply(this,arguments)}function T(){return(T=(0,a.Z)(c().mark((function e(t,n,r,i){var o,a,s,u;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.request.completion(n,(0,v.s)(i.state.doc,i.pos),r);case 2:if(!("error"in(o=e.sent))){e.next=5;break}throw new Error("Something went wrong fetching autocompletion results: ".concat(o.error.message));case 5:if(a=o.result,!i.aborted){e.next=8;break}return e.abrupt("return",null);case 8:if(a){e.next=10;break}return e.abrupt("return",null);case 10:return s=Array.isArray(a)?a:a.items,u=r.triggerCharacter,e.abrupt("return",D(i,s,u,t));case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function _(e,t,n){return A.apply(this,arguments)}function A(){return(A=(0,a.Z)(c().mark((function e(t,n,r){var i,o,a,s;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.request.signatureHelp(n,(0,v.s)(r.state.doc,r.pos));case 2:if(!("error"in(i=e.sent))){e.next=5;break}throw new Error("Something went wrong fetching signature help results: ".concat(i.error.message));case 5:if(o=i.result,!r.aborted){e.next=8;break}return e.abrupt("return",null);case 8:if(o){e.next=10;break}return e.abrupt("return",null);case 10:return a=r.pos,s=o.signatures.map((function(e){return{label:e.label,info:e.documentation?k(e.documentation):void 0}})),e.abrupt("return",{from:a,options:s});case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function R(e,t){var n=[],r=t;return e.iterChanges((function(e,t,i,o,a){var s=a.sliceString(0),c=t-e,u=c+i;n.push({range:{start:(0,v.s)(r,i),end:(0,v.s)(r,u)},rangeLength:c,text:s}),r=r.replace(i,u,a)})),n}function N(e){var t=e.lspClient,n=e.path;return g.tk.updateListener.of((function(e){var r;if(e.docChanged){var i=null===(r=t.getServerCapabilities())||void 0===r?void 0:r.textDocumentSync;if(i!==f.ex.None)if(i!==f.ex.Full)t.notify.didChange(n,R(e.changes,e.startState.doc));else{var o=e.view.state.doc.toString();t.notify.didChange(n,[{text:o}])}}}))}var U=l.Py.define();var L=l.Py.define();function B(e){var t=e.lspClient,n=e.path,i=e.setLspTooltipProps,o=e.setRenameInputParams,s=e.setHoverTooltipParams,u=(0,m.Z)(t),d=[N({lspClient:t,path:n}),O({lspClient:t,path:n})];return u.isAutoCompleteSupported&&d.push(function(e){var t=e.lspClient,n=e.path;return(0,p.ys)({defaultKeymap:!1,override:[function(){var e=(0,a.Z)(c().mark((function e(r){var i,o,a,s,u,l;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=t.getServerCapabilities()){e.next=3;break}return e.abrupt("return",null);case 3:if(s=(null===a||void 0===a||null===(i=a.completionProvider)||void 0===i?void 0:i.triggerCharacters)||[],!(u=S(r,s))){e.next=7;break}return e.abrupt("return",I(t,n,u,r));case 7:if(l=(null===a||void 0===a||null===(o=a.signatureHelpProvider)||void 0===o?void 0:o.triggerCharacters)||[],!S(r,l)){e.next=11;break}return e.abrupt("return",_(t,n,r));case 11:return e.abrupt("return",null);case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()]})}({lspClient:t,path:n})),u.isHoverSupported&&d.push(function(e){var t=e.lspClient,n=e.path,r=e.setHoverTooltipParams;return(0,h.bF)(function(){var e=(0,a.Z)(c().mark((function e(i,o){var a,s,u;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=(0,v.s)(i.state.doc,o),e.next=3,t.request.hover(n,a);case 3:if(!("error"in(s=e.sent))){e.next=7;break}throw r(null),new Error("Something went wrong fetching hover results: ".concat(s.error.message));case 7:if(null!==(u=s.result)){e.next=11;break}return r(null),e.abrupt("return",null);case 11:return e.abrupt("return",j({hover:u,offset:o,doc:i.state.doc,setHoverTooltipParams:r}));case 12:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}())}({setHoverTooltipParams:s,lspClient:t,path:n})),(u.isFindDefinitionSupported||u.isFindReferencesSupported)&&d.push(function(e){var t=e.setLspTooltipProps,n=e.lspClient,i=e.path,o=l.Py.define(),s=l.Py.define();return[g.tk.updateListener.of(function(){var e=(0,a.Z)(c().mark((function e(t){var a,u,l,d,f,p,g,h,b,y,x,k,E,O,j,Z,S,C,P,D,I,T;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:h=function(){t.view.dispatch({effects:s.of(null)})},a=null,u=w(t.transactions);try{for(u.s();!(l=u.n()).done;){d=l.value,f=w(d.effects);try{for(f.s();!(p=f.n()).done;)(g=p.value).is(U)&&(a=g.value)}catch(c){f.e(c)}finally{f.f()}}}catch(c){u.e(c)}finally{u.f()}if(a){e.next=6;break}return e.abrupt("return");case 6:if(b=(0,m.Z)(n),y=t.state.doc,x=(0,v.s)(y,a),!b.isFindReferencesSupported){e.next=15;break}return e.next=12,n.request.findReferences(i,x,{includeDeclaration:!1});case 12:e.t0=e.sent,e.next=16;break;case 15:e.t0={result:null};case 16:if(k=e.t0,!b.isFindDefinitionSupported){e.next=23;break}return e.next=20,n.request.findDefinitions(i,x);case 20:e.t1=e.sent,e.next=24;break;case 23:e.t1={result:null};case 24:if(E=e.t1,!("error"in k)){e.next=27;break}throw new Error("Something went wrong fetching references: ".concat(k.error.message));case 27:if(!("error"in E)){e.next=29;break}throw new Error("Something went wrong fetching definition: ".concat(E.error.message));case 29:if(O=k.result,j=E.result,Z=O&&O.length>0,S=j&&j.length>0,Z||S){e.next=36;break}return h(),e.abrupt("return");case 36:C=[],P=[],O&&O.length>0&&C.push.apply(C,(0,r.Z)(O)),j&&j.length>0&&P.push.apply(P,(0,r.Z)(j)),D=[].concat(C,P).map((function(e){return n.documentUriToPath(e.uri)})).filter((function(e){return e!==i})),I=(0,r.Z)(new Set(D)),T=y.toJSON().join("\n"),t.view.dispatch({effects:o.of({references:C,definitions:P,currentFile:i,currentFileContents:T,files:I})});case 44:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),l.QQ.define({create:function(){return null},update:function(e,t){var n,r=e,i=w(t.effects);try{for(i.s();!(n=i.n()).done;){var a=n.value;a.is(o)&&(r=a.value),a.is(s)&&(r=null)}}catch(c){i.e(c)}finally{i.f()}return r},provide:function(e){return h.hJ.compute([e],(function(n){var r=n.field(e);if(!r)return t(null),null;var i=n.selection.asSingle().main;return{pos:i.from,end:i.to,create:function(e){var n=document.createElement("div");return n.classList.add("cm-lsp-tooltip"),n.classList.add("replit-tooltip"),n.style.padding="0",t(y(y({},r),{},{onClose:function(){e.dispatch({effects:s.of(null)})},dom:n})),{dom:n}}}}))}})]}({setLspTooltipProps:i,lspClient:t,path:n})),u.isRenameSupported&&d.push(function(e){return l.QQ.define({create:function(){return null},update:function(e,t){var n,r=e,i=w(t.effects);try{for(i.s();!(n=i.n()).done;){var o=n.value;o.is(L)&&(r=o.value)}}catch(a){i.e(a)}finally{i.f()}return r},provide:function(t){return h.hJ.compute([t],(function(n){var r=n.field(t);if(null===r)return e(null),null;var i=n.wordAt(r);return i?{pos:r,create:function(){var t=document.createElement("div");t.classList.add("cm-lsp-rename-tooltip"),t.classList.add("replit-tooltip"),t.style.padding="0";var o=n.sliceDoc(i.from,i.to);return e({position:r,variable:o,dom:t}),{dom:t}}}:null}))}})}(o)),d}v.R,v.s},365:function(e,t,n){n.d(t,{Z:function(){return w}});var r=n(79056),i=n(30266),o=n(809),a=n.n(o),s=n(67294),c=n(62126),u=n(90470),l=n(20881);var d=n(45631),f=n(97949),p=n(41678),g=n(83587),h=n(10257),v=n(47421),m=n(78277),b=n(15644);function y(){return(y=(0,i.Z)(a().mark((function e(t){var n,i,o,s,c,u,d,f,h,v,m,b,y,w,x,k,E,O,j;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.event,i=t.view,o=t.client,s=t.session,c=t.filePath,u=t.requestIdRef,(0,g.jh)(n)){e.next=3;break}return e.abrupt("return");case 3:if(i){e.next=5;break}throw new Error("Expected view");case 5:if(d=n.clientX,f=n.clientY,null!==(h=i.posAtCoords({x:d,y:f}))){e.next=9;break}return e.abrupt("return");case 9:if(o){e.next=11;break}throw new Error("Expected LSP Client");case 11:if(c){e.next=13;break}throw new Error("Expected filePath");case 13:if(v=(0,l.Z)(o),v.isFindDefinitionSupported){e.next=16;break}return e.abrupt("return");case 16:return u.current&&o.notify.cancelRequest(u.current),u.current=o.generateId(),m=(0,p.s)(i.state.doc,h),e.next=21,o.request.findDefinitions(c,m,u.current);case 21:if(b=e.sent,u.current=null,!("error"in b)){e.next=25;break}throw new Error("Something went wrong fetching definition location: ".concat(b.error.message));case 25:if(y=b.result,!b.cancelled&&y&&0!==y.length){e.next=28;break}return e.abrupt("return");case 28:w=(0,r.Z)(y,1),x=w[0],k=x.uri,E=x.range,O=E.start,j=o.documentUriToPath(k),s.updateDeeplink({path:j,line:O.line+1,col:O.character});case 33:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function w(e){var t=e.view,n=e.filePath,o=e.isLoading,g=(0,d.Z)().preferences.codeIntelligence,w=(0,h.Z)().session,x=(0,u.Z)(n),k=function(e){var t=s.useState(null),n=(0,r.Z)(t,2),i=n[0],o=n[1];return s.useEffect((function(){if(e)return o((0,l.Z)(e)),e.onServerCapabilitiesChange((function(){o((0,l.Z)(e))}))}),[e]),i}(x),E=s.useState(null),O=(0,r.Z)(E,2),j=O[0],Z=O[1],S=s.useState(null),C=(0,r.Z)(S,2),P=C[0],D=C[1],I=s.useState(null),T=(0,r.Z)(I,2),_=T[0],A=T[1];!function(e){var t=e.filePath,n=(0,h.Z)().fs,r=(0,u.Z)(t);s.useEffect((function(){if(r)return r.onWorkspaceEdit((function(e){var t=e.edit;return(0,b.w)({edit:t,fs:n,client:r}),{applied:!0}}))}),[n,r])}({filePath:n});var R=function(e){var t=e.view,n=e.filePath,r=e.renameInputParams,o=s.useRef(null),c=(0,h.Z)().fs,l=(0,u.Z)(n);return{onRename:s.useCallback(function(){var e=(0,i.Z)(a().mark((function e(i){var s,u,d,g;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}throw new Error("Expected view");case 2:if(l){e.next=4;break}throw new Error("Expected client");case 4:if(n){e.next=6;break}throw new Error("Expected non-null file path");case 6:if(r){e.next=8;break}throw new Error("Expected rename input params");case 8:return s=(0,p.s)(t.state.doc,r.position),o.current&&l.notify.cancelRequest(o.current),u=l.generateId(),o.current=u,e.next=14,l.request.rename(n,s,i,u);case 14:if(d=e.sent,o.current=null,!("error"in d)){e.next=18;break}throw new Error("Something went wrong renaming ".concat(d.error.message));case 18:if(!d.cancelled){e.next=20;break}return e.abrupt("return");case 20:if(g=d.result){e.next=23;break}return e.abrupt("return");case 23:(0,b.w)({edit:g,fs:c,client:l}),t.dispatch({effects:[f.nD.of(null)]});case 25:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[l,t,n,c,r]),closeRenameInput:function(){if(!t)throw new Error("Expected view");t.dispatch({effects:[f.nD.of(null)]})}}}({view:t,filePath:n,renameInputParams:_}),N=R.onRename,U=R.closeRenameInput,L=(0,m.Z)({view:t});return s.useEffect((function(){if(!o&&g&&t&&x&&k&&x.isSupportedFile(n)){x.notify.didOpen(n,t.state.doc.toString());var e=k.isFindDefinitionSupported,r={current:null};return t.dispatch({effects:L.reconfigure([(0,f.G_)({lspClient:x,path:n,setLspTooltipProps:Z,setRenameInputParams:A,setHoverTooltipParams:D}),e?v.tk.domEventHandlers({click:function(e){return function(e){y.apply(this,arguments)}({event:e,view:t,filePath:n,client:x,session:w,requestIdRef:r}),!1}}):[]])}),function(){x.getServerState()===c.aL.INITIALIZED&&x.notify.didClose(n),t.dispatch({effects:L.reconfigure([])})}}}),[x,t,k,L,n,o,w,g,Z,A,D]),{lspTooltipProps:j,hoverTooltipParams:P,renameInputParams:_,closeRenameInput:U,onRename:N}}},55596:function(e,t,n){n.d(t,{Z:function(){return K}});var r=n(47421),i=n(30266),o=n(809),a=n.n(o),s=n(67294),c=n(78120),u=n(56023),l=n(25400),d=/\r\n?|\n/;function f(e){return e.replace(new RegExp(d,"g"),"\n")}function p(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e.length;return e.slice(t,n+1).split(/\r\n/g).length-1}function g(e,t){var n=t,r=0,i=0;do{i=p(e,r,n),r=n,n+=i}while(i);return n}function h(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"===typeof e)return v(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return v(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function v(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function m(e,t){var n=[],r=t;return e.iterChanges((function(e,i,o,a,s){var c=[];o>0&&c.push(g(r,o)),e<i&&c.push({d:g(t,i)-g(t,e)}),s.length&&c.push(s.sliceString(0)),r=(0,l.nn)(r,c),n=(0,l.qC)(n,c)})),n}function b(e,t){var n,r=[],i=0,o=0,a=!0,s=h(e);try{for(s.s();!(n=s.n()).done;){var c=n.value;if("string"===typeof c){var u=c;if(c.endsWith("\r")&&"\n"===t.slice(i,i+1)&&0===(u=c.slice(0,-1)).length)continue;if(u=f(u),a)r.push({from:o,insert:u});else{var l=r[r.length-1];l.insert=l.insert?l.insert+u:u}a=!1}else if("number"===typeof c){var d=p(t,i,i+c);i+=c,o+=c-d,a=!0}else if("object"===typeof c&&"number"===typeof c.d){var g=c.d;if("\r\n"===t.slice(i-1,i+1)&&(o+=1,g-=1),(g-=p(t,i,i+c.d))>0)if(a)r.push({from:o,to:o+g});else{var v=r[r.length-1];v.insert&&!v.to?v.to=o+g:v.to&&(v.to+=g)}i+=c.d,o+=g,a=!1}}}catch(m){s.e(m)}finally{s.f()}return r}function y(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"===typeof e)return w(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return w(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function w(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var x=c.q6.define();function k(e,t){var n=t;return r.tk.updateListener.of((function(t){if(t.docChanged){var r,i=[],o=y(t.transactions);try{for(o.s();!(r=o.n()).done;){var a=r.value,s=m(a.changes,n);n=(0,l.nn)(n,s),a.annotation(c.YW.remote)||a.annotation(x)||(i=(0,l.qC)(i,s))}}catch(u){o.e(u)}finally{o.f()}i.length&&e(i,n)}}))}var E=c.QQ.define({create:function(){return 0},update:function(e,t){var n=t.annotation(x);return n?n.version:e}}),O=n(7785),j=n(78277),Z=n(51595);function S(e){var t=e.view,n=e.fs,r=e.filePath,o=(0,s.useState)(!0),l=o[0],d=o[1],p=(0,O.Z)(),g=(0,j.Z)({view:t}),h=(0,s.useRef)(new Set);function v(e,n){if(!h.current.has(r)&&t){var i=t.state.doc.toString();e===i||(h.current.add(r),Z.kg.error("Mismatch between otClient and codemirror",{otcrlf:e.indexOf("\r")>-1,ot:e,cm:i,path:r,source:n}))}}var m=(0,s.useRef)("");return(0,s.useEffect)((function(){if(t&&n&&r)return n.watchOtFile(r,{onChange:function(){var e=(0,i.Z)(a().mark((function e(t){var n;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=t.latestContent,m.current=n;case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()})}),[t,r,n]),(0,s.useEffect)((function(){if(t){var e="",i=n.watchOtFile(r,{onReady:function(n){var r=n.initialContent,i=n.writeOps,o=n.version;t.dispatch({changes:{from:0,to:t.state.doc.length,insert:f(r.toString())},annotations:[c.YW.addToHistory.of(!1),c.YW.remote.of(!0)]}),t.dispatch({effects:g.reconfigure([E.init((function(){return o})),k((function(t,n){e=n,i(t),v(m.current,"CODEMIRROR")}),r.toString())])}),e=r.toString(),d(!1)},onChange:function(n){var r=n.ops,i=n.changeSource,o=n.version,a=n.latestContent;t.dispatch(function(e){var t=e.ops,n=e.version,r=e.changeSource;return{changes:b(t,e.replitDoc),annotations:[c.YW.remote.of(r===u.Fl.Container),c.YW.addToHistory.of(r===u.Fl.Local),x.of({ops:t,version:n,changeSource:r})]}}({ops:r,changeSource:i,version:o,replitDoc:e})),e=a,v(a,i)},onError:function(){t.dispatch({effects:g.reconfigure([])})},onMoveOrDelete:function(){t.dispatch({effects:g.reconfigure([])})}});return function(){i(),t.dispatch({effects:[g.reconfigure([])]}),p.current&&d(!0)}}}),[t,r,n,p,g]),{isLoading:l}}var C=n(92809),P=n(50025),D=n(79056),I=n(73599),T=n(4466);function _(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"===typeof e)return A(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return A(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function A(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function R(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function N(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?R(Object(n),!0).forEach((function(t){(0,C.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):R(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var U={"#1BC47D":"rgba(27, 196, 125, 0.2)","#EF5533":"rgba(239, 85, 51, 0.2)","#18A0FB":"rgba(24, 160, 251, 0.2)","#FFC700":"rgba(255, 199, 0, 1)","#907CFF":"rgba(144, 124, 255, 0.2)","#00B5CE":"rgba(0, 181, 206, 0.2)","#EE46D3":"rgba(238, 70, 211, 0.2)"};var L=c.Py.define(),B=c.Py.define(),F=c.Py.define();function M(e){return{pos:e.position,strictSide:!0,above:!0,create:function(t){var n=document.createElement("div");n.textContent=e.username,n.style.backgroundColor=e.color.cursor,n.style.color="white",n.classList.add("multiplayer-label");var r=document.createElement("div");r.style.backgroundColor=e.color.cursor,r.classList.add("multiplayer-cursor");var i=document.createElement("div");return i.classList.add("multiplayer-tooltip"),i.appendChild(r),i.appendChild(n),{dom:i,overlap:!0,positioned:function(){r.style.height=t.defaultLineHeight+"px"}}}}}var z=c.QQ.define({create:function(){return{}},update:function(e,t){if(!t.changes.empty){for(var n={},r=0,i=Object.values(e);r<i.length;r++){var o=i[r];n[o.id]=N(N({},o),{},{position:t.changes.mapPos(o.position),selectionStart:t.changes.mapPos(o.selectionStart),selectionEnd:t.changes.mapPos(o.selectionEnd)})}e=n}var a,s=_(t.effects);try{for(s.s();!(a=s.n()).done;){var c=a.value;if(c.is(T.R)&&(e=N({},e)),c.is(L)&&c.value.position<=t.newDoc.length&&((e=N({},e))[c.value.id]=c.value),c.is(B)&&(e=N({},e),c.is(B)&&delete e[c.value]),c.is(F)){e=N({},e);for(var u=0,l=Object.entries(e);u<l.length;u++){var d=(0,D.Z)(l[u],2),f=d[0];d[1].username===c.value&&delete e[f]}}}}catch(p){s.e(p)}finally{s.f()}return e},provide:function(e){return[I.hJ.computeN([e],(function(t){return Object.values(t.field(e)).map(M)})),r.tk.decorations.computeN([e],(function(t){var n=t.field(e);return Object.values(n).map((function(e){var t=e.selectionStart<e.selectionEnd?e.selectionStart:e.selectionEnd,n=e.selectionStart>e.selectionEnd?e.selectionStart:e.selectionEnd;return t===n?null:r.p.set(r.p.mark({attributes:{style:"background-color: ".concat(e.color.selection,"; display: inline-block;")},cursor:e}).range(t,n))})).filter((function(e){return null!==e}))}))]}});function H(e){return r.tk.updateListener.of((function(t){var n=t.state.selection;n!==t.startState.selection&&e(n.ranges.map((function(e){var n=t.state.doc.lineAt(e.head);return{position:e.head,line:n.number,column:e.head-n.from+1,selectionStart:e.from,selectionEnd:e.to}})),n.mainIndex)}))}function G(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function X(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?G(Object(n),!0).forEach((function(t){(0,C.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):G(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function V(e){var t=e.view,n=e.presence,r=e.session,i=e.fs,o=e.filePath,a=(0,s.useState)(!0),c=a[0],u=a[1],l=(0,P.Z)({presence:n}),d=(0,s.useRef)({}),f=(0,O.Z)();(0,s.useEffect)((function(){var e=l.reduce((function(e,t){return t.username&&t.color?X(X({},e),{},(0,C.Z)({},t.username,t.color)):e}),{});d.current=e}),[l]);var p=(0,j.Z)({view:t});return(0,s.useEffect)((function(){if(t){var e=n.onUserLeave((function(e){t.dispatch({effects:F.of(e.username)})})),a=i.watchOtFile(o,{onReady:function(e){var n=e.updateSelections;t.dispatch({effects:p.reconfigure([z,H((function(e,t){n(e);var i=e[t];i&&r.setCursorPosition({column:i.column,lineNumber:i.line,offset:i.position})}))])}),u(!1)},onCursor:function(e){var n=function(e){var t,n=e.cursor,r=e.usernameColorsMap,i=null===(t=n.user)||void 0===t?void 0:t.name;if(i){var o,a=n.id,s=n.position,c=n.selectionStart,u=n.selectionEnd,l=r[i];if(l&&a&&"number"===typeof s&&"number"===typeof c&&"number"===typeof u)return L.of({id:a,username:i,position:s,color:{cursor:l,selection:(o=l,U[o]||"")},selectionStart:c,selectionEnd:u})}}({cursor:e,usernameColorsMap:d.current});n&&t.dispatch({effects:n})},onRemoveCursor:function(e){t.dispatch({effects:B.of(e)})},onError:function(){t.dispatch({effects:p.reconfigure([])})},onMoveOrDelete:function(){t.dispatch({effects:p.reconfigure([])})}});return function(){e(),a(),t.dispatch({effects:p.reconfigure([])}),f.current&&u(!0)}}}),[t,o,i,n,r,p]),{isLoading:c}}var W=n(68563),Y=n(10257);function q(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"===typeof e)return J(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return J(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function J(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function K(e){var t=e.view,n=e.presence,i=e.session,o=e.fs,a=e.filePath,u=S({view:t,fs:o,filePath:a}).isLoading,l=V({view:t,fs:o,filePath:a,presence:n,session:i}).isLoading;!function(e){var t=e.view,n=(0,Y.Z)().presence,i=(0,W.Z)(),o=(0,j.Z)({view:t});s.useEffect((function(){if(i&&t){var e=function(){n.getFollowedUser()&&n.unfollowUser()};return t.dispatch({effects:o.reconfigure(r.tk.domEventHandlers({wheel:e,keydown:e,click:e}))}),function(){t.dispatch({effects:o.reconfigure([])})}}}),[i,t,n,o]);var a=(0,j.Z)({view:t});s.useEffect((function(){if(t&&i){var e=t.state.field(z,!1);if(e){var n=Object.values(e).find((function(e){return e.username===i.username}));n&&o(n.position)}return t.dispatch({effects:a.reconfigure(r.tk.updateListener.of((function(e){var t,n,r=q(e.transactions);try{for(r.s();!(n=r.n()).done;){var a,s=q(n.value.effects);try{for(s.s();!(a=s.n()).done;){var c=a.value;c.is(L)&&c.value.username===i.username&&(t=c.value)}}catch(u){s.e(u)}finally{s.f()}}}catch(u){r.e(u)}finally{r.f()}t&&o(t.position)})))}),function(){t.dispatch({effects:a.reconfigure([])})}}function o(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;if(t){var n=c.jT.cursor(e);t.dispatch({effects:[r.tk.scrollIntoView(n,{x:"center",y:"center"})]})}}}),[t,i,a])}({view:t});var d=u||l,f=(0,j.Z)({view:t});return(0,s.useEffect)((function(){t&&t.dispatch({effects:f.reconfigure([r.tk.editable.of(!d),c.yy.readOnly.of(d)])})}),[t,d,f]),{isLoading:d}}},41678:function(e,t,n){function r(e,t){if(t.line>=e.lines)return null;var n=e.line(t.line+1).from+t.character;return n>e.length?null:n}function i(e,t){var n=e.lineAt(t);return{line:n.number-1,character:t-n.from}}n.d(t,{R:function(){return r},s:function(){return i}})},75276:function(e,t,n){var r=n(67294).createContext(null);t.Z=r},16729:function(e,t,n){n.d(t,{Z:function(){return x}});var r=n(79056),i=n(65988),o=n(67294),a=n(88834),s=n(53567),c=n(92809),u=n(97131),l=n(45187),d=n(80723),f=n(68724),p=n(94184),g=n.n(p),h=n(16264),v=n(35944);function m(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function b(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?m(Object(n),!0).forEach((function(t){(0,c.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):m(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var y=function(e){var t=e.onTeamSelected,n=e.teamContext,r=(0,l.Dar)(),a=r.data,s=r.loading,c=r.error,p=[];a&&a.currentUser&&(p=[{id:a.currentUser.id,username:a.currentUser.username,image:a.currentUser.image}].concat((0,u.Z)(a.currentUser.teams.filter((function(e){return!e.archived})).filter((function(e){return!e.hideTeamRepls})).map((function(e){var t=e.id,n=e.image,r=e.username,i=e.subscription;return{id:t,image:n,username:r,isSubscribed:Boolean(i)}})))));var m=(0,d.L7)({items:p,onSelectedItemChange:function(e){var n;e.selectedItem&&e.selectedItem.id!==(null===a||void 0===a||null===(n=a.currentUser)||void 0===n?void 0:n.id)?t({id:e.selectedItem.id,hasPrivateRepls:Boolean(e.selectedItem.isSubscribed)}):t(null)}}),y=m.isOpen,w=m.selectedItem,x=m.getToggleButtonProps,k=m.getMenuProps,E=m.highlightedIndex,O=m.getItemProps,j=m.getLabelProps,Z=m.selectItem;return(0,o.useEffect)((function(){if(null!==a&&void 0!==a&&a.currentUser){var e=p.find((function(e){return e.username===n}));Z(e||p[0])}}),[null===a||void 0===a?void 0:a.currentUser]),p&&1!==p.length?c?(0,v.BX)("div",{children:["error loading team data $",c]}):s||!w?null:(0,v.BX)("div",{className:"jsx-2768752074 select-team",children:[(0,v.tZ)("label",b(b({},j()),{},{className:"jsx-2768752074",children:"Select repl owner"})),(0,v.BX)("div",b(b({tabIndex:-1},x()),{},{className:"jsx-2768752074 "+(g()("toggle-button",{open:y})||""),children:[(0,v.BX)("div",{className:"jsx-2768752074 user-item",children:[(0,v.tZ)("div",{className:"jsx-2768752074 icon",children:(0,v.tZ)(f.Z,{url:w.image,size:"inherit"})}),(0,v.tZ)("div",{className:"jsx-2768752074 username",children:w.username})]}),(0,v.tZ)("div",{className:"jsx-2768752074 arrow-icon-wrap",children:(0,v.tZ)(h.e0,{color:"var(--foreground-default)",flipped:y})})]})),(0,v.tZ)("div",b(b({},k()),{},{className:"jsx-2768752074",children:y&&(0,v.tZ)("ul",{className:"jsx-2768752074 menu",children:p.map((function(e,t){return(0,v.BX)("li",b(b({},O({item:e,index:t})),{},{className:"jsx-2768752074 "+(g()("user-item",{focused:t===E,selected:e.id===w.id})||""),children:[(0,v.tZ)("div",{className:"jsx-2768752074 icon",children:(0,v.tZ)(f.Z,{url:e.image,size:"inherit"})}),(0,v.tZ)("div",{className:"jsx-2768752074 username",children:e.username})]}),"".concat(e.id))}))})})),(0,v.tZ)(i.default,{id:"2768752074",children:[".select-team.jsx-2768752074{background:var(--background-default);color:var(--foreground-default);width:100%;position:relative;margin-top:var(--space-16);z-index:5;}","label.jsx-2768752074{color:var(--foreground-dimmer);margin-bottom:var(--space-8);display:block;}",".toggle-button.jsx-2768752074{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;cursor:pointer;border:1px solid var(--background-higher);border-radius:var(--border-radius-4);}",".toggle-button.jsx-2768752074:focused{border:1px solid var(--accent-primary-default);}",".toggle-button.open.jsx-2768752074{border:1px solid var(--accent-primary-default);border-bottom:1px solid transparent;border-bottom-right-radius:0;border-bottom-left-radius:0;}",".arrow-icon-wrap.jsx-2768752074{height:100%;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;padding:0 10px;width:30px;}",".arrow-icon-wrap.jsx-2768752074>svg{display:block;width:100%;height:auto;}",".menu.jsx-2768752074{max-height:200px;overflow-y:auto;width:100%;margin:0;border:1px solid var(--accent-primary-default);border-top:0;outline:0;position:absolute;z-index:1;padding:var(--space-4);background:var(--background-default);border-bottom-right-radius:var(--border-radius-4);border-bottom-left-radius:var(--border-radius-4);}",".user-item.jsx-2768752074{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;height:40px;width:100%;cursor:pointer;background:var(--background-default);padding-left:var(--space-8);font-size:var(--font-size-subhead-default);border-radius:var(--border-radius-4);}",".user-item.focused.jsx-2768752074{background:var(--background-highest);color:var(--foreground-default);}",".user-item.selected.jsx-2768752074{background:var(--accent-primary-default);color:var(--white);}",".user-item.jsx-2768752074>.icon.jsx-2768752074{width:24px;min-width:24px;height:24px;min-height:24px;}",".user-item.jsx-2768752074>.username.jsx-2768752074{margin-left:var(--space-16);}"]})]}):null},w=n(50133);function x(e){var t=e.onFork,n=e.hideModal,c=e.initialValue,u=e.teamContext,l=o.useState(null),d=(0,r.Z)(l,2),f=d[0],p=d[1],g=(0,w.Y)(c,(function(e){if(e)return e.length>60?{message:"Must be no longer than 60 characters"}:/[0-9a-zA-Z]/.test(e)?void 0:{message:"Title must contain at least one alphanumeric character"}}));return o.useEffect((function(){g.ref.current&&g.ref.current.focus()}),[g.ref]),(0,v.BX)("form",{onSubmit:function(e){e.preventDefault(),g.error||(t(f,g.value),n())},className:"jsx-4175201198",children:[(0,v.BX)("div",{className:"jsx-4175201198 wrap",children:[(0,v.tZ)("div",{className:"jsx-4175201198 title",children:"Fork Repl"}),(0,v.BX)("div",{className:"jsx-4175201198",children:[(0,v.tZ)("input",{ref:g.ref,placeholder:"Name your repl",onChange:function(e){return g.setValue(e.target.value)},onFocus:function(e){return e.target.select()},value:g.value,onBlur:g.handleBlur,className:"jsx-4175201198 repl-title-input"}),g.error&&(0,v.tZ)("div",{className:"jsx-4175201198 form-error",children:g.error.message})]}),(0,v.tZ)(y,{teamContext:u,onTeamSelected:function(e){p(e?e.id:null)}}),(0,v.BX)(s.Ug,{spacing:1,justify:"end",children:[(0,v.tZ)(a.Z,{onClick:n,autoFocus:!0,children:"Cancel"}),(0,v.tZ)(a.Z,{color:"primary",type:"submit",disabled:!g.value||Boolean(g.error),children:"Confirm"})]})]}),(0,v.tZ)(i.default,{id:"4175201198",children:[".wrap.jsx-4175201198{background-color:var(--background-default);border-radius:var(--border-radius-4);color:var(--foreground-default);}",".repl-title-input.jsx-4175201198{-webkit-appearance:none;-moz-appearance:none;appearance:none;font-size:var(--font-size-subhead-default);display:-webkit-inline-box;display:-webkit-inline-flex;display:-ms-inline-flexbox;display:inline-flex;width:100%;outline:0 none;background-color:transparent;border:1px solid var(--background-highest);margin:0;color:inherit;padding:var(--space-8);border-radius:var(--border-radius-4);-webkit-flex:1 1 auto;-ms-flex:1 1 auto;flex:1 1 auto;}",".form-error.jsx-4175201198{padding-top:7px;color:var(--accent-negative-default);}",".wrap.jsx-4175201198{display:grid;grid-row-gap:25px;}",".title.jsx-4175201198{font-size:var(--font-size-subhead-big);}","@media screen and (min-width:600px){.wrap.jsx-4175201198{padding:75px 50px 75px;}}"]})]})}},75299:function(e,t,n){n.d(t,{Z:function(){return s}});var r=n(79056),i=n(67294),o=n(79367),a=n.n(o);function s(){var e=i.useState(null),t=(0,r.Z)(e,2),n=t[0],o=t[1];return i.useLayoutEffect((function(){if(n)return a()(n),function(){a().destroy(n)}}),[n]),{ref:o,update:function(){n&&a().update(n)}}}},49001:function(e,t,n){n.d(t,{f6:function(){return u},xZ:function(){return d}});var r=n(79056),i=n(67294),o=n(7785),a=n(10257),s=n(68047);function c(e){var t=i.useState(!1),n=(0,r.Z)(t,2),s=n[0],c=n[1],u=(0,o.Z)(),l=(0,a.Z)().dotReplit;return i.useEffect((function(){l.getConfig().then((function(t){!t.error&&u.current&&t.config.language===e&&c(!0)}))}),[e,l,u]),s}function u(){return c("kaboomdraw")}var l=/^draw.[tj]s$/;function d(){var e=(0,s.Z)();return u()&&Boolean(null===e||void 0===e?void 0:e.match(l))}},85822:function(e,t,n){n.d(t,{t:function(){return u}});var r,i=n(52209),o=n(51889),a=n(44119),s=n.n(a),c=n(57407),u=(s()(r||(r=(0,i.Z)(["\n  mutation deleteRepl($id: String!) {\n    deleteRepl(id: $id) {\n      id\n    }\n  }\n"]))),function(e){var t=(0,c.Z)({id:e.id,__typename:e.__typename||"Repl"}),n=function(e,n){return n.node.id===t};return(0,o._M)((function(){return[["data",o.Dx,"recentRepls",n],["data",t]]}))})},16482:function(e,t,n){n.d(t,{H:function(){return r},E:function(){return N}});var r,i=n(92809),o=n(30266),a=n(79056),s=n(809),c=n.n(s),u=n(39084),l=n(223),d=n(49512),f=n(82457),p=n(67294),g=n(61850),h=n(38934),v=n(32523),m=n(28955),b=n(83587),y=n(2876),w=n(45187),x=n(91682),k=n(35944);function E(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function O(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?E(Object(n),!0).forEach((function(t){(0,i.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):E(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}!function(e){e.Video="Video",e.Editor="Editor",e.Examples="Examples",e.Run="Run",e.Output="Output",e.Sidepane="Sidepane",e.Share="Share"}(r||(r={}));var j="workspace-desktop-tour",Z=[{id:r.Video,title:"Get started with the Workspace",content:A,isModal:!0},{id:r.Editor,title:"Code Editor",content:"This is where you write code. Code describes how programs work. The editor helps you write code, by coloring certain types, and giving you suggestions when you type. Click on one of the examples to see how code looks."},{id:r.Examples,title:"Examples",content:"Click on one of these examples to insert into your editor",autoSkipIfNoTarget:!0},{id:r.Run,title:"Running Code",content:'This button takes your code and executes, or "runs", it. You can also run your code using the '.concat(b.V5?"Cmd":"Ctrl","+Return shortcut.")},{id:r.Output,title:"Program Output",content:"This is where the results of the code appear when you run it. Results can be console output (just text), a website, game, or graphics display, depending on the programming language and setup."},{id:r.Sidepane,title:"Filetree & Sidepanes",content:"Here are all the files in this project. There's usually a starter file, but you can make more files and folders as your project grows. The sidepane also contains different features for working on your program."},{id:r.Share,title:"Invite & Collaborate",content:"Invite others to your repl to collaborate and work together at the same time."}],S=Z.filter((function(e){return e.id!==r.Video})),C={id:j,steps:Z},P={id:j,steps:S};function D(){var e=(0,v.X)(),t=e&&!e.isDone&&!e.isLoading;return(0,p.useEffect)((function(){if(t){var e=window.store,n=function(t){var n=e.getState().plugins,r=Object.entries(n).find((function(e){var n=(0,a.Z)(e,2);n[0];return n[1].type===t}));return r?r[0]:null},r=setInterval((function(){!function(){var t=e.getState(),r=t.layout,i=t.plugins,o=m.PP(r,i,"terminal2");if(o){var a=m.Il(m.Il(o)),s=m.QK(r,a);if("tabs"===s.type){var c=n("terminal2"),u=s.tabs.findIndex((function(e){return"pane"===e.type&&e.pud===c}));s.active!==u&&e.dispatch({type:"SET_ACTIVE_TAB",path:a,tabIndex:u})}}}(),function(){var t=e.getState(),r=t.layout,i=t.plugins;if(!m.PP(r,i,"filetree")){var o=n("filetree");e.dispatch({type:"OPEN_SIDE_NAV_ITEM",navItem:{pud:o}})}}()}),200);return function(){clearInterval(r)}}}),[t]),null}if(!Z.find((function(e){return e.id===r.Video})))throw new Error("Expected video step");var I=!1;var T="ws-tour-youtube-video",_={name:"1pvalt1",styles:"width:560px;height:340px"};function A(){return(0,p.useEffect)((function(){var e=null,t=!1;function n(){return r.apply(this,arguments)}function r(){return(r=(0,o.Z)(c().mark((function n(){var r;return c().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!t){n.next=2;break}return n.abrupt("return");case 2:return n.next=4,new Promise((function(t){e=new window.YT.Player(T,{height:"360",width:"640",videoId:"TK_pvR672o0",playerVars:{origin:window.location.origin},events:{onReady:function(){return setTimeout(t,100)}}})}));case 4:if(!t){n.next=7;break}return null===(r=e)||void 0===r||r.destroy(),n.abrupt("return");case 7:if(e){n.next=9;break}throw new Error("expected player");case 9:e.cueVideoById({videoId:"TK_pvR672o0"});case 10:case"end":return n.stop()}}),n)})))).apply(this,arguments)}return I||(I=!0,(0,x.iM)("https://www.youtube.com/player_api")),window.YT?n():window.onYouTubePlayerAPIReady=n,function(){var n,r,i,o;t=!0,window.onYouTubePlayerAPIReady=null;var a=null===(n=e)||void 0===n?void 0:n.getCurrentTime(),s=null===(r=e)||void 0===r?void 0:r.getDuration();"function"===typeof(null===(i=window.analytics)||void 0===i?void 0:i.user)&&(0,h.identify)({id:window.analytics.user().id(),workspaceTourVideoWatchPercentage:s&&a?Math.floor(a/s*100):0}),null===(o=e)||void 0===o||o.destroy()}}),[]),(0,k.BX)(d.Z,{children:[(0,k.tZ)(l.x,{variant:"subheadDefault",css:f.l0.mb(8),children:"Watch this 1 minute video to learn how to build on Replit"}),(0,k.tZ)("div",{id:T,css:_})]})}function R(){var e=(0,w.PpL)({variables:{tours:j}}),t=e.data,n=e.loading,i=(0,w.oep)({variables:{name:j},optimisticResponse:{markTourAsSeen:{__typename:"TourSeen",id:j,seen:!0}}}),o=(0,a.Z)(i,1)[0],s=Boolean(!n&&t&&t.currentUser&&!t.currentUser.toursSeen[0].seen);return(0,k.tZ)(y.Z,{centered:!0,maxWidth:"fit-content",isOpen:s,onRequestClose:function(){var e;o(),"function"===typeof(null===(e=window.analytics)||void 0===e?void 0:e.user)&&(0,h.identify)({id:window.analytics.user().id(),workspaceTourStatus:r.Video.toLowerCase()})},children:(0,k.tZ)(A,{})})}function N(e){var t=e.children,n=(0,g.Q)("flag-workspace-tour-multivariate");if("videoOnly"===n)return(0,k.BX)(k.HY,{children:[(0,k.tZ)(R,{}),t]});function r(e){var t;"function"===typeof(null===(t=window.analytics)||void 0===t?void 0:t.user)&&(0,h.identify)({id:window.analytics.user().id(),workspaceTourStatus:e===Z[Z.length-1].id?"completed":e.toLowerCase()})}var i={tour:"full"===n?C:P,onStep:r,onDone:r};return n&&"off"!==n||(i.isDoneInitialOverride=!0),(0,k.BX)(u.rk,O(O({},i),{},{children:[(0,k.tZ)(D,{}),t]}))}},21757:function(e,t,n){n.d(t,{Z:function(){return g}});var r=n(70917),i=n(94573),o=n(223),a=n(82457),s=n(49512),c=n(70565),u=n(17513),l=n(95211),d=n(97888),f=n(82490),p=n(35944);function g(e){var t=e.title,n=e.content,g=e.colorway,v=void 0===g?"primary":g,m=e.totalSteps,b=void 0===m?1:m,y=e.currentStepIndex,w=void 0===y?0:y,x=e.onDismiss,k=e.onCurrentStepChange;return(0,p.BX)(s.Z,{css:[a.l0.p(8),{paddingBottom:12,paddingRight:t?void 0:32,backgroundColor:i.Br[v].dimmest,border:"1px solid "+i.Br[v].dimmer,position:"relative"},a.l0.borderRadius(8),a.l0.shadow(2),a.l0.colWithGap(8),"",""],children:[(0,p.tZ)(c.Z,{alt:"Close",colorway:v,css:(0,r.iv)({position:"absolute",top:a.TV.space8,right:a.TV.space8},"",""),onClick:x,children:(0,p.tZ)(l.Z,{})}),t&&(0,p.tZ)(o.x,{variant:"subheadBig",children:t}),"function"===typeof n?(0,p.tZ)(n,{}):(0,p.tZ)(o.x,{multiline:!0,children:n}),b>1&&k&&(0,p.BX)(s.Z,{css:[a.l0.flex.row,a.l0.align.center,a.l0.justify.spaceBetween,"",""],children:[(0,p.tZ)(u.ZP,{css:(0,r.iv)({visibility:w<=0?"hidden":void 0},"",""),colorway:v,text:"Back",iconLeft:(0,p.tZ)(d.Z,{}),onClick:function(){return k(w-1)}}),(0,p.tZ)(h,{colorway:v,total:b,current:w}),(0,p.tZ)(u.ZP,{colorway:v,text:w>=b-1?"Done":"Next",iconLeft:(0,p.tZ)(f.Z,{}),onClick:function(){return w>=b-1?x():k(w+1)}})]})]})}function h(e){var t=e.total,n=e.current,r=e.colorway;return(0,p.tZ)(s.Z,{css:a.l0.rowWithGap(8),children:new Array(t).fill(0).map((function(e,t){return(0,p.tZ)(s.Z,{css:[a.l0.borderRadius("full"),{width:a.TV.space8,height:a.TV.space8,backgroundColor:t===n?i.Br[r].stronger:i.Br[r].dimmer},""]},t)}))})}},53291:function(e,t,n){n.d(t,{Z:function(){return s}});var r=n(79056),i=n(67294),o=n(10257),a=n(95610);function s(){var e,t,n=(0,o.Z)().container,s=i.useState(null!==(e=null===(t=n.getContext())||void 0===t?void 0:t.repl)&&void 0!==e?e:null),c=(0,r.Z)(s,2),u=c[0],l=c[1];return i.useEffect((function(){return n.onConnectionStateChanged((function(e){var t,r;e===a.e.CONNECTED&&l(null!==(t=null===(r=n.getContext())||void 0===r?void 0:r.repl)&&void 0!==t?t:null)}))}),[l,n]),u}},8283:function(e,t,n){n.d(t,{Z:function(){return Re}});var r,i=n(30266),o=n(809),a=n.n(o),s=n(95610),c=n(25872);!function(e){e.USER_JOIN="USER_JOIN",e.USER_LEAVE="USER_LEAVE",e.USERS_UPDATE="USERS_UPDATE",e.USER_OPENED_FILE="USER_OPENED_FILE",e.FOLLOWED_USER_CHANGED="FOLLOWED_USER_CHANGED",e.FOLLOWING_USERS_CHANGED="FOLLOWING_USERS_CHANGED"}(r||(r={}));var u=n(97131),l=n(50055),d=n(14256);function f(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"===typeof e)return p(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return p(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function p(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var g=Object.values(d.Z.multiplayer);function h(e){var t={};return g.forEach((function(e){t[e]=0})),e.forEach((function(e){t[e.color]++})),Object.keys(t).sort((function(e,n){return t[e]-t[n]}))[0]}function v(e){var t,n=f(e.sessions.sort((function(e,t){return e.timestamp-t.timestamp})));try{for(n.s();!(t=n.n()).done;){var r=t.value;if(r.activeFile)return r.activeFile}}catch(i){n.e(i)}finally{n.f()}return null}function m(e,t){var n=t.find((function(t){return t.sessions.some((function(t){return t.id===e}))}));if(!n)throw new Error("Expected user with session ID ".concat(e));return n}function b(e){var t=e.seconds,n=e.nanos;return Number(t||0)+(n||0)/1e9}var y=n(38934);var w=n(40354),x=n(84647),k=n(62991),E=n.n(k);function O(e){var t=e.container,n=(0,w.Z)();n.setMaxListeners(1/0);var o=[],s=null,c=[],d={},f=null,p=window.performance.now();function g(){return k.apply(this,arguments)}function k(){return(k=(0,i.Z)(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!f){e.next=2;break}return e.abrupt("return",f);case 2:return e.abrupt("return",new Promise((function(e){n.once(r.USERS_UPDATE,(function(){if(!f)throw new Error("Expected presenceChannel to be set");e(f)}))})));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function O(e){E()(s,e)||(s=e,n.emit(r.FOLLOWED_USER_CHANGED,e))}function j(){return(j=(0,i.Z)(a().mark((function e(t){var n,r,i;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((null===(n=s)||void 0===n?void 0:n.username)!==t){e.next=2;break}throw new Error("Already following user with username ".concat(t));case 2:if(!s){e.next=5;break}return e.next=5,Z();case 5:return e.next=7,g();case 7:if(r=e.sent,i=o.find((function(e){return e.username===t}))){e.next=11;break}return e.abrupt("return");case 11:O(i),i.sessions.forEach((function(e){r.send({followUser:{session:e.id}})})),p=window.performance.now(),(0,y.track)(y.events.LOCAL_USER_CURSOR_FOLLOWED);case 15:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Z(){return S.apply(this,arguments)}function S(){return(S=(0,i.Z)(a().mark((function e(){var t,n,r;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s){e.next=2;break}throw new Error("No user to unfollow");case 2:return t=s,O(null),e.next=6,g();case 6:n=e.sent,t.sessions.forEach((function(e){n.send({unfollowUser:{session:e.id}})})),r=window.performance.now()-p,(0,y.track)(y.events.LOCAL_USER_CURSOR_UNFOLLOWED,{sessionLength:r});case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return t.openChannel({service:"presence",name:"presencer"},(function(e){var t=e.channel;if(!e.error){if(!t)throw new Error("Expected channel");return t.onCommand((function(e){var t={cmd:e,emitter:n,activeUsers:o,userIdToFile:d,followedUser:s,setFollowedUser:O,followingUsers:c};switch(e.body){case"roster":!function(e){var t=e.cmd,n=e.emitter,i=e.activeUsers,o=e.userIdToFile,a=e.followedUser,s=e.followingUsers,c=e.setFollowedUser,l=t.roster;if(l){var d=l.user,f=l.files;if(d&&f){var p=new Set;if(i.splice(0,i.length),d.forEach((function(e){if(e.id&&e.name&&e.roles&&!p.has(e.id)){var t=f.filter((function(t){return t.userId===e.id})).map((function(e){if(!e.session||!e.timestamp)throw new Error("Expected session and associated with user");return{id:e.session,activeFile:e.file||null,timestamp:b(e.timestamp)}}));i.push({id:e.id,username:e.name,roles:e.roles,color:h(i),sessions:t}),p.add(e.id)}})),i.forEach((function(e){o[e.id]=v(e)})),n.emit(r.USERS_UPDATE,(0,u.Z)(i)),i.length>1&&(0,y.track)(y.events.MP2_USER_JOINED,{count:i.length}),s.filter((function(e){return!i.some((function(t){return t.id===e.id}))})).forEach((function(e){var t=s.indexOf(e);-1!==t&&(s.splice(t,1),n.emit(r.FOLLOWING_USERS_CHANGED,{followingUsers:(0,u.Z)(s),user:e,type:"unfollow"}))})),a)if(i.some((function(e){return e.id===a.id}))){var g=o[a.id];n.emit(r.USER_OPENED_FILE,{user:a,file:g})}else c(null)}}}(t);break;case"join":!function(e){var t=e.cmd,n=e.emitter,i=e.activeUsers,o=e.userIdToFile,a=t.join;if(a.id&&a.name&&a.roles&&a.session){var s=i.find((function(e){return e.id===a.id})),c=Math.floor(Date.now()/1e3),d=b(l.google.protobuf.Timestamp.create({seconds:c}));if(s)s.sessions.push({id:a.session,activeFile:null,timestamp:d});else{var f={id:a.id,username:a.name,roles:a.roles,color:h(i),sessions:[{id:a.session,activeFile:null,timestamp:d}]};o[a.id]=null,i.push(f),n.emit(r.USER_JOIN,f),n.emit(r.USERS_UPDATE,(0,u.Z)(i)),(0,y.track)(y.events.MP2_USER_JOINED,{count:i.length})}}}(t);break;case"part":!function(e){var t=e.cmd,n=e.emitter,i=e.activeUsers,o=e.userIdToFile,a=e.followedUser,s=e.followingUsers,c=e.setFollowedUser;if(t.part&&t.part.id&&t.part.session){var l=t.part,d=l.id,f=l.session,p=i.findIndex((function(e){return e.id===d})),g=i[p];if(1===g.sessions.length){i.splice(p,1),delete o[g.id],n.emit(r.USER_LEAVE,g),n.emit(r.USERS_UPDATE,(0,u.Z)(i)),a&&c(null);var h=s.findIndex((function(e){return e.id===g.id}));-1!==h&&(s.splice(h,1),n.emit(r.FOLLOWING_USERS_CHANGED,{followingUsers:(0,u.Z)(s),user:g,type:"unfollow"}))}else{g.sessions=g.sessions.filter((function(e){return e.id!==f}));var m=v(g);o[g.id]!==m&&(o[g.id]=m,n.emit(r.USER_OPENED_FILE,{user:g,file:m}))}}}(t);break;case"fileOpened":!function(e){var t=e.emitter,n=e.cmd,i=e.activeUsers,o=e.userIdToFile;if(n.fileOpened){var a=n.fileOpened,s=a.userId,c=a.file,u=a.timestamp,l=a.session,d=c||null;if(!s||!u)throw new Error("Expected userId and timestamp associated with file opened command");var f=i.find((function(e){return e.id===s}));if(!f)throw new Error("Expected user with ID ".concat(s));var p=f.sessions.find((function(e){return e.id===l}));if(!p)throw new Error("Expected session with ID ".concat(p));p.activeFile=d,p.timestamp=b(u),o[s]=d,t.emit(r.USER_OPENED_FILE,{user:f,file:d})}}(t);break;case"followUser":!function(e){var t=e.cmd,n=e.emitter,i=e.activeUsers,o=e.followingUsers,a=t.followUser;if(!a.session)throw new Error("Expected session associated with follow user");var s=m(a.session,i);o.some((function(e){return e.id===s.id}))||(o.push(s),n.emit(r.FOLLOWING_USERS_CHANGED,{followingUsers:(0,u.Z)(o),user:s,type:"follow"}))}(t);break;case"unfollowUser":!function(e){var t=e.cmd,n=e.emitter,i=e.activeUsers,o=e.followingUsers,a=t.unfollowUser;if(!a.session)throw new Error("Expected session associated with follow user");var s=m(a.session,i),c=o.findIndex((function(e){return e.id===s.id}));-1!==c&&(o.splice(c,1),n.emit(r.FOLLOWING_USERS_CHANGED,{followingUsers:(0,u.Z)(o),user:s,type:"unfollow"}))}(t);break;case"sessionTimestampUpdated":!function(e){var t=e.cmd,n=e.emitter,i=e.activeUsers,o=e.userIdToFile,a=t.sessionTimestampUpdated;if(!a.session||!a.timestamp)throw new Error("Expected session and tiemstamp associated with update");var s=a.session,c=m(s,i),u=o[c.id],l=c.sessions.find((function(e){return e.id===s}));if(!l)throw new Error("Expected user ".concat(c.id," to have a session with ID ").concat(s));l.timestamp=b(a.timestamp);var d=l.activeFile;d!==u&&(o[c.id]=d,n.emit(r.USER_OPENED_FILE,{user:c,file:d}))}(t)}})),f=t,function(){f=null}}})),{onUserLeave:function(e){return n.on(r.USER_LEAVE,e),function(){n.removeListener(r.USER_LEAVE,e)}},onUserJoin:function(e){return n.on(r.USER_JOIN,e),function(){n.removeListener(r.USER_LEAVE,e)}},onActiveUsersChange:function(e){return n.on(r.USERS_UPDATE,e),function(){n.removeListener(r.USERS_UPDATE,e)}},onUserOpenedFile:function(e){return n.on(r.USER_OPENED_FILE,e),function(){n.removeListener(r.USER_OPENED_FILE,e)}},onFollowedUserChanged:function(e){return n.on(r.FOLLOWED_USER_CHANGED,e),function(){n.removeListener(r.FOLLOWED_USER_CHANGED,e)}},onFollowingUsersChanged:function(e){return n.on(r.FOLLOWING_USERS_CHANGED,e),function(){n.removeListener(r.FOLLOWING_USERS_CHANGED,e)}},getActiveFileForUser:function(e){var t=d[e];if("undefined"===typeof t)throw new Error("Expected file for user with ID ".concat(e," to be defined"));return t},updateOpenFile:function(e){return(0,i.Z)(a().mark((function t(){return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,g();case 2:t.sent.send({openFile:{file:e}});case 4:case"end":return t.stop()}}),t)})))()},updateSessionTimestamp:function(){return(0,i.Z)(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g();case 2:e.sent.send({updateSessionTimestamp:{}});case 4:case"end":return e.stop()}}),e)})))()},followUser:function(e){return j.apply(this,arguments)},unfollowUser:Z,getActiveUsers:function(){return o},getFollowedUser:function(){return s},getFollowingUsers:function(){return c},getUserIdToFile:function(){return d},getPathToUserIds:function(){var e=new Map;function t(n,r){var i;if(""!==n){e.has(n)||e.set(n,[]);var o=e.get(n);if(!o)throw new Error("Expected user Ids");o.some((function(e){return e===r}))||(null===(i=e.get(n))||void 0===i||i.push(r),t((0,x.Il)(n),r))}}return o.forEach((function(e){var n=e.id,r=d[n];r&&t(r,n)})),e}}}var j=n(92809),Z=n(63258),S=n(74298);function C(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function P(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?C(Object(n),!0).forEach((function(t){(0,j.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):C(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var D,I=n(80001);!function(e){e.MESSAGES_LOADED="MESSAGES_LOADED",e.MESSAGE_RECEIVED="MESSAGE_RECEIVED",e.MESSAGE_SENT="MESSAGE_SENT",e.USER_TYPING_UPDATED="USER_TYPING_UPDATED"}(D||(D={}));var T=n(98811),_=n(32385),A=n(25373),R=n(67294),N=n(28955);var U,L=function(){throw new Error("layout not provided")},B={has:L,set:L,setFloating:L,insert:L,insertFloating:L,remove:L,component:function(){return R.Fragment}};!function(e){e.MESSAGE_RECEIVED="MESSAGE_RECEIVED"}(U||(U={}));var F=n(37429),M=n(79056),z=n(94793),H=n(60035),G=a().mark(q);function X(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"===typeof e)return V(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return V(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function V(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function W(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Y(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?W(Object(n),!0).forEach((function(t){(0,j.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):W(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function q(e,t){var n;return a().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(e.length===t.length){r.next=2;break}return r.abrupt("return");case 2:n=0;case 3:if(!(n<e.length)){r.next=9;break}return r.next=6,[e[n],t[n]];case 6:n++,r.next=3;break;case 9:case"end":return r.stop()}}),G)}var J=n(48764).Buffer;function K(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function $(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?K(Object(n),!0).forEach((function(t){(0,j.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):K(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Q(e){var t=e.channel,n=e.beforeRun,r=(0,F.u)("terminated"),o=(0,F.u)([]),s=(0,F.u)([]),c=(0,F.u)(new Map),d=(0,F.u)(null),f=(0,w.Z)(),p=function(e,t){var n=new Map,r=new Map,o=new Map;function s(){return(s=(0,i.Z)(a().mark((function t(i){var s,c,u,l,d,f,p,g,h,v,m,b,y,w,x,k,E,O,j,Z,S,C,P,D,I;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:s=X(n.entries()),t.prev=1,s.s();case 3:if((c=s.n()).done){t.next=21;break}if(u=(0,M.Z)(c.value,2),l=u[0],d=u[1],void 0===i||i===l){t.next=7;break}return t.abrupt("continue",19);case 7:return t.next=9,e({command:"setBreakpoints",arguments:{source:{name:l,path:l},breakpoints:d.map((function(e){return{line:e.line,logMessage:e.logMessage||void 0}}))}});case 9:if((f=t.sent).success){t.next=12;break}return t.abrupt("continue",19);case 12:p=X(r);try{for(p.s();!(g=p.n()).done;){v=(0,M.Z)(g.value,2),m=v[0],b=v[1],(null===(h=b.source)||void 0===h?void 0:h.name)===l&&r.delete(m),y=X(o);try{for(y.s();!(w=y.n()).done;)x=(0,M.Z)(w.value,2),k=x[0],x[1]===m&&o.delete(k)}catch(a){y.e(a)}finally{y.f()}}}catch(a){p.e(a)}finally{p.f()}O=X((E=f).body.breakpoints);try{for(O.s();!(j=O.n()).done;)null!=(Z=j.value).id&&r.set(Z.id,Y({source:{name:l,path:l}},Z))}catch(a){O.e(a)}finally{O.f()}S=X(q(d,E.body.breakpoints));try{for(S.s();!(C=S.n()).done;)P=(0,M.Z)(C.value,2),D=P[0],I=P[1],D.breakpointId&&null!=I.id&&o.set(D.breakpointId,I.id)}catch(a){S.e(a)}finally{S.f()}case 19:t.next=3;break;case 21:t.next=26;break;case 23:t.prev=23,t.t0=t.catch(1),s.e(t.t0);case 26:return t.prev=26,s.f(),t.finish(26);case 29:case"end":return t.stop()}}),t,null,[[1,23,26,29]])})))).apply(this,arguments)}function c(){var e,t=new Map,i=new Set,a=X(n.entries());try{for(a.s();!(e=a.n()).done;){var s=(0,M.Z)(e.value,2),c=s[0],u=s[1];if(0!==u.length){var l,d=[],f=X(u);try{for(f.s();!(l=f.n()).done;){var p=l.value;if(p.breakpointId&&p.line){var g=o.get(p.breakpointId),h=void 0===g?void 0:r.get(g);h&&i.add(g),d.push({dapId:g,pid1Id:p.breakpointId,line:h&&h.line||p.line,verified:Boolean(null===h||void 0===h?void 0:h.verified),logMessage:p.logMessage||void 0})}}}catch(D){f.e(D)}finally{f.f()}t.set(c,d)}}}catch(D){a.e(D)}finally{a.f()}var v,m=X(r.entries());try{for(m.s();!(v=m.n()).done;){var b,y,w=(0,M.Z)(v.value,2),x=w[0],k=w[1];if(!i.has(x)){var E=(0,z.IT)((null===(b=k.source)||void 0===b?void 0:b.path)||(null===(y=k.source)||void 0===y?void 0:y.name)||""),O=k.line;if(E&&O){var j=t.get(E);j||(j=[],t.set(E,j));var Z,S=!1,C=X(j);try{for(C.s();!(Z=C.n()).done;){var P=Z.value;if(P.line===k.line){P.dapId=x,P.verified=k.verified,S=!0;break}}}catch(D){C.e(D)}finally{C.f()}S||j.push({dapId:x,line:O,verified:k.verified})}}}}catch(D){m.e(D)}finally{m.f()}return t}return{findPathByBreakpointId:function(e){var t,r=X(n.entries());try{for(r.s();!(t=r.n()).done;){var i=(0,M.Z)(t.value,2),o=i[0];if(i[1].some((function(t){return t.breakpointId===e})))return o}}catch(a){r.e(a)}finally{r.f()}return null},getBreakpoints:c,flush:function(e){return s.apply(this,arguments)},handleDAPBreakpointEvent:function(e){var n=e.body,i=n.reason,o=n.breakpoint,a=o.id;if(null!==a&&void 0!==a){switch(i){case"changed":case"new":r.set(a,Y(Y({},r.get(a)),o));break;case"removed":r.delete(a);break;default:return}t(c())}},handlePID1BreakpointEvent:function(e){var r=e.absolutePath?(0,z.IT)(e.absolutePath):null;r&&(n.set(r,e.breakpoints||[]),t(c()))},handleDebugSessionEnded:function(){r.clear(),o.clear();var e,i=X(n.entries());try{for(i.s();!(e=i.n()).done;){var a=(0,M.Z)(e.value,2),s=a[0];0===a[1].length&&n.delete(s)}}catch(u){i.e(u)}finally{i.f()}t(c())}}}(k,(function(e){c.current=e})),g=(0,F.u)(!1),h=[],v=(0,H.J)((function(e){var t;if(h.push({time:Date.now(),direction:"in",data:e}),"event"===e.type)switch(e.event){case"continued":r.current="running";break;case"stopped":r.current="paused",d.current=null!==(t=e.body.threadId)&&void 0!==t?t:null,f.emit("paused",e.body.reason),function(){Z.apply(this,arguments)}();break;case"breakpoint":p.handleDAPBreakpointEvent(e)}else if("response"===e.type){var n=e,i=m.get(n.request_seq);i&&(m.delete(n.request_seq),i(e))}})),m=new Map,b=100;function y(){r.current="terminated",o.current=[],s.current=[],d.current=null,p.handleDebugSessionEnded(),g.current=!1}var x=!1;function k(e){return E.apply(this,arguments)}function E(){return(E=(0,i.Z)(a().mark((function e(n){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e){var r=b++;m.set(r,e);var i=$($({},n),{},{type:"request",seq:r});h.push({time:Date.now(),direction:"out",data:i});var o={debugInput:{session:"main",adapterInput:ee(i)}};h.push({time:Date.now(),direction:"out",data:o}),t.send(o)})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function O(e){return j.apply(this,arguments)}function j(){return(j=(0,i.Z)(a().mark((function e(n){var r;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return h.push({time:Date.now(),direction:"out",data:n}),e.next=3,t.request(n);case 3:if(r=e.sent,h.push({time:Date.now(),direction:"in",data:r}),!r.error){e.next=7;break}throw r.error;case 7:return e.abrupt("return",r);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Z(){return(Z=(0,i.Z)(a().mark((function e(){var t,n,r,i;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o.current=[],s.current=[],e.next=4,k({command:"stackTrace",arguments:{threadId:d.current}});case 4:if((t=e.sent).success){e.next=7;break}return e.abrupt("return");case 7:if(o.current=t.body.stackFrames,0!==o.current.length){e.next=10;break}return e.abrupt("return");case 10:return n=o.current[0],e.next=13,k({command:"scopes",arguments:{frameId:n.id}});case 13:if((r=e.sent).success){e.next=16;break}return e.abrupt("return");case 16:return e.next=18,Promise.all(r.body.scopes.map((function(e){return k({command:"variables",arguments:{variablesReference:e.variablesReference}}).then((function(t){return{response:t,parentVariableReference:e.variablesReference}}))})));case 18:i=e.sent,s.current=i.filter((function(e){return e.response.success})).reduce((function(e,t){var n=t.response,r=t.parentVariableReference;return e.concat(n.body.variables.map((function(e){return $($({},e),{},{parentVariableReference:r})})))}),[]);case 20:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function S(){return C.apply(this,arguments)}function C(){return(C=(0,i.Z)(a().mark((function e(){var i,s,c,u,l,d;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("terminated"===r.current){e.next=2;break}throw new Error("Cant start while debugger is already running");case 2:return r.current="preinitializing",o.current=[],e.next=6,n();case 6:if("stopping"!==r.current){e.next=9;break}return r.current="terminated",e.abrupt("return");case 9:return x=!0,r.current="initializing",c={debugMain:{session:"main",readOnly:!1}},h.push({time:Date.now(),direction:"out",data:c}),e.next=15,t.request(c);case 15:if(u=e.sent,h.push({time:Date.now(),direction:"in",data:u}),!u.error){e.next=21;break}return f.emit("output",u.error),r.current="terminated",e.abrupt("return");case 21:return e.next=23,k({command:"initialize",arguments:{clientID:"replit",clientName:"replit.com",adapterID:"cppdbg",pathFormat:"path",linesStartAt1:!0,columnsStartAt1:!0,supportsVariableType:!0,supportsVariablePaging:!0,supportsRunInTerminalRequest:!1,locale:"en-us",supportsProgressReporting:!0,supportsInvalidatedEvent:!0}});case 23:if((l=e.sent).success){e.next=27;break}return r.current="terminated",e.abrupt("return");case 27:return g.current=Boolean(null===(i=l.body)||void 0===i?void 0:i.supportsStepBack),d=!(null!==(s=l.body)&&void 0!==s&&s.supportsConfigurationDoneRequest),e.next=31,p.flush();case 31:if(d){e.next=34;break}return e.next=34,k({command:"configurationDone"});case 34:"initializing"===r.current&&(r.current="running"),f.emit("started",d);case 36:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function P(e,t){return D.apply(this,arguments)}function D(){return(D=(0,i.Z)(a().mark((function e(t,n){var i,o,s,c,u;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=n.line,o=n.otIndex,s=n.otVersion,c=n.logMessage,u=(0,z.om)(t)||t,e.next=4,O({debugAddBreakpointRequest:{path:u,line:i,otIndex:o,otVersion:s,logMessage:c}});case 4:if("terminated"===r.current){e.next=7;break}return e.next=7,p.flush(t);case 7:f.emit("breakpoint","added");case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function I(e){return T.apply(this,arguments)}function T(){return(T=(0,i.Z)(a().mark((function e(t){var n;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=p.findPathByBreakpointId(t),e.next=3,O({debugRemoveBreakpointRequest:{breakpointId:t}});case 3:if("terminated"===r.current||!n){e.next=6;break}return e.next=6,p.flush(n);case 6:f.emit("breakpoint","removed");case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function _(){return(_=(0,i.Z)(a().mark((function e(t,n){var i;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=p.findPathByBreakpointId(t)){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,O({debugUpdateBreakpointRequest:{breakpointId:t,logMessage:n.logMessage}});case 5:if("terminated"===r.current){e.next=8;break}return e.next=8,p.flush(i);case 8:f.emit("breakpoint","updated");case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function A(){return(A=(0,i.Z)(a().mark((function e(t,n){var r,i,o;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(o=null===(r=c.current.get(t))||void 0===r||null===(i=r.find((function(e){return e.line===n.line&&void 0!==e.pid1Id})))||void 0===i?void 0:i.pid1Id)){e.next=6;break}return e.next=4,I(o);case 4:e.next=8;break;case 6:return e.next=8,P(t,n);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function R(e){return f.on("started",e),function(){f.removeListener("started",e)}}return t.onCommand((function(e){var t,n;h.push({time:Date.now(),direction:"in",data:e});var i=e.debugOutput,o=e.debugState,a=e.debugBreakpointEvent,s=e.debugSessions;if(i){if("main"!==i.session)return;i.adapterOutput&&v.read(i.adapterOutput),i.output&&f.emit("output",i.output)}if(a&&p.handlePID1BreakpointEvent(a),o&&o.state===l.api.State.Stopped&&y(),(null===s||void 0===s||null===(t=s.sessions)||void 0===t?void 0:t.main)!==l.api.State.Running&&(null===o||void 0===o?void 0:o.state)!==l.api.State.Running||"terminated"===r.current&&S(),(null===s||void 0===s||null===(n=s.sessions)||void 0===n?void 0:n.main)===l.api.State.Stopped||(null===o||void 0===o?void 0:o.state)===l.api.State.Stopped){if(x)return void(x=!1);y()}})),{state:r,stackFrames:o,variables:s,breakpoints:c,supportsStepBack:g,onOutput:function(e){return f.on("output",e),function(){f.removeListener("output",e)}},onStarted:R,onPaused:function(e){return f.on("paused",e),function(){f.removeListener("paused",e)}},onBreakpoint:function(e){return f.on("breakpoint",e),function(){f.removeListener("breakpoint",e)}},sendInput:function(e){return(0,i.Z)(a().mark((function n(){var r,i;return a().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r={debugInput:{session:"main",input:e}},h.push({time:Date.now(),direction:"out",data:r}),n.next=4,t.request(r);case 4:if(i=n.sent,h.push({time:Date.now(),direction:"in",data:i}),!i.error){n.next=8;break}throw i.error;case 8:case"end":return n.stop()}}),n)})))()},fetchVariables:function(e){return(0,i.Z)(a().mark((function t(){var n;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,k({command:"variables",arguments:{variablesReference:e}});case 2:if(!(n=t.sent).success){t.next=5;break}return t.abrupt("return",n.body.variables.map((function(t){return $($({},t),{},{parentVariableReference:e})})));case 5:throw new Error(n.message);case 6:case"end":return t.stop()}}),t)})))()},addBreakpoint:P,removeBreakpoint:I,updateBreakpoint:function(e,t){return _.apply(this,arguments)},toggleBreakpoint:function(e,t){return A.apply(this,arguments)},start:S,continue:function(){return(0,i.Z)(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o.current=[],r.current="running",e.next=4,k({command:"continue",arguments:{threadId:d.current}});case 4:case"end":return e.stop()}}),e)})))()},reverseContinue:function(){return(0,i.Z)(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o.current=[],r.current="running",e.next=4,k({command:"reverseContinue",arguments:{threadId:d.current}});case 4:case"end":return e.stop()}}),e)})))()},back:function(){return(0,i.Z)(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r.current="running",e.next=3,k({command:"stepBack",arguments:{threadId:d.current}});case 3:case"end":return e.stop()}}),e)})))()},next:function(){return(0,i.Z)(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r.current="running",e.next=3,k({command:"stepIn",arguments:{threadId:d.current}});case 3:case"end":return e.stop()}}),e)})))()},stepOut:function(){return(0,i.Z)(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r.current="running",e.next=3,k({command:"stepOut",arguments:{threadId:d.current}});case 3:case"end":return e.stop()}}),e)})))()},stop:function(){return(0,i.Z)(a().mark((function e(){var n,i,o,s;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("terminated"!==r.current){e.next=2;break}throw new Error("Debugger already terminated");case 2:if(n=r.current,r.current="stopping","preinitializing"!==n){e.next=6;break}return e.abrupt("return");case 6:if("initializing"!==n){e.next=13;break}return i=[],e.next=10,Promise.race([new Promise((function(e){i.push(r.subscribe((function(){return e()})))})),new Promise((function(e){i.push(R((function(){return e()})))}))]);case 10:if(i.forEach((function(e){return e()})),"terminated"!==r.current){e.next=13;break}return e.abrupt("return");case 13:return o={debugStop:{session:"main"}},h.push({time:Date.now(),direction:"out",data:o}),e.next=17,t.request(o);case 17:if(s=e.sent,h.push({time:Date.now(),direction:"in",data:s}),!s.error){e.next=21;break}throw new Error("Failed to stop debugger "+s.error);case 21:case"end":return e.stop()}}),e)})))()},getSource:function(e){return(0,i.Z)(a().mark((function t(){var n;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,k({command:"source",arguments:{source:{path:e}}});case 2:if((n=t.sent).success){t.next=5;break}throw new Error(n.message);case 5:return t.abrupt("return",n.body.content);case 6:case"end":return t.stop()}}),t)})))()},getDebugLogs:function(){return Object.entries({state:r,stackFrames:o,variables:s,breakpoints:c,threadId:d}).map((function(e){var t=(0,M.Z)(e,2),n=t[0],r=t[1];return"".concat(n," = ").concat(JSON.stringify(r.current instanceof Map?(0,u.Z)(r.current):r.current,void 0,2))})).join("\n")+"\n\n"+h.map((function(e){return[new Date(e.time).toLocaleString(),"in"===e.direction?"->":"<-",JSON.stringify(e.data)].join(" ")})).join("\n")}}}function ee(e){var t=JSON.stringify(e);return"Content-Length: ".concat(J.byteLength(t),"\r\n\r\n").concat(t)}var te=n(95939),ne=n(31386),re=n(24243),ie=n(36265);function oe(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"===typeof e)return ae(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ae(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function ae(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function se(e){return ce.apply(this,arguments)}function ce(){return(ce=(0,i.Z)(a().mark((function e(t){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=t,e.t1=re.Z,e.next=4,ue(t);case 4:return e.t2=e.sent,e.t3=e.t1.from.call(e.t1,e.t2),e.abrupt("return",e.t0.writeFile.call(e.t0,"index.html",e.t3));case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ue(e){return le.apply(this,arguments)}function le(){return(le=(0,i.Z)(a().mark((function e(t){var n,r,i,o,s,c,u,l,d,f,p,g,h,v,m,b,y,w,k,E,O,j,Z,S,C,P,D,I,T,_;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="",r="",e.next=4,t.readFile("conf.json");case 4:if(!(i=e.sent).error){e.next=7;break}return e.abrupt("return","");case 7:return o=JSON.parse(i.content.toString()),(0,ie.h)(o.version,"0.1.0")?r+="kaboom.import();\n":(0,ie.h)(o.version,"0.4.0")&&(r+="kaboom.global();\n"),(0,ie.h)(o.version,"0.4.0")?r+="\ninit({\n  ...".concat(JSON.stringify(o),",\n  clearColor: ").concat(o.clearColor?function(){var e=o.clearColor;return JSON.stringify({r:e[0],g:e[1],b:e[2],a:e[3]})}():"undefined","\n});\n  "):r+="\nkaboom({\n  ...".concat(JSON.stringify(o),",\n  global: true,\n  plugins: [ peditPlugin, asepritePlugin, kbmspritePlugin ],\n});\n"),e.next=12,Promise.all(["scenes","sprites","sounds"].map(t.readDir));case 12:if(s=e.sent,c=(0,M.Z)(s,3),u=c[0],l=c[1],d=c[2],!l.error){f=oe(l.children);try{for(f.s();!(p=f.n()).done;)g=p.value,h=JSON.stringify((0,x.eb)(g.filename)),v=JSON.stringify("sprites/".concat(g.filename)),(0,ie.H)(o.version,"0.4.0")?g.filename.endsWith(".pedit")?r+="loadPedit(".concat(h,", ").concat(v,");\n"):g.filename.endsWith(".kbmsprite")?r+="loadKbmsprite(".concat(h,", ").concat(v,");\n"):r+="loadSprite(".concat(h,", ").concat(v,");\n"):r+="loadSprite(".concat(h,", ").concat(v,");\n")}catch(a){f.e(a)}finally{f.f()}}if(!d.error){m=oe(d.children);try{for(m.s();!(b=m.n()).done;)y=b.value,w=JSON.stringify((0,x.eb)(y.filename)),k=JSON.stringify("sounds/".concat(y.filename)),r+="loadSound(".concat(w,", ").concat(k,");\n")}catch(a){m.e(a)}finally{m.f()}}if(u.error){e.next=42;break}return e.next=22,Promise.all(u.children.map((function(e){var n=e.filename;return Promise.all([(0,x.eb)(n),t.readFile("scenes/".concat(n))])})));case 22:E=e.sent,O=oe(E),e.prev=24,O.s();case 26:if((j=O.n()).done){e.next=34;break}if(Z=j.value,S=(0,M.Z)(Z,2),C=S[0],!(P=S[1]).error){e.next=31;break}return e.abrupt("continue",32);case 31:r+="scene(".concat(JSON.stringify(C),", (args = {}) => {\n").concat(P.content.toString(),"\n});\n");case 32:e.next=26;break;case 34:e.next=39;break;case 36:e.prev=36,e.t0=e.catch(24),O.e(e.t0);case 39:return e.prev=39,O.f(),e.finish(39);case 42:for(r+="start(".concat(JSON.stringify(o.startScene),");\n"),D=["kaboom.js"],(0,ie.h)(o.version,"0.1.0")?(D.push("kit/physics.js"),D.push("kit/starter.js"),D.push("kit/level.js")):(0,ie.H)(o.version,"0.4.0")&&(D.push("plugins/aseprite.js"),D.push("plugins/pedit.js")),I=0,T=D;I<T.length;I++)_=T[I],n+='<script src="https://kaboomjs.com/lib/'.concat(encodeURIComponent(o.version),"/").concat(encodeURI(_),'"><\/script>\n');return(0,ie.H)(o.version,"0.4.0")&&(n+='<script src="https://kaboomjs.com/pub/legacy/kbmsprite.js"><\/script>\n'),e.abrupt("return",'\n<!DOCTYPE html>\n\n<html>\n\n<head>\n  <title>kaboom</title>\n  <meta charset="utf-8">\n  <style>\n    * {\n      margin: 0;\n    }\n    html,\n    body {\n      width: 100%;\n      height: 100%;\n      overflow: hidden;\n    }\n    canvas {\n      display: block;\n    }\n  </style>\n</head>\n\n<body>\n'.concat(n,"\n  <script>\n").concat(r,"\n  <\/script>\n</body>\n\n</html>\n"));case 48:case"end":return e.stop()}}),e,null,[[24,36,39,42]])})))).apply(this,arguments)}var de,fe=n(48282),pe=n(41951),ge=n(7239),he=n(83633),ve=n.n(he),me=n(71371);function be(e){var t=e.container,n=e.beforeRun,r=(0,w.Z)(),o=ge.Z.Idle,s=new Date(0),c=!1;r.on(ge.z.TEST_RESULT,(function(e){c=c&&"passed"===e.body}));var u=function(e){r.emit(ge.z.STATE_CHANGED,e),o=e},d=function(){var e=(0,i.Z)(a().mark((function e(t,n){var i,o,s,c,d,f,p,g,h,v,m;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=pe.api.Payload.fromObject(n),!(o=pe.api.Payload.verify(i))){e.next=4;break}throw o;case 4:return s=new(ve())((function(e){var t=pe.api.Response.fromObject(e),n=pe.api.Response.verify(t);if(n)me.Tb(new TypeError("invalid payload received"),(function(r){return r.setExtras({validationError:n,payload:i,message:e,response:t})}));else switch(t.body){case"error":return r.emit(ge.z.ERROR,t.error);case"instructionResult":return r.emit(ge.z.INSTRUCTION_RESULT,t.instructionResult);case"testResult":return r.emit(ge.z.TEST_RESULT,t.testResult);case"status":switch(t.status){case pe.api.Status.Ready:return u(ge.Z.Ready);case pe.api.Status.Building:return u(ge.Z.Building);case pe.api.Status.Running:return u(ge.Z.Running)}}})),c=t.onCommand((function(e){if(e.output)try{s.submit(e.output)}catch(g){me.Tb(new SyntaxError("invalid response received from i/o testing binary"),(function(n){return n.setExtras({err:g,payload:i,cmd:e})}))}})),d=t.request({exec:{args:["io-tester"],splitStderr:!0,lifecycle:l.api.Exec.Lifecycle.STDIN,splitLogs:!0}}),e.next=9,new Promise((function(e,t){var n,i=function(){n(),e()};r.once(ge.z.STATE_CHANGED,i);var o=setTimeout((function(){n(),t(new Error("timeout while waiting for iotester to start"))}),2e4);n=function(){clearTimeout(o),r.off(ge.z.STATE_CHANGED,i)}}));case 9:return e.next=11,t.request({input:JSON.stringify(i)+"\n"});case 11:if((f=e.sent).ok){e.next=16;break}throw g=new Error(null!==(p=f.error)&&void 0!==p?p:"unexpected error occurred while sending input to i/o testing binary"),me.Tb(g,(function(e){return e.setExtra("status",f)})),g;case 16:return e.next=18,d;case 18:(h=e.sent).ok||(m=new Error(null!==(v=h.error)&&void 0!==v?v:"unexpected error occurred while executing i/o testing binary"),me.Tb(m,(function(e){return e.setExtra("result",h)}))),c();case 21:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}();return{run:function(e){if(o!==ge.Z.Idle)throw new Error("iotester already running");return u(ge.Z.Starting),s=new Date,c=!0,n().then((function(){return new Promise((function(n,r){var i=t.openChannel({service:"exec"},(function(t){if(t.error)return r(t.error),i;var o="",a="",s=t.channel.onCommand((function(e){e.log?o+=e.log:e.stderr&&(a+=e.stderr)}));return n(d(t.channel,e).finally((function(){s(),i(),(a||o)&&me.Tb(new Error("logs received from io tseter"),(function(t){return t.setExtras({logs:o,stderr:a,payload:e})}))}))),i}))}))})).catch((function(e){return c=!1,Promise.reject(e)})).finally((function(){return u(ge.Z.Idle)}))},get lastRunAt(){return s},get state(){return o},get lastRunDidPass(){return c},onInstructionResult:function(e){return r.on(ge.z.INSTRUCTION_RESULT,e),function(){r.off(ge.z.INSTRUCTION_RESULT,e)}},onStateChanged:function(e){return r.on(ge.z.STATE_CHANGED,e),function(){r.off(ge.z.STATE_CHANGED,e)}},onTestResult:function(e){return r.on(ge.z.TEST_RESULT,e),function(){r.off(ge.z.TEST_RESULT,e)}},onError:function(e){return r.on(ge.z.ERROR,e),function(){r.off(ge.z.ERROR,e)}}}}function ye(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function we(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ye(Object(n),!0).forEach((function(t){(0,j.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ye(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function xe(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"===typeof e)return ke(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ke(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function ke(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}!function(e){e.ANCHORS_ADDED="ANCHORS_ADDED",e.ANCHORS_REMOVED="ANCHORS_REMOVED",e.PORTAL_UPDATED="PORTAL_UPDATED",e.THREAD_CREATED="THREADS_CREATED",e.CODE_EXPLAINED="CODE_EXPLAINED"}(de||(de={}));var Ee=n(62126),Oe=n(32535),je=n(81700),Ze=n.n(je),Se=n(37416);function Ce(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"===typeof e)return Pe(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Pe(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function Pe(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function De(e,t){return Ze()(e,{extended:!0,globstar:!0}).test(t)}function Ie(e,t){return e&&t?e.globPattern===t.globPattern&&JSON.stringify(e.startCommand)===JSON.stringify(t.startCommand):Boolean(e)===Boolean(t)}function Te(e){return _e.apply(this,arguments)}function _e(){return(_e=(0,i.Z)(a().mark((function e(t){var n,r,i=arguments;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=i.length>1&&void 0!==i[1]?i[1]:0,e.next=3,t.exec("pwd");case 3:if(null===(r=e.sent).error){e.next=8;break}if(!(n>5)){e.next=7;break}return e.abrupt("return",{error:new Error("Could not get cwd "+r.error),workingDirectory:null});case 7:return e.abrupt("return",Te(t,n+1));case 8:return e.abrupt("return",{error:null,workingDirectory:r.output.replace("\n","")});case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ae(e){var t=e.container,n=e.dotReplit,r=e.allowNonNix,i=void 0!==r&&r,o=new Map,a=new Map,s={};function c(e){var t=s[e];if(!t)throw new Error("languageId was never configured");var n=t.client;if(n){t.client=null,n.destroy();var r,i=Ce(o);try{for(i.s();!(r=i.n()).done;){var c=(0,M.Z)(r.value,2),u=c[0],l=c[1];if(a.get(u)===n){a.delete(u);var d,f=Ce(l);try{for(f.s();!(d=f.n()).done;){(0,d.value)(null)}}catch(p){f.e(p)}finally{f.f()}}}}catch(p){i.e(p)}finally{i.f()}}t.closeChannel(),delete s[e]}function u(e,t,n){if(s[e])throw new Error("languageId is already configured");s[e]={client:null,globPattern:t,startCommand:n,closeChannel:function(){}},d(e)}function d(e){if(!s[e])throw new Error("No config found for language");var n=s[e],r=n.globPattern,c=n.startCommand;if(n.client)throw new Error("A client is already set for language");var u=[],f=t.openChannel({service:"lsp2",skip:function(e){return!i&&!e.repl.language.startsWith("nix")}},(function(n){var i=n.channel;if(i){i.send({startLSP:{language:e}});var p=null,g=function(){var t;u.forEach((function(e){return e()})),null===(t=p)||void 0===t||t.destroy(),s[e].client===p&&(s[e].client=null),f();var n,r=Ce(o);try{for(r.s();!(n=r.n()).done;){var i=(0,M.Z)(n.value,2),c=i[0],l=i[1];if(a.get(c)===p){a.delete(c);var d,g=Ce(l);try{for(g.s();!(d=g.n()).done;){(0,d.value)(null)}}catch(h){g.e(h)}finally{g.f()}}}}catch(h){r.e(h)}finally{r.f()}};return u.push(i.onCommand((function(t){t.state===l.api.State.Stopped&&(g(),d(e))}))),Te(t).then((function(t){Ie(s[e],{globPattern:r,startCommand:c})&&"open"===i.status&&(t.error||((p=(0,Se._)({channel:i,languageId:e,isSupportedFile:function(e){return De(r,e)}})).initialize({pwd:t.workingDirectory}),u.push(p.onServerStateChange((function(t){if("open"===i.status&&p&&Ie(s[e],{globPattern:r,startCommand:c})&&t===Ee.aL.INITIALIZED){s[e].client=p;var n,u=Ce(o);try{for(u.s();!(n=u.n()).done;){var l=(0,M.Z)(n.value,2),d=l[0],f=l[1];if(De(r,d)&&!a.has(d)){a.set(d,p);var g,h=Ce(f);try{for(h.s();!(g=h.n()).done;){(0,g.value)(p)}}catch(v){h.e(v)}finally{h.f()}}}}catch(v){u.e(v)}finally{u.f()}}})))))})),g}}));s[e].closeChannel=f}return n.watch((function(e){if(e.error){if(e.error===Oe.Y.NotFound)for(var t=0,n=Object.keys(s);t<n.length;t++){c(n[t])}}else if(e.config.languages){for(var r={},i=0,o=Object.entries(e.config.languages);i<o.length;i++){var a=(0,M.Z)(o[i],2),l=a[0],d=a[1];d.pattern&&d.languageServer&&d.languageServer.startCommand&&(r[l]={globPattern:d.pattern,startCommand:d.languageServer.startCommand})}for(var f=0,p=Object.keys(s);f<p.length;f++){var g=p[f];r[g]||c(g)}for(var h=0,v=Object.keys(r);h<v.length;h++){var m=v[h];s[m]||u(m,r[m].globPattern,r[m].startCommand)}for(var b=0,y=Object.keys(r);b<y.length;b++){var w=y[b],x=s[w],k=r[w];x&&!Ie(x,k)&&(c(w),u(w,k.globPattern,k.startCommand))}}else for(var E=0,O=Object.keys(s);E<O.length;E++){c(O[E])}})),{onClient:function(e,t){var n;o.has(e)||o.set(e,[]),null===(n=o.get(e))||void 0===n||n.push(t);var r=a.get(e);if(r)t(r);else for(var i=0,c=Object.values(s);i<c.length;i++){var u=c[i];if(De(u.globPattern,e)){u.client&&t(u.client);break}}return function(){o.set(e,(o.get(e)||[]).filter((function(e){return e!==t})))}}}}function Re(e){var t=e.workspace,n=e.onUnrecoverableError,r=(0,s.Z)({onUnrecoverableError:n}),o=function(){var e=(0,w.Z)();e.setMaxListeners(20);var t=null,n=null,r=null,i=[],o=!1,a=!1,s={column:1,lineNumber:1,offset:0},c={openFiles:[],activeTab:0},u={isMonitoring:!0,interval:Z.u,utilization:null};function l(t){E()(c,t)||(c=t,e.emit(Z.z.SESSION_STATE_CHANGED,c))}function d(e,t){var n=t||c.openFiles.length;if(e<0||e>=n||!Number.isInteger(e))throw new Error("Invalid index: ".concat(e,". Index must be an integer between 0 and ").concat(n))}return{onResourceMonitoringStateChanged:function(t){return e.on(Z.z.RESOURCE_MONITORING_STATE_CHANGED,t),function(){e.removeListener(Z.z.RESOURCE_MONITORING_STATE_CHANGED,t)}},setResourceMonitoringState:function(t){E()(u,t)||(u=t,e.emit(Z.z.RESOURCE_MONITORING_STATE_CHANGED,u))},getResourceMonitoringState:function(){return u},onSessionStateChanged:function(t){return e.on(Z.z.SESSION_STATE_CHANGED,t),function(){e.removeListener(Z.z.SESSION_STATE_CHANGED,t)}},onPreviewedFileChanged:function(t){return e.on(Z.z.PREVIEWED_FILE_CHANGED,t),function(){e.removeListener(Z.z.PREVIEWED_FILE_CHANGED,t)}},onPreviewedYoutubeVideoChanged:function(t){return e.on(Z.z.PREVIEWED_YOUTUBE_VIDEO_CHANGED,t),function(){e.removeListener(Z.z.PREVIEWED_YOUTUBE_VIDEO_CHANGED,t)}},onCursorPositionChanged:function(t){return e.on(Z.z.CURSOR_POSITION_CHANGED,t),function(){e.removeListener(Z.z.CURSOR_POSITION_CHANGED,t)}},onCommandBarToggled:function(t){return e.on(Z.z.COMMAND_BAR_TOGGLED,t),function(){e.removeListener(Z.z.COMMAND_BAR_TOGGLED,t)}},onHiddenFileVisibilityToggled:function(t){return e.on(Z.z.CONFIG_FILE_VISIBILITY_TOGGLED,t),function(){e.removeListener(Z.z.CONFIG_FILE_VISIBILITY_TOGGLED,t)}},onDeeplinkUpdated:function(t){return e.on(Z.z.DEEPLINK_CHANGED,t),r&&(t(r),r=null),function(){e.removeListener(Z.z.DEEPLINK_CHANGED,t)}},closeTab:function(e){d(e);var t=c.openFiles.slice(),n=c.activeTab;e<=c.activeTab&&0!==c.activeTab&&n--,t.splice(e,1),l({openFiles:t,activeTab:n})},openFile:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.tabIndex,r=t.newTab,o=i.indexOf(e);if(-1!==o?(i.splice(o),i.unshift(e)):(i.unshift(e),i.length>5&&i.pop()),void 0===n)if(c.openFiles.includes(e))l(P(P({},c),{},{activeTab:c.openFiles.indexOf(e)}));else{var a=c.openFiles.slice();if(r){var s=0===a.length?0:c.activeTab+1;return a.splice(s,0,e),void l({openFiles:a,activeTab:s})}var u=c.activeTab;a.splice(u,1,e),l({openFiles:a,activeTab:u})}else{d(n,c.openFiles.length+1);var f=c.openFiles.slice(),p=c.openFiles.indexOf(e);if(-1===p)return f.splice(n,1,e),void l({openFiles:f,activeTab:f.indexOf(e)});if(p===n)return void l(P(P({},c),{},{activeTab:f.indexOf(e)}));f.splice(p,1),f.splice(n,0,e);var g=f.indexOf(e);l({openFiles:f,activeTab:g})}},moveFile:function(e,t){var n=c.openFiles.map((function(n){return n===e?t:(0,S.yr)(e,n)?(0,S.hk)(e,t,n):n}));l(P(P({},c),{},{openFiles:n}))},deleteFile:function(e){var t=c.openFiles[c.activeTab],n=c.openFiles.filter((function(t){return t!==e&&!(0,S.yr)(e,t)})),r=n.includes(t)?n.indexOf(t):n.length-1,o=Math.max(0,r),a=i.findIndex((function(t){return t===e}));a&&i.splice(a,1),l({openFiles:n,activeTab:o})},updateDeeplink:function(t){e.emit(Z.z.DEEPLINK_CHANGED,t),r=t},getActiveFile:function(){var e=c,t=e.openFiles,n=e.activeTab;if(0!==t.length)return t[n]},getCursorPosition:function(){return s},getRecentFiles:function(){return i},setPreviewedFile:function(n){t!==n&&(t=n,e.emit(Z.z.PREVIEWED_FILE_CHANGED,n))},setCursorPosition:function(t){E()(t,s)||(s=t,e.emit(Z.z.CURSOR_POSITION_CHANGED,t))},setIsCommandBarOpen:function(t){o!==t&&(o=t,e.emit(Z.z.COMMAND_BAR_TOGGLED,o))},setAreHiddenFilesVisible:function(t){a!==t&&(a=t,e.emit(Z.z.CONFIG_FILE_VISIBILITY_TOGGLED,a))},setPreviewedYoutubeVideo:function(t){n!==t&&(n=t,e.emit(Z.z.PREVIEWED_YOUTUBE_VIDEO_CHANGED,t))},getPreviewedFile:function(){return t},getPreviewedYoutubeVideo:function(){return n},getIsCommandBarOpen:function(){return o},getAreHiddenFilesVisible:function(){return a},getState:function(){return c}}}(),u=(0,T.Z)({container:r}),l=O({container:r}),d=(0,te.Z)({container:r,fs:u}),f=(0,c.Z)({container:r,dotReplit:d}),p=function(e){var t=e.container,n=(0,w.Z)(),r=null,o=[],s=[];function c(){return u.apply(this,arguments)}function u(){return(u=(0,i.Z)(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!r){e.next=2;break}return e.abrupt("return",r);case 2:return e.abrupt("return",new Promise((function(e){n.once(D.MESSAGES_LOADED,(function(){e(r)}))})));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return t.openChannel({service:"chat",name:"chatter"},(function(e){var t=e.channel;if(!e.error){if(!t)throw new Error("Expected channel");return t.onCommand((function(e){switch(e.body){case"chatMessage":var i=e.chatMessage;if(!i||!i.username||!i.text)throw new Error("expected a chat message in the response");o.push(i),n.emit(D.MESSAGE_RECEIVED,{text:i.text,username:i.username});break;case"chatTyping":var a=e.chatTyping;if(!a||!a.username)return;var c=a.username,u=a.typing;u&&!s.includes(c)&&s.push(c),!u&&s.includes(c)&&s.splice(s.indexOf(c),1),n.emit(D.USER_TYPING_UPDATED,{username:c,isTyping:Boolean(u)});break;case"chatScrollback":var l=e.chatScrollback;if(null===l||void 0===l||!l.scrollback)return;l.scrollback.forEach((function(e){return o.push(e)})),r=t,n.emit(D.MESSAGES_LOADED,o)}})),function(){r=null}}})),{sendMessage:function(e){return(0,i.Z)(a().mark((function t(){var r;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,c();case 2:r=t.sent,o.push(e),r.send({chatMessage:e}),n.emit(D.MESSAGE_SENT,e);case 6:case"end":return t.stop()}}),t)})))()},onMessageReceived:function(e){return n.on(D.MESSAGE_RECEIVED,e),function(){n.removeListener(D.MESSAGE_RECEIVED,e)}},onMessageSent:function(e){return n.on(D.MESSAGE_SENT,e),function(){n.removeListener(D.MESSAGE_SENT,e)}},updateUserTyping:function(e){return(0,i.Z)(a().mark((function t(){var n,r,i;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,c();case 2:n=t.sent,r=e.username,i=e.isTyping,n.send({chatTyping:{username:r,typing:i}});case 5:case"end":return t.stop()}}),t)})))()},onUserTypingUpdated:function(e){return n.on(D.USER_TYPING_UPDATED,e),function(){n.removeListener(D.USER_TYPING_UPDATED,e)}},onMessagesLoaded:function(e){return n.on(D.MESSAGES_LOADED,e),function(){n.removeListener(D.MESSAGES_LOADED,e)}},getMessages:function(){return o},getUsersTyping:function(){return s}}}({container:r}),g=function(){var e=(0,i.Z)(a().mark((function e(){var t;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("kaboom"!==(null===(t=r.getContext())||void 0===t?void 0:t.repl.language)){e.next=3;break}return e.next=3,se(u);case 3:return e.next=5,u.flush();case 5:return e.next=7,(0,fe.Z)(r,d);case 7:if(!e.sent){e.next=10;break}return e.next=10,f.installPackages();case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),h=(0,I.Z)({container:r,beforeRun:g}),v=function(e){var t=e.container,n=e.beforeRun,r=(0,F.u)(null);return{mainClient:r,connect:function(){return new Promise((function(e,i){r.current||t.openChannel({service:"debugger"},(function(t){if(!t.error)return r.current=Q({channel:t.channel,beforeRun:n}),e(null),function(){r.current=null};i(t.error)}))}))}}}({container:r,beforeRun:g}),m=(0,A.Z)({beforeRun:g,getMainFileContents:function(e){return(0,_.Z)({language:e,fs:u})}}),b=t?function(e){var t=e.workspace,n=function(){return t.store.getState()},r=t.store.dispatch,i=t.component(),o=function(e){if(!n().plugins[e])throw new Error("Unknown plugin with pud:".concat(e))};return{component:function(){return i},set:function(e){r({type:"UPDATE_LAYOUT",path:N.Jz(),to:e})},setFloating:function(e){r({type:"UPDATE_LAYOUT",path:N.cV(),to:e})},insertFloating:function(e){o(e);var t=n().layout,i=N.$T(t,e,"inside",N.cV()),a=i.path,s=i.to;r({type:"UPDATE_LAYOUT",path:a,to:s})},insert:function(e,t,i){o(e);var a=n(),s=a.layout,c=a.plugins,u=null,l="";if("above"in t?(u="above",l=t.above):"rightOf"in t?(u="rightOf",l=t.rightOf):"below"in t?(u="below",l=t.below):"leftOf"in t&&(u="leftOf",l=t.leftOf),!u)throw new Error("Expected direction");var d=N.$T(s,e,u,N.PP(s,c,l),i),f=d.path,p=d.to;r({type:"UPDATE_LAYOUT",path:f,to:p,property:void 0})},remove:function(e){o(e);var t=N.Od(n().layout,e),i=t.path,a=t.to;r({type:"UPDATE_LAYOUT",path:i,to:a,property:null})},has:function(e){return o(e),N.e$(n().layout,e)}}}({workspace:t}):B,y=function(e){var t,n=e.container,r=(0,w.Z)(),o=new Promise((function(e){return t=e})),s=null;return n.openChannel({service:"chat",name:"broadcaster"},(function(e){if(!e.error){var n=e.channel,i=e.context;if(!n)throw new Error("Expected channel");return i.currentUser&&(s=i.currentUser.username),n.onCommand((function(e){switch(e.body){case"chatMessage":var t=e.chatMessage;if(!t||!t.username||!t.text)throw new Error("unexpected broadcast without a message");r.emit(U.MESSAGE_RECEIVED,{text:t.text,username:t.username})}})),t(n),function(){o=new Promise((function(e){return t=e}))}}})),{broadcastMessage:function(e){return(0,i.Z)(a().mark((function t(){var n,r;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.text,t.next=3,o;case 3:if(r=t.sent,s){t.next=6;break}throw new Error("Cannot broadcast without as username. Is currentUser in context?");case 6:r.send({chatMessage:{text:n,username:s}});case 7:case"end":return t.stop()}}),t)})))()},onBroadcastReceived:function(e){return r.on(U.MESSAGE_RECEIVED,e),function(){r.removeListener(U.MESSAGE_RECEIVED,e)}}}}({container:r}),x=(0,ne.g)({container:r}),k=Ae({container:r,dotReplit:d}),j=be({container:r,beforeRun:g}),C=function(e){var t=e.fs,n={},r={},o={},s=(0,w.Z)();function c(e){return u.apply(this,arguments)}function u(){return(u=(0,i.Z)(a().mark((function e(n){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Promise.all(n.map(function(){var e=(0,i.Z)(a().mark((function e(n){var r,i,o;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new Promise((function(e){r=t.watchOtFile(n.path,{onReady:function(t){var i=t.transformSelection,o=t.version;if(r(),o===n.otVersion)return e({indexStart:n.indexStart,indexEnd:n.indexEnd,version:n.otVersion});e(i({indexStart:n.indexStart,indexEnd:n.indexEnd,versionFrom:n.otVersion,versionTo:o}))}})}));case 2:return i=e.sent,o=we(we({},n),{},{indexStart:i.indexStart,indexEnd:i.indexEnd,otVersion:i.version}),e.abrupt("return",o);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return{onAnchorPortalSet:function(e,t){var n=function(n){n.id===e&&t(n)};return s.on(de.PORTAL_UPDATED,n),function(){s.removeListener(de.PORTAL_UPDATED,n)}},addAnchors:function(e){return(0,i.Z)(a().mark((function t(){var i,o,u,l,d,f,p;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:i=xe(e);try{for(i.s();!(o=i.n()).done;)u=o.value,n[u.id]=u}catch(a){i.e(a)}finally{i.f()}return t.next=4,c(e);case 4:l=t.sent,d=xe(l);try{for(d.s();!(f=d.n()).done;)p=f.value,r[p.id]=p}catch(a){d.e(a)}finally{d.f()}s.emit(de.ANCHORS_ADDED,l);case 8:case"end":return t.stop()}}),t)})))()},removeAnchors:function(e){return(0,i.Z)(a().mark((function t(){var i,c,u,l;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:i=[],c=xe(e),t.prev=2,c.s();case 4:if((u=c.n()).done){t.next=14;break}if(l=u.value,n[l]){t.next=8;break}return t.abrupt("continue",12);case 8:i.push(n[l]),delete o[l],delete r[l],delete n[l];case 12:t.next=4;break;case 14:t.next=19;break;case 16:t.prev=16,t.t0=t.catch(2),c.e(t.t0);case 19:return t.prev=19,c.f(),t.finish(19);case 22:s.emit(de.ANCHORS_REMOVED,i);case 23:case"end":return t.stop()}}),t,null,[[2,16,19,22]])})))()},getAnchors:function(e){return(0,i.Z)(a().mark((function t(){var i,o,s,u,l;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=Object.values(n).filter((function(t){return t.path===e})),t.next=3,c(i);case 3:o=t.sent,s=xe(o);try{for(s.s();!(u=s.n()).done;)l=u.value,r[l.id]=l}catch(a){s.e(a)}finally{s.f()}return t.abrupt("return",o);case 7:case"end":return t.stop()}}),t)})))()},createThread:function(e){s.emit(de.THREAD_CREATED,e)},explainCode:function(e){s.emit(de.CODE_EXPLAINED,e)},onThreadCreated:function(e){return s.on(de.THREAD_CREATED,e),function(){s.off(de.THREAD_CREATED,e)}},onCodeExplained:function(e){return s.on(de.CODE_EXPLAINED,e),function(){s.off(de.CODE_EXPLAINED,e)}},onAnchorsAdded:function(e){return s.on(de.ANCHORS_ADDED,e),function(){s.removeListener(de.ANCHORS_ADDED,e)}},onAnchorsRemoved:function(e){return s.on(de.ANCHORS_REMOVED,e),function(){s.removeListener(de.ANCHORS_REMOVED,e)}},setAnchorPortal:function(e){n[e.id]&&r[e.id]&&(o[e.id]=e,s.emit(de.PORTAL_UPDATED,e))}}}({fs:u});return{layout:b,session:o,presence:l,packager:f,container:r,fs:u,chat:p,runner:h,debuggest:v,replbox:m,broadcast:y,dotReplit:d,lsp:x,lspnix:k,iotester:j,anchorer:C}}},7239:function(e,t,n){var r,i;n.d(t,{z:function(){return r},Z:function(){return i}}),function(e){e.INSTRUCTION_RESULT="INSTRUCTION_RESULT",e.TEST_RESULT="TEST_RESULT",e.ERROR="ERROR",e.STATE_CHANGED="STATE_CHANGED"}(r||(r={})),function(e){e[e.Idle=0]="Idle",e[e.Starting=1]="Starting",e[e.Ready=2]="Ready",e[e.Building=3]="Building",e[e.Running=4]="Running"}(i||(i={}))},15644:function(e,t,n){n.d(t,{w:function(){return s}});var r=n(8686),i=n(56023),o=n(24243);function a(e){var t=e.path,n=e.fs,o=e.edits,a=!1,s=n.watchOtFile(t,{onReady:function(e){var t=e.writeOps,n=e.initialContent;t((0,r.Z)(o,n.toString())),a=!0},onStatusChange:function(e){e===i.KF.Clean&&a&&s()}})}function s(e){var t=e.edit,n=e.fs,r=e.client,s=t.documentChanges,c=t.changes;if(s&&s.forEach((function(e){if("textDocument"in e){var t=e.edits,s=e.textDocument;a({path:r.documentUriToPath(s.uri),fs:n,edits:t})}else switch(e.kind){case"create":var c=r.documentUriToPath(e.uri),u=e.options,l=Boolean((null===u||void 0===u?void 0:u.overwrite)||!(null!==u&&void 0!==u&&u.ignoreIfExists)),d=function(){n.writeFile(c,o.Z.from("")).then((function(e){if(e.error)throw new Error("Something went wrong writing to a file")}))};if(l){d();break}n.stat(c).then((function(e){e.exists||d()}));break;case"delete":var f=r.documentUriToPath(e.uri),p=e.options,g=Boolean(null===p||void 0===p?void 0:p.recursive),h=Boolean(null===p||void 0===p?void 0:p.ignoreIfNotExists);n.stat(f).then((function(e){if(!e.exists)throw new Error("Expected file to exist");if(e.type===i.Tv.Directory&&!g)throw new Error("Trying to delete a directory without recursive option enabled");n.deleteFile(f).then((function(e){var t=e.error;if((t!==i.Df.NotFound||!h)&&t)throw new Error("Something went wrong deleting the file")}))}));break;case"rename":var v=r.documentUriToPath(e.oldUri),m=r.documentUriToPath(e.newUri),b=e.options,y=Boolean((null===b||void 0===b?void 0:b.overwrite)||!(null!==b&&void 0!==b&&b.ignoreIfExists)),w=function(){n.moveFile(v,m).then((function(e){if(e.error)throw new Error("Something went wrong moving the file")}))};if(y){w();break}n.stat(m).then((function(e){e.exists||w()}))}})),c)for(var u in c){var l=r.documentUriToPath(u),d=c[u];a({path:l,fs:n,edits:d})}}},37416:function(e,t,n){n.d(t,{_:function(){return m}});var r,i=n(30266),o=n(92809),a=n(809),s=n.n(a),c=n(40354),u=n(67005),l={textDocument:{synchronization:{dynamicRegistration:!0,didSave:!0},signatureHelp:{dynamicRegistration:!0,signatureInformation:{documentationFormat:["plaintext","markdown"]}},publishDiagnostics:{relatedInformation:!0},formatting:{dynamicRegistration:!0},definition:{dynamicRegistration:!0},typeDefinition:{dynamicRegistration:!0},implementation:{dynamicRegistration:!0},references:{dynamicRegistration:!0},rename:{dynamicRegistration:!0,prepareSupport:!0},completion:{dynamicRegistration:!0,completionItem:{documentationFormat:["plaintext","markdown"]}},codeAction:{dynamicRegistration:!0,codeActionLiteralSupport:{codeActionKind:{valueSet:Object.values(u.CodeActionKind)}}},hover:{dynamicRegistration:!0,contentFormat:["plaintext"]}},workspace:{applyEdit:!0,didChangeConfiguration:{dynamicRegistration:!0},executeCommand:{dynamicRegistration:!0},workspaceEdit:{documentChanges:!0,resourceOperations:[u.ResourceOperationKind.Create,u.ResourceOperationKind.Delete,u.ResourceOperationKind.Rename]}}},d=n(60035),f=n(51595),p=n(62126),g=n(48764).Buffer;function h(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function v(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?h(Object(n),!0).forEach((function(t){(0,o.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):h(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function m(e){var t=e.channel,n=e.isSupportedFile,o=e.languageId,a=(0,c.Z)(),u=null,h=p.aL.OFFLINE,m=null,b={},y={};function w(e){if(!u)throw new Error("Expected rootUri");return e.slice(u.length+1)}function x(e){if(!u)throw new Error("Expected rootUri");if(e.startsWith("/"))throw new Error("Path must be relative. Got: ".concat(e));return u+"/"+e}function k(e){h=e,a.emit(r.SERVER_STATE_CHANGE,h)}function E(e,t){return e.line<t.line||e.line===t.line&&e.character<=t.character}function O(e){var t=JSON.stringify(v(v({},e),{},{jsonrpc:"2.0"})),n=g.byteLength(t,"utf8");return"Content-Length: ".concat(n,"\r\n\r\n").concat(t)}function j(e){t.send({input:O(e)})}function Z(){return Math.floor(Math.random()*(Math.pow(2,31)-1))}function S(e,n){var r=n||Z();if(!Number.isInteger(r))throw new Error("Request ID must be an integer");return t.send({input:O(v(v({},e),{},{id:r}))}),new Promise((function(e){y[r]=e}))}var C=(0,d.J)((function(e){if(e.id&&y[e.id]){var t=y[e.id];delete y[e.id];var n=e.result,i=e.error;if(n)return void t({result:n,cancelled:!1});if(i)return void t({error:i});throw new Error("Expected either message or error in LSP response")}var o=e.method;if("client/registerCapability"===o){var s=e.params.registrations;if(!s||!Array.isArray(s))throw new Error("Expected registrations array");s.forEach((function(e){var t=e.method;if(!t)throw new Error("Expected registration method");if(!m)throw new Error("Expected server capabilities");var n=e.registerOptions||!0;switch(t){case"textDocument/definition":m.definitionProvider=!0;break;case"textDocument/typeDefinition":m.typeDefinitionProvider=!0;break;case"textDocument/implementation":m.implementationProvider=!0;break;case"textDocument/references":m.referencesProvider=!0;break;case"textDocument/hover":m.hoverProvider=!0;break;case"textDocument/completion":m.completionProvider=n;break;case"textDocument/formatting":m.documentFormattingProvider=n;break;case"textDocument/rename":m.renameProvider=n;break;case"textDocument/codeAction":m.codeActionProvider=n;break;case"textDocument/signatureHelp":m.signatureHelpProvider=n;break;case"workspace/executeCommand":m.executeCommandProvider=n;break;default:f.kg.info("Unexpected dynamically registered capability in LSP client",{method:t})}a.emit(r.SERVER_CAPABILITIES_CHANGE,m)}))}if("workspace/applyEdit"===o){var c=v({id:e.id},e.params);a.emit(r.WORKSPACE_EDIT,c)}if("textDocument/publishDiagnostics"===o){var u=w(e.params.uri),l=e.params.diagnostics;b[u].diagnostics=l,a.emit(r.DIAGNOSTICS,{path:u,diagnostics:l})}}));return t.onCommand((function(e){e.output&&C.read(e.output)})),{initialize:function(e){return(0,i.Z)(s().mark((function t(){var n,i;return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.pwd,k(p.aL.INITIALIZING),u="file://".concat(n),t.next=5,S({method:"initialize",params:{capabilities:l,processId:null,rootUri:u,workspaceFolders:[{name:u,uri:u}]}});case 5:if(!("error"in(i=t.sent))){t.next=8;break}throw new Error("Something went wrong initializing the LSP client: ".concat(i.error.message));case 8:if(i.result){t.next=10;break}throw new Error("Expected result in initialize request");case 10:j({method:"initialized",params:{}}),m=i.result.capabilities,a.emit(r.SERVER_CAPABILITIES_CHANGE,m),k(p.aL.INITIALIZED);case 14:case"end":return t.stop()}}),t)})))()},generateId:Z,notify:{didOpen:function(e,t){var r,i;if(!n(e))throw new Error("Path not supported");if(b[e]&&0!==b[e].buffers)b[e].buffers++;else{var a=null!==(r=null===(i=b[e])||void 0===i?void 0:i.version)&&void 0!==r?r:0;b[e]={version:a,buffers:1,diagnostics:[]},j({method:"textDocument/didOpen",params:{textDocument:{uri:x(e),languageId:o,text:t,version:a}}})}},didChange:function(e,t){var n=b[e];if(!n)throw new Error('Document for "'.concat(e,'" is not open'));n.version++,j({method:"textDocument/didChange",params:{textDocument:{uri:x(e),version:n.version,languageId:o},contentChanges:t}})},didSave:function(e){var t=b[e];if(!t)throw new Error('Document for "'.concat(e,'" is not open'));if(!m)throw new Error("Expected client to be initialized");if(!m.textDocumentSync)throw new Error("LSP Server does not support text document sync");j({method:"textDocument/didSave",params:{textDocument:{uri:x(e),version:t.version,languageId:o}}})},didClose:function(e){var t=b[e];if(!t)throw new Error('Document for "'.concat(e,'" is not open'));t.buffers--,t.buffers>0||j({method:"textDocument/didClose",params:{textDocument:{uri:x(e),version:t.version,languageId:o}}})},cancelRequest:function(e){var t=y[e];if(t)return t({result:null,cancelled:!0}),delete y[e],j({method:"$/cancelRequest",params:{id:e}})}},request:{completion:function(e,t,n,r){return S({method:"textDocument/completion",params:{textDocument:{uri:x(e),languageId:o},position:t,context:n}},r)},resolveCompletionItem:function(e,t){return S({method:"completionItem/resolve",params:e},t)},signatureHelp:function(e,t,n){return S({method:"textDocument/signatureHelp",params:{textDocument:{uri:x(e),languageId:o},position:t}},n)},hover:function(e,t,n){return S({method:"textDocument/hover",params:{textDocument:{uri:x(e),languageId:o},position:t}},n)},codeActions:function(e,t,n){if(!b[e])throw new Error("Document is not open");var r=b[e].diagnostics.filter((function(e){return n=e.range,r=t,E(n.start,r.end)&&E(r.start,n.end);var n,r}));return S({method:"textDocument/codeAction",params:{textDocument:{uri:x(e)},range:t,context:{diagnostics:r}}},n)},executeCommand:function(e,t,n){return S({method:"workspace/executeCommand",params:{command:e,arguments:t}},n)},format:function(e,t,n){if(!m)throw new Error("Expected client to be initialized");if(!m.documentFormattingProvider)throw new Error("LSP server does not support formatting");return S({method:"textDocument/formatting",params:{textDocument:{uri:x(e)},options:t}},n)},findDefinitions:function(e,t,n){return(0,i.Z)(s().mark((function r(){var i;return s().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(m){r.next=2;break}throw new Error("Expected client to be initialized");case 2:if(m.definitionProvider){r.next=4;break}throw new Error("LSP server does not support go to definition");case 4:return r.next=6,S({method:"textDocument/definition",params:{textDocument:{uri:x(e),languageId:o},position:t}},n);case 6:if("result"in(i=r.sent)){r.next=9;break}return r.abrupt("return",i);case 9:if(!i.result||Array.isArray(i.result)){r.next=11;break}return r.abrupt("return",{result:[i.result],cancelled:!1});case 11:return r.abrupt("return",i);case 12:case"end":return r.stop()}}),r)})))()},findTypeDefinitions:function(e,t,n){return(0,i.Z)(s().mark((function r(){var i;return s().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(m){r.next=2;break}throw new Error("Expected client to be initialized");case 2:if(m.typeDefinitionProvider){r.next=4;break}throw new Error("LSP server does not support go to type definition");case 4:return r.next=6,S({method:"textDocument/typeDefinition",params:{textDocument:{uri:x(e),languageId:o},position:t}},n);case 6:if("result"in(i=r.sent)){r.next=9;break}return r.abrupt("return",i);case 9:if(!i.result||Array.isArray(i.result)){r.next=11;break}return r.abrupt("return",{result:[i.result],cancelled:!1});case 11:return r.abrupt("return",i);case 12:case"end":return r.stop()}}),r)})))()},findImplementations:function(e,t,n){return(0,i.Z)(s().mark((function r(){var i;return s().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(m){r.next=2;break}throw new Error("Expected client to be initialized");case 2:if(m.implementationProvider){r.next=4;break}throw new Error("LSP server does not support go to implementation");case 4:return r.next=6,S({method:"textDocument/implementation",params:{textDocument:{uri:x(e),languageId:o},position:t}},n);case 6:if("result"in(i=r.sent)){r.next=9;break}return r.abrupt("return",i);case 9:if(!i.result||Array.isArray(i.result)){r.next=11;break}return r.abrupt("return",{result:[i.result],cancelled:!1});case 11:return r.abrupt("return",i);case 12:case"end":return r.stop()}}),r)})))()},findReferences:function(e,t,n,r){if(!m)throw new Error("Expected client to be initialized");if(!m.referencesProvider)throw new Error("LSP server does not support find references");return S({method:"textDocument/references",params:{textDocument:{uri:x(e),languageId:o},position:t,context:n}},r)},rename:function(e,t,n,r){if(!m)throw new Error("Expected client to be initialized");if(!m.renameProvider)throw new Error("LSP server does not support renaming");return S({method:"textDocument/rename",params:{textDocument:{uri:x(e),languageId:o},position:t,newName:n}},r)},prepareRename:function(e,t,n){if(!m)throw new Error("Expected client to be initialized");if(!m.renameProvider||"boolean"===typeof m.renameProvider||!m.renameProvider.prepareProvider)throw new Error("LSP server does not support prepare rename");return S({method:"textDocument/prepareRename",params:{textDocument:{uri:x(e),languageId:o},position:t}},n)}},onDiagnostics:function(e){return a.on(r.DIAGNOSTICS,e),function(){a.removeListener(r.DIAGNOSTICS,e)}},onWorkspaceEdit:function(e){function n(n){var r=e(n);!function(e,n){t.send({input:O({id:e,result:n})})}(n.id,r)}return a.on(r.WORKSPACE_EDIT,n),function(){a.removeListener(r.WORKSPACE_EDIT,n)}},onServerStateChange:function(e){return a.on(r.SERVER_STATE_CHANGE,e),function(){a.removeListener(r.SERVER_STATE_CHANGE,e)}},onServerCapabilitiesChange:function(e){return a.on(r.SERVER_CAPABILITIES_CHANGE,e),function(){a.removeListener(r.SERVER_CAPABILITIES_CHANGE,e)}},shutdown:function(){for(var e in k(p.aL.EXITING),b)delete b[e];S({method:"shutdown"}).then((function(){j({method:"exit"}),k(p.aL.EXITED),a.removeAllListeners()}))},destroy:function(){for(var e in b)delete b[e];k(p.aL.EXITED),a.removeAllListeners()},getServerState:function(){return h},getServerCapabilities:function(){return m},getDiagnostics:function(e){if(!b[e])throw new Error("File with path ".concat(e," is not open."));return b[e].diagnostics},documentUriToPath:w,pathToDocumentURI:x,isSupportedFile:n}}!function(e){e.INITIALIZED="INITIALIZED",e.DIAGNOSTICS="DIAGNOSTICS",e.WORKSPACE_EDIT="WORKSPACE_EDIT",e.SERVER_STATE_CHANGE="SERVER_STATE_CHANGE",e.SERVER_CAPABILITIES_CHANGE="SERVER_CAPABILITIES_CHANGE"}(r||(r={}))},20881:function(e,t,n){function r(e){var t=e.getServerCapabilities();return{isAutoCompleteSupported:Boolean((null===t||void 0===t?void 0:t.completionProvider)||(null===t||void 0===t?void 0:t.signatureHelpProvider)),isFindReferencesSupported:Boolean(null===t||void 0===t?void 0:t.referencesProvider),isFindDefinitionSupported:Boolean(null===t||void 0===t?void 0:t.definitionProvider),isFindTypeDefinitionSupported:Boolean(null===t||void 0===t?void 0:t.typeDefinitionProvider),isFindImplementationSupported:Boolean(null===t||void 0===t?void 0:t.implementationProvider),isHoverSupported:Boolean(null===t||void 0===t?void 0:t.hoverProvider),isRenameSupported:Boolean(null===t||void 0===t?void 0:t.renameProvider),isCodeActionsSupported:Boolean(null===t||void 0===t?void 0:t.codeActionProvider)}}n.d(t,{Z:function(){return r}})},31386:function(e,t,n){n.d(t,{g:function(){return d}});var r=n(40354),i=n(62126),o=n(7977),a=n.n(o),s=n(37416),c=n(26470),u=function(e){switch((0,c.extname)(e).slice(1)){case"php":return"php";case"re":return"reason";case"erl":return"erlang";case"c":return"c";case"go":return"go";case"java":return"java";case"cpp":return"cpp";case"rb":return"ruby";case"py":return"python";case"js":case"sx":case"es6":return"replit-js";case"ts":case"tsx":return"replit-ts";default:return null}},l=n(50055);function d(e){var t=e.container,n=(0,r.Z)(),o=null,c=!1,d=0,f=null;function p(e){o!==e&&(o=e,n.emit(i.zW.ON_CLIENT,o))}var g=function(){p(null)},h=!1,v={start:function(){h||(h=!0,g=t.openChannel({service:"lsp",skip:function(e){if(e.repl.language.startsWith("nix"))return!0;var t=a().get(e.repl.language).entrypoint;return!u(t)||!a().supportsLSP(e.repl.language)}},(function(e){if(!e.error){var r=!1,o=function(){},g=a().get(e.context.repl.language).entrypoint,h=u(g);if(!h)throw new Error("Expected languageId");var m=(0,s._)({channel:e.channel,languageId:h,isSupportedFile:function(e){var t=u(e);return t===h||("replit-ts"===h&&"replit-js"===t||"replit-js"===h&&"replit-ts"===t)}});t.exec("pwd").then((function(e){if(!r){var t=e.output?e.output.replace(/\n/,""):null;if(!t)throw new Error("Expected pwd");if(!m)throw new Error("Expected client");m.initialize({pwd:t}),o=m.onServerStateChange((function(e){r||e===i.aL.INITIALIZED&&p(m)}))}}));var b=e.channel.onCommand((function(e){e.output||e.state===l.api.State.Stopped&&(d++,v.stop(),f=setTimeout((function(){return v.start()}),1e3*Math.pow(2,d)))}));return function(e){var t=e.willReconnect;m&&(m.destroy(),p(null)),r=!0,o(),b(),c?c=!1:t||n.emit(i.zW.DISCONNECT)}}})))},getClient:function(){return o},onClient:function(e){return n.on(i.zW.ON_CLIENT,e),function(){n.removeListener(i.zW.ON_CLIENT,e)}},stop:function(){if(c=!0,h=!1,null!==f&&clearTimeout(f),o){var e=o.onServerStateChange((function(t){t===i.aL.EXITED&&(e(),g())}));return o.destroy(),void p(null)}g()},onUnexpectedDisconnect:function(e){return n.on(i.zW.DISCONNECT,e),function(){n.removeListener(i.zW.DISCONNECT,e)}}};return v}},60035:function(e,t,n){n.d(t,{J:function(){return o}});var r=n(71371),i=n(79081);function o(e){var t=new i.Z,n=-1;return{read:function(i){for(t.append(i);;){if(-1===n){var o=t.tryReadHeaders();if(!o)return;var a=o["Content-Length"];if(!a)return r.Tb(new Error("Header must provide a Content-Length property.")),!1;var s=parseInt(a,10);if(isNaN(s))return r.Tb(new Error("Content-Length value must be a number.")),!1;n=s}var c=t.tryReadContent(n);if(null===c)return;n=-1;try{var u=JSON.parse(c);e(u)}catch(l){r.Tb(l)}}}}}},8686:function(e,t,n){n.d(t,{Z:function(){return u}});var r=n(79056),i=n(60172),o=n(25400);function a(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"===typeof e)return s(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return s(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,c=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){c=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(c)throw o}}}}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function c(e,t){var n=Math.max(t.line+1,1),r=e.line(Math.min(n,e.lines));if(n>e.lines)return r.to;var i=r.from+t.character;return Math.min(i,r.to)}function u(e,t){var n=[];if(!e.length)return n;var s=i.xv.of(t.split("\n"));if(1===e.length){var u=(0,r.Z)(e,1)[0],l=u.range,d=l.start,f=l.end,p=u.newText;if(0===c(s,d))if(c(s,f)===s.length)return(0,o.sQ)(t,p)}var g,h=a(e);try{for(h.s();!(g=h.n()).done;){var v=g.value,m=v.range,b=v.newText,y=[],w=c(s,m.start);w>0&&y.push(w);var x=c(s,m.end);x>w&&y.push({d:x-w}),b.length>0&&y.push(b),n=(0,o.qC)(n,(0,o.vs)(y,n,"right"))}}catch(k){h.e(k)}finally{h.f()}return n}},62126:function(e,t,n){var r,i,o,a;n.d(t,{zW:function(){return r},Ij:function(){return i},ex:function(){return o},aL:function(){return a}}),function(e){e.DISCONNECT="DISCONNECT",e.ON_CLIENT="ON_CLIENT"}(r||(r={})),function(e){e[e.Invoked=1]="Invoked",e[e.TriggerCharacter=2]="TriggerCharacter",e[e.TriggerForIncompleteCompletions=3]="TriggerForIncompleteCompletions"}(i||(i={})),function(e){e[e.None=0]="None",e[e.Full=1]="Full",e[e.Incremental=2]="Incremental"}(o||(o={})),function(e){e.OFFLINE="OFFLINE",e.INITIALIZING="INITIALIZING",e.INITIALIZED="INITIALIZED",e.EXITING="EXITING",e.EXITED="EXITED"}(a||(a={}))},90470:function(e,t,n){n.d(t,{Z:function(){return s}});var r=n(79056),i=n(67294),o=n(10257),a=n(53291);function s(e){var t=(0,a.Z)(),n=(0,o.Z)(),s=n.lsp,c=n.lspnix,u=i.useState(null),l=(0,r.Z)(u,2),d=l[0],f=l[1];return i.useEffect((function(){var n;if(null!==t&&void 0!==t&&t.language)return t.language.startsWith("nix")?n=c.onClient(e,f):(s.getClient()&&f(s.getClient()),n=s.onClient(f)),function(){n(),f(null)}}),[s,c,e,null===t||void 0===t?void 0:t.language]),d}},50025:function(e,t,n){n.d(t,{Z:function(){return o}});var r=n(79056),i=n(67294);function o(e){var t=e.presence,n=i.useState(t.getActiveUsers()),o=(0,r.Z)(n,2),a=o[0],s=o[1];return i.useEffect((function(){return s(t.getActiveUsers()),t.onActiveUsersChange((function(e){return s(e)}))}),[t]),a}},68563:function(e,t,n){n.d(t,{Z:function(){return a}});var r=n(79056),i=n(67294),o=n(10257);function a(){var e=(0,o.Z)().presence,t=i.useState(e.getFollowedUser()),n=(0,r.Z)(t,2),a=n[0],s=n[1];return i.useEffect((function(){return s(e.getFollowedUser()),e.onFollowedUserChanged(s)}),[e]),a}},63258:function(e,t,n){var r;n.d(t,{z:function(){return r},u:function(){return i}}),function(e){e.COMMAND_BAR_TOGGLED="COMMAND_BAR_TOGGLED",e.DEEPLINK_CHANGED="DEEPLINK_CHANGED",e.SESSION_STATE_CHANGED="SESSION_STATE_CHANGED",e.PREVIEWED_FILE_CHANGED="PREVIEWED_FILE_CHANGED",e.FOLLOWING_USERS_CHANGED="FOLLOWING_USERS_CHANGED",e.CURSOR_POSITION_CHANGED="CURSOR_POSITION_CHANGED",e.PREVIEWED_YOUTUBE_VIDEO_CHANGED="PREVIEWED_YOUTUBE_VIDEO_CHANGED",e.CONFIG_FILE_VISIBILITY_TOGGLED="CONFIG_FILE_VISIBILITY_TOGGLED",e.RESOURCE_MONITORING_STATE_CHANGED="RESOURCE_MONITORING_STATE_CHANGED"}(r||(r={}));var i=2e3},68047:function(e,t,n){n.d(t,{Z:function(){return i}});var r=n(54619);function i(){var e=(0,r.Z)(),t=e.openFiles,n=e.activeTab;return t[n]?t[n]:null}},54619:function(e,t,n){n.d(t,{Z:function(){return a}});var r=n(79056),i=n(67294),o=n(10257);function a(){var e=(0,o.Z)().session,t=i.useState(e.getState()),n=(0,r.Z)(t,2),a=n[0],s=n[1];return i.useEffect((function(){return s(e.getState()),e.onSessionStateChanged(s)}),[e]),a}},32523:function(e,t,n){n.d(t,{X:function(){return o},z:function(){return a}});var r=n(67294),i=r.createContext(null);function o(){return r.useContext(i)}var a=i.Provider},39084:function(e,t,n){n.d(t,{rk:function(){return I},xW:function(){return U},e$:function(){return T}});var r=n(92809),i=n(79056),o=n(45187),a=n(67294),s=n(32523),c=n(93096),u=n.n(c),l=n(73935),d=n(70917),f=n(61909),p=n(82457),g=n(2876),h=n(35944);function v(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function m(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?v(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):v(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function b(e){var t=e.targetElement,n=(0,a.useState)(null),r=n[0],i=n[1],o=(0,f.Z)((function(){t&&i({rect:t.getBoundingClientRect(),docWidth:document.documentElement.clientWidth,docHeight:document.documentElement.clientHeight})}),{type:"throttle",wait:100});if((0,a.useEffect)((function(){t&&o(t)}),[t,o]),(0,a.useEffect)((function(){if(t){var e=u()((function(){i({rect:t.getBoundingClientRect(),docWidth:document.documentElement.clientWidth,docHeight:document.documentElement.clientHeight})}),100);return window.addEventListener("resize",e),window.addEventListener("scroll",e),function(){window.removeEventListener("resize",e),window.removeEventListener("scroll",e)}}}),[t]),!r||!t)return null;var s=(0,d.iv)({backgroundColor:p.TV.backgroundOverlay,zIndex:g.n+1,position:"fixed",transition:"all 0.5s ease-out"},"","");return(0,l.createPortal)((0,h.BX)(h.HY,{children:[(0,h.tZ)("div",{css:[y(m({side:"left-top"},r)),s,"",""]}),(0,h.tZ)("div",{css:[y(m({side:"top-right"},r)),s,"",""]}),(0,h.tZ)("div",{css:[y(m({side:"right-bottom"},r)),s,"",""]}),(0,h.tZ)("div",{css:[y(m({side:"bottom-left"},r)),s,"",""]})]}),document.body)}function y(e){var t=e.side,n=e.rect,r=e.docWidth,i=e.docHeight;switch(t){case"left-top":return(0,d.iv)({top:0,left:0,width:Math.max(0,n.left),height:Math.max(0,n.bottom)},"","");case"top-right":return(0,d.iv)({top:0,right:0,width:"calc(".concat(r,"px - ").concat(Math.max(0,n.left),"px)"),height:Math.max(0,n.top)},"","");case"right-bottom":return(0,d.iv)({bottom:0,right:0,width:"calc(".concat(r,"px - ").concat(Math.max(0,n.right),"px)"),height:"calc(".concat(i,"px - ").concat(Math.max(0,n.top),"px)")},"","");case"bottom-left":return(0,d.iv)({bottom:0,left:0,width:Math.max(0,n.right),height:"calc(".concat(i,"px - ").concat(Math.max(0,n.bottom),"px)")},"","")}}var w=n(21932),x=n(21757),k=n(77294),E=n(94573);function O(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function j(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?O(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):O(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Z(e){var t=e.targetElement,n=e.activeStep,r=e.goto,i=e.currentStepIndex,o=e.totalSteps,s=e.done,c=e.disableAnimation,u=(0,a.useState)(null),p=u[0],v=u[1],m=(0,a.useState)(null),b=m[0],y=m[1],O=(0,k.D)(t,p,{placement:"auto-start",modifiers:[{name:"arrow",options:{element:b,padding:8}},{name:"offset",options:{offset:[20,16]}},{name:"computeStyles",options:{adaptive:!1}}]}),Z=(0,f.Z)((function(){var e;null===(e=O.update)||void 0===e||e.call(O)}),{type:"throttle",wait:100});return(0,a.useEffect)((function(){Z(t)}),[t,Z]),(0,l.createPortal)((0,h.BX)("div",j(j({ref:v,style:O.styles.popper,css:(0,d.iv)({transition:c?"all":"all 0.5s ease-out",zIndex:g.n+2,width:320},"","")},O.attributes.popper),{},{children:[(0,h.tZ)(x.Z,{title:n.title,content:n.content,onDismiss:function(){s()},currentStepIndex:i,onCurrentStepChange:r,totalSteps:o}),(0,h.tZ)("span",{style:O.styles.arrow,css:[w.wk,{"&::after":{backgroundColor:E.Br.primary.dimmest,border:"1px solid "+E.Br.primary.dimmer}},"",""],ref:y})]})),document.body)}function S(){var e=(0,s.X)();if(!e)return null;var t=e.activeStep,n=e.goto,r=e.steps,i=e.done;return(0,h.tZ)(g.Z,{preventClose:!0,isOpen:Boolean(t.isModal),onRequestClose:function(){},centered:!0,maxWidth:"fit-content",noPadding:!0,children:(0,h.tZ)(x.Z,{title:t.title,content:t.content,onDismiss:function(){i()},currentStepIndex:r.findIndex((function(e){return t.id===e.id})),onCurrentStepChange:n,totalSteps:r.length})})}var C=n(25108);function P(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function D(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?P(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):P(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function I(e){var t,n=e.children,c=e.tour,u=e.isDoneInitialOverride,l=e.onStep,d=e.onDone,f=(0,a.useState)(c.steps[0]),p=f[0],g=f[1],v=(0,a.useState)({}),m=v[0],y=v[1],w=function(e,t){var n,r=(0,o.PpL)({variables:{tours:e}}),s=r.data,c=r.loading,u=(0,o.oep)({variables:{name:e},optimisticResponse:{markTourAsSeen:{__typename:"TourSeen",id:e,seen:!0}}}),l=(0,i.Z)(u,1)[0],d=(0,a.useState)(t),f=d[0],p=d[1],g=Boolean(null===s||void 0===s||null===(n=s.currentUser)||void 0===n?void 0:n.toursSeen[0].seen);return"boolean"===typeof f&&(g=f),{isLoading:c,isDone:g,setIsDone:function(e){p(e),e&&l()}}}(c.id,u),x=w.isDone,k=w.isLoading,E=w.setIsDone,O=c.steps.findIndex((function(e){return p.id===e.id}));if(-1===O)throw new Error("Current tour step is not in tour steps");function j(){E(!0),null===d||void 0===d||d(p.id)}var P=(0,a.useRef)();function I(e){P.current=p,null===l||void 0===l||l(e.id),g(e)}function T(e){var t;if("number"===typeof e)t=e;else{var n=e;t=c.steps.findIndex((function(e){return n===e.id}))}if(!(t<0||t>=c.steps.length)){for(var r=c.steps[t],i=t<O;!m[r.id]&&r.autoSkipIfNoTarget;){if((t=i?t-1:t+1)<0||t>=c.steps.length)return;r=c.steps[t]}I(r)}}function _(){T(0),E(!1)}var A=(0,a.useCallback)((function(e,t){var n=c.steps.findIndex((function(t){return e===t.id}));if(-1===n)throw new Error("Invalid step id");if(c.steps[n].isModal)throw new Error("Trying to set a target element for a modal step");y((function(n){return n[e]===t?n:D(D({},n),{},(0,r.Z)({},e,t))}))}),[c]),R=m[p.id],N=!x&&!k;window.startTour=function(){C.log("starting tour:",c.id,"from",c.steps[0].id),_()};var U=c.steps.filter((function(e){return!e.autoSkipIfNoTarget||Boolean(m[e.id])})),L=U.findIndex((function(e){return p.id===e.id}));return(0,h.BX)(s.z,{value:D(D({},c),{},{setStepTargetElement:A,activeStep:p,next:function(){var e=c.steps[O+1];if(e&&e.autoSkipIfNoTarget)for(var t=O+1;e&&e.autoSkipIfNoTarget&&!m[e.id];)t++,e=c.steps[t];e?I(e):j()},prev:function(){var e=c.steps[O-1];if(e&&e.autoSkipIfNoTarget)for(var t=O-1;e&&e.autoSkipIfNoTarget&&!m[e.id];)t--,e=c.steps[t];e&&I(e)},goto:T,isDone:x,isLoading:k,done:j,restart:_}),children:[N&&p.isModal?(0,h.tZ)(S,{}):null,N&&R?(0,h.BX)(h.HY,{children:[(0,h.tZ)(b,{targetElement:R}),(0,h.tZ)(Z,{targetElement:R,activeStep:p,currentStepIndex:L,done:j,goto:function(e){T(e+O-L)},totalSteps:U.length,disableAnimation:Boolean(0===O||(null===(t=P.current)||void 0===t?void 0:t.isModal))})]}):null,n]})}function T(e){var t=(0,s.X)(),n=(0,a.useCallback)((function(n){null===t||void 0===t||t.setStepTargetElement(e,n)}),[e,null===t||void 0===t?void 0:t.setStepTargetElement]);return t&&t.steps.some((function(t){return t.id===e}))?{delegateTooltip:n,isActive:!t.isLoading&&!t.isDone&&t.activeStep.id===e,activeStep:t.activeStep,done:t.done,goto:t.goto,id:t.id,isDone:t.isDone,isLoading:t.isLoading,next:t.next,prev:t.prev,restart:t.restart,steps:t.steps}:null}var _=n(59864),A=(0,n(49512).K)("span");function R(e){return 1===a.Children.count(e)&&!_.isFragment(e)&&_.isElement(e)&&("string"===typeof e.type||_.isForwardRef(e))}var N=function(){};function U(e){var t=e.stepId,n=e.children,r=T(t),i=r?r.delegateTooltip:N,o=(0,a.useCallback)((function(e){if(i(e),R(n)){var t=a.Children.only(n),r=t.ref||t.props.ref;r&&("function"===typeof r?r(e):"object"===typeof r&&"current"in r&&(r.current=e))}}),[i,n]);if(!n||0===a.Children.count(n))return(0,h.tZ)(h.HY,{children:n});if(!r)return(0,h.tZ)(h.HY,{children:n});if(R(n)){var s=a.Children.only(n);return(0,a.cloneElement)(s,{ref:o})}return(0,h.tZ)(A,{ref:o,children:n})}},14256:function(e,t){t.Z={brand:{darkBlue:"#0D101E",lightBlue:"#68CDEE",gray:"#6D7D84"},main:{green:{dark:"#0A6640",default:"#0F9960",light:"#3DCC91",25:"rgba(15,153,96,0.25)",15:"rgba(15,153,96,0.15)"},red:{dark:"#A82A2A",default:"#DB3737",light:"#FF7373",25:"rgba(219, 55, 55, 0.25)",15:"rgba(219, 55, 55, 0.15)"},blue:{dark:"#0068AD",default:"#0097FB",light:"#73C4FA",25:"rgba(0, 151, 251, 0.25)",15:"rgba(0, 151, 251, 0.15)"},orange:{dark:"#A14809",default:"#E16D1A",light:"#FC9C58",25:"rgba(225, 109, 26, 0.25)",15:"rgba(225, 109, 26, 0.15)"},purple:{dark:"#6213B1",default:"#9D43F7",light:"#BF80FF",25:"rgba(98, 19, 177, 0.25)",15:"rgba(98, 19, 177, 0.15)"},gold:{dark:"#A67908",default:"#D99E0B",light:"#FFC940",25:"rgba(217, 158, 11, 0.25)",15:"rgba(217, 158, 11, 0.15)"}},neutrals:{black:"#21242C",white:"#FFFFFF",offWhite:"#F7F8FA",black64:"rgba(33, 36, 44, 0.64)",black50:"rgba(33, 36, 44, 0.50)",black16:"rgba(33, 36, 44, 0.16)",black8:"rgba(33, 36, 44, 0.08)",white64:"rgba(255, 255, 255, 0.64)",white50:"rgba(255, 255, 255, 0.50)",white16:"rgba(255, 255, 255, 0.16)",white8:"rgba(255, 255, 255, 0.08)"},multiplayer:{green:"#1BC47D",red:"#EF5533",blue:"#18A0FB",gold:"#FFC700",purple:"#907CFF",teal:"#00B5CE",pink:"#EE46D3"},languages:{java:"#b07219",scheme:"#1e4aec",clojure:"#db5855",haskell:"#5e5086",lua:"#000080",ruby:"#701516",python:"#3572A5",go:"#00ADD8",cpp:"#f34b7d",c:"#555555","c#":"#178600","f#":"#b845fc",rust:"#dea584",swift:"#ffac45",r:"#198CE7",bash:"#000000",crystal:"#000100",julia:"#a270ba",elixir:"#6e4a7e",nim:"#37775b",dart:"#00B4AB",erlang:"#B83998",typescript:"#2b7489",elisp:"#c065db",sql:"#e34c26",php:"#4F5D95",html:"#e34c26",css:"#563d7c",javascript:"#f1e05a"}}},97888:function(e,t,n){n.d(t,{Z:function(){return c}});var r=n(92809),i=(n(67294),n(96622)),o=n(35944);function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function c(e){return(0,o.tZ)(i.Z,s(s({},e),{},{children:(0,o.tZ)("path",{d:"M15 18L9 12L15 6",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})}))}},16289:function(e,t,n){n.d(t,{Z:function(){return c}});var r=n(92809),i=(n(67294),n(96622)),o=n(35944);function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function c(e){return(0,o.tZ)(i.Z,s(s({},e),{},{children:(0,o.tZ)("path",{d:"M12 7V12.3333L16 15M22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12Z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})}))}},74834:function(e,t,n){n.d(t,{Z:function(){return c}});var r=n(92809),i=(n(67294),n(96622)),o=n(35944);function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function c(e){return(0,o.BX)(i.Z,s(s({strokeWidth:3},e),{},{children:[(0,o.tZ)("path",{d:"M9.9 4.24002C10.5883 4.0789 11.2931 3.99836 12 4.00003C19 4.00003 23 12 23 12C22.393 13.1356 21.6691 14.2048 20.84 15.19M14.12 14.12C13.8454 14.4148 13.5141 14.6512 13.1462 14.8151C12.7782 14.9791 12.3809 15.0673 11.9781 15.0744C11.5753 15.0815 11.1752 15.0074 10.8016 14.8565C10.4281 14.7056 10.0887 14.4811 9.80385 14.1962C9.51897 13.9113 9.29439 13.572 9.14351 13.1984C8.99262 12.8249 8.91853 12.4247 8.92563 12.0219C8.93274 11.6191 9.02091 11.2219 9.18488 10.8539C9.34884 10.4859 9.58525 10.1547 9.88 9.88003M17.94 17.94C16.2306 19.243 14.1491 19.9649 12 20C5 20 1 12 1 12C2.24389 9.68192 3.96914 7.65663 6.06 6.06003L17.94 17.94Z",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),(0,o.tZ)("path",{d:"M1 1L23 23",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})]}))}},6552:function(e,t,n){n.d(t,{Z:function(){return c}});var r=n(92809),i=(n(67294),n(96622)),o=n(35944);function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function c(e){return(0,o.BX)(i.Z,s(s({strokeWidth:3},e),{},{children:[(0,o.tZ)("path",{d:"M1 12C1 12 5 4 12 4C19 4 23 12 23 12C23 12 19 20 12 20C5 20 1 12 1 12Z",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),(0,o.tZ)("path",{d:"M12 15C13.6569 15 15 13.6569 15 12C15 10.3431 13.6569 9 12 9C10.3431 9 9 10.3431 9 12C9 13.6569 10.3431 15 12 15Z",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})]}))}},55994:function(e,t,n){n.d(t,{Z:function(){return c}});var r=n(92809),i=(n(67294),n(96622)),o=n(35944);function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function c(e){return(0,o.tZ)(i.Z,s(s({},e),{},{children:(0,o.tZ)("path",{d:"M14 2H6C5.46957 2 4.96086 2.21071 4.58579 2.58579C4.21071 2.96086 4 3.46957 4 4V20C4 20.5304 4.21071 21.0391 4.58579 21.4142C4.96086 21.7893 5.46957 22 6 22H18C18.5304 22 19.0391 21.7893 19.4142 21.4142C19.7893 21.0391 20 20.5304 20 20V8M14 2L20 8M14 2V8H20M12 18V12M9 15H15",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})}))}},90101:function(e,t,n){n.d(t,{Z:function(){return c}});var r=n(92809),i=(n(67294),n(96622)),o=n(35944);function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function c(e){return(0,o.tZ)(i.Z,s(s({},e),{},{children:(0,o.tZ)("path",{d:"M12 11V17M9 14H15M22 19C22 19.5304 21.7893 20.0391 21.4142 20.4142C21.0391 20.7893 20.5304 21 20 21H4C3.46957 21 2.96086 20.7893 2.58579 20.4142C2.21071 20.0391 2 19.5304 2 19V5C2 4.46957 2.21071 3.96086 2.58579 3.58579C2.96086 3.21071 3.46957 3 4 3H9L11 6H20C20.5304 6 21.0391 6.21071 21.4142 6.58579C21.7893 6.96086 22 7.46957 22 8V19Z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})}))}},46379:function(e,t,n){n.d(t,{Z:function(){return c}});var r=n(92809),i=(n(67294),n(96622)),o=n(35944);function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function c(e){return(0,o.tZ)(i.Z,s(s({},e),{},{children:(0,o.tZ)("path",{d:"M22.9999 4.00001V10M22.9999 10H16.9999M22.9999 10L18.3699 5.64001C16.9905 4.25975 15.1999 3.3652 13.2678 3.09116C11.3358 2.81711 9.36705 3.17843 7.65823 4.12065C5.94942 5.06288 4.59313 6.53496 3.79374 8.31508C2.99436 10.0952 2.79519 12.0869 3.22625 13.9901C3.6573 15.8932 4.69524 17.6047 6.18363 18.8667C7.67203 20.1286 9.53026 20.8726 11.4783 20.9866C13.4263 21.1006 15.3586 20.5783 16.984 19.4985C18.6094 18.4187 19.8399 16.8399 20.4899 15",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})}))}},34897:function(e,t,n){var r=n(67294).createContext(null);t.Z=r},56568:function(e,t,n){n.d(t,{Z:function(){return he}});var r=n(91077),i=n(30268),o=n(92953),a=n(92809),s=n(68216),c=n(25997),u=n(67294),l=n(71371);var d=function(e,t,n,r){return function(i){return function(o){return function(a){o(a);var s=i.getState();if(s)for(var c=s.plugins,u=Object.keys(c),l=function(){var o=f[d];if(a.pud&&a.pud!==o)return"continue";var c=s.plugins[o];if(c.broken)return"continue";var u=c.type,l=n[u];if(l)try{var p=l(t,o,a);if(p){var g=e(o).dispatch(p);g&&"object"===typeof g&&"function"===typeof g.catch&&g.catch((function(e){i.dispatch({type:"PLUGIN_BROKE",pud:o,message:e.toString()}),r({error:e,pluginType:u,source:"receiver",pud:o})}))}}catch(h){i.dispatch({type:"PLUGIN_BROKE",pud:o,message:h.toString()}),r({error:h,pluginType:u,source:"receiver",pud:o})}},d=0,f=u;d<f.length;d++)l()}}}},f=n(97131),p=n(17120);function g(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function h(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?g(Object(n),!0).forEach((function(t){(0,a.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):g(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var v=function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];if(0===n.length)return t;var r=(0,p.Z)(n),i=r[0],o=r.slice(1);return e(t[i],o)},m=function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=arguments.length>2?arguments[2]:void 0;if(0===n.length)return r;var i=(0,p.Z)(n),o=i[0],s=i.slice(1);return Array.isArray(t)?(t[o]=e(t[o],s,r),t):h(h({},t),{},(0,a.Z)({},o,e(t[o],s,r)))};var b=function(e,t,n){function r(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=arguments.length>1?arguments[1]:void 0;for(var o in r)if(!i.pud||i.pud===o){var s=r[o];if(!s.broken){var c=t[s.type];if(c)if("PLUGIN_BROKE"!==i.type){var u=void 0;try{u=c(s.state,h(h({},i),{},{wid:e}))}catch(l){r=h(h({},r),{},(0,a.Z)({},o,h(h({},s),{},{broken:!0,errorMessage:l.toString()}))),n({error:l,pluginType:s.type,source:"reducer",pud:o});continue}u!==s.state&&(r=h(h({},r),{},(0,a.Z)({},o,h(h({},s),{},{state:u}))))}else r=h(h({},r),{},(0,a.Z)({},o,h(h({},s),{},{broken:!0,errorMessage:i.message})))}}return r}function i(e,t){switch(t.type){case"UPDATE_LAYOUT":return h(h({},e),m(e,t.path.concat(t.property||[]),t.to));case"SET_ACTIVE_TAB":return h(h({},e),m(e,t.path.concat("active"),t.tabIndex));case"SET_SPLIT_POSITION":return h(h({},e),m(e,t.path.concat("position"),t.position));case"NEW_TAB":if("tabs"!==v(e,t.path.concat("type"))){var r=new Error("trying to add tab to non tab component");return n({error:r,pluginType:"layout",pud:null,source:"reducer"}),e}var i=h(h({},e),m(e,t.path.concat("tabs"),[].concat((0,f.Z)(v(e,t.path.concat("tabs"))),[t.layout])));if(!t.setActiveTab)return i;var o=v(i,t.path.concat("tabs")).findIndex((function(e){return e.pud===t.layout.pud}));return h(h({},i),m(i,t.path.concat("active"),o));case"CLOSE_TAB":var s=v(e,t.path.concat("tabs")),c=t.tabIndex||s.findIndex((function(e){return e.pud===t.tabPud}));if(!s[c]){var u=new Error("trying to remove nonexistent tab");return n({error:u,pluginType:"layout",pud:null,source:"reducer"}),e}var l=v(e,t.path.concat("active")),d=l===c?Math.max(l-1,0):l,p=h(h({},e),m(e,t.path.concat("active"),d));return h(h({},p),m(p,t.path.concat("tabs"),(0,f.Z)(s.slice(0,c).concat(s.slice(c+1)))));case"LOAD_PLUGIN":return h(h({},e),{},{pluginTitles:h(h({},e.pluginTitles),{},(0,a.Z)({},t.pluginPud,t.title))});default:return e}}function o(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{plugins:{},layout:{}},n=arguments.length>1?arguments[1]:void 0,o=r(e.plugins,n);o!==e.plugins&&(e=h(h({},e),{},{plugins:o}));var s=i(e.layout,n);switch(s!==e.layout&&(e=h(h({},e),{},{layout:s})),n.type){case"OPEN_FILE":return h(h({},e),{},{activeFile:n.path});case"MOVE_FILE":return e.activeFile===n.path?h(h({},e),{},{activeFile:n.to}):e;case"LOAD_PLUGIN":var c=t[n.pluginType];c||(c=function(e,t){});var u=n.initialState||{},l=c(void 0,{type:"@@INIT",initialState:u});return h(h({},e),{},{plugins:h(h({},e.plugins),{},(0,a.Z)({},n.pluginPud,{type:n.pluginType,state:l,isClosable:n.isClosable,isDraggable:n.isDraggable}))});case"UNLOAD_PLUGIN":return h(h({},e),{},{plugins:Object.keys(e.plugins).reduce((function(t,r){return r!==n.pud?h(h({},t),{},(0,a.Z)({},r,e.plugins[r])):t}),{})});default:return e}}return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_WORKSPACE":return t.state;case"CREATE_WORKSPACE":return{layout:t.layout,plugins:r(void 0,t),activeFile:t.activeFile};default:return o(e,t)}}},y=n(79056),w=n(82100),x=n(28955),k=n(85893),E=function(e){var t={strokeMiterlimit:10,fill:"none",stroke:e.color,strokeWidth:1};return(0,k.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",children:(0,k.jsxs)("g",{children:[(0,k.jsx)("line",{style:t,x1:"3",y1:"3",x2:"13",y2:"13"}),(0,k.jsx)("line",{style:t,x1:"13",y1:"3",x2:"3",y2:"13"})]})})};function O(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function j(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?O(Object(n),!0).forEach((function(t){(0,a.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):O(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Z=function(e){var t=e.onClick,n=e.onMouseDown,r=e.Icon,i=e.color,o=e.style;return(0,k.jsx)("button",{onClick:t,onMouseDown:n,style:j({color:"var(--foreground-default)",backgroundColor:"transparent",border:"none",cursor:"pointer",margin:"0",outline:"none",padding:"0"},o),children:(0,k.jsx)(r,{color:i})})},S=function(e){var t=e.color;return(0,k.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 8.467 10.583",children:(0,k.jsx)("path",{d:"M4.233.684L2.988 1.93l.374.374.607-.607V3.97H1.697l.607-.607-.374-.374L.684 4.233 1.93 5.48l.374-.374-.607-.607H3.97V6.77l-.607-.607-.374.374 1.245 1.245L5.48 6.537l-.374-.374-.607.607V4.498H6.77l-.607.607.374.374 1.245-1.246-1.245-1.245-.374.374.607.607H4.498V1.697l.607.607.374-.374z",fill:t,"white-space":"normal",overflow:"visible"})})},C={height:"12px",width:"12px",margin:"0 4px"},P=function(e){var t=e.isTabbed,n=e.isClosable,r=e.isDraggable,i=e.HeaderPlugin,o=e.onClose,a=e.onDrag;return(0,k.jsxs)(u.Fragment,{children:[i,(0,k.jsxs)("div",{style:{alignItems:"center",display:"flex",height:"100%",marginLeft:"auto"},children:[r&&!t&&(0,k.jsx)(Z,{Icon:S,onMouseDown:a,style:C}),n&&!t&&(0,k.jsx)(Z,{Icon:E,onClick:o,style:C})]})]})},D=n(23495),I=n(38934);function T(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"===typeof e)return _(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function _(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function A(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,o.Z)(e);if(t){var a=(0,o.Z)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return(0,i.Z)(this,n)}}function R(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function N(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?R(Object(n),!0).forEach((function(t){(0,a.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):R(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var U=1e5,L=32,B={width:"100%",height:"100%"},F=function(e){return e.getBoundingClientRect()},M=function(e,t){var n=t.px,r=t.pc;return{px:e.px+(n||0),pc:e.pc+(r||0)}},z=function(e,t){return{px:e.px*t,pc:e.pc*t}},H={px:0,pc:0},G=function(e){return{px:e,pc:0}},X=function(e){return{px:0,pc:e}},V=function(e){var t=e.px,n=e.pc;return 0===t&&0===n},W=function e(t,n,r,i,o){var a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{x:H,y:H,w:X(100),h:X(100),p:[]};if("tabs"===i.type){var s=i.active||0;r.push(N(N({},a),{},{h:G(L),tabs:i.tabs.map((function(e){return e.pud||e.type})),active:s}));for(var c=0;c<i.tabs.length;c++)e(t,n,r,N({},i.tabs[c]),o,N(N({},a),{},{p:[].concat((0,f.Z)(a.p),["tabs",c.toString()]),y:M(a.y,G(L)),h:c===s?M(a.h,G(-32)):H,w:c===s?a.w:H}))}if("split"===i.type){var u=void 0===i.position?50:i.position,l=!1;if("undefined"!==typeof i.fixed?l=i.fixed:("undefined"!==typeof i.leftSize||"undefined"!==typeof i.rightSize)&&(l=!0),"undefined"!==typeof i.leftSize&&"undefined"!==typeof i.rightSize)throw new Error("Cannot have both leftSize and rightSize specified");var d=null;if(0===u?d="left":100===u&&(d="right"),i.stacked){var p=!V(a.h)&&!l,g=z(a.h,u/100);i.rightSize?g=M(a.h,G(-i.rightSize)):i.leftSize?g=G(i.leftSize):"left"===d||V(a.h)?g=H:"right"===d&&(g=M(g,G(-8))),e(t,n,r,i.left,o,N(N({},a),{},{p:[].concat((0,f.Z)(a.p),["left"]),h:g}));var h=M(a.y,z(a.h,u/100));i.rightSize?h=M(a.y,g):i.leftSize?h=M(a.y,G(i.leftSize)):"left"===d?h=a.y:"right"===d&&p&&(h=M(h,G(-8)));var v=z(a.h,(100-u)/100);i.rightSize?v=G(i.rightSize):i.leftSize?v=M(a.h,G(-i.leftSize)):("right"===d||V(a.h))&&(v=H),e(t,n,r,i.right,o,N(N({},a),{},{p:[].concat((0,f.Z)(a.p),["right"]),y:p?M(h,G(8)):h,h:p?M(v,G(-8)):v})),p&&n.push(N(N({},a),{},{y:h,snapped:d,h:G(8),stacked:i.stacked}))}else{var m=!V(a.w)&&!l,b=z(a.w,u/100);i.rightSize?b=M(a.w,G(-i.rightSize)):i.leftSize?b=G(i.leftSize):"left"===d||V(a.w)?b=H:"right"===d&&(b=M(b,G(-8))),e(t,n,r,i.left,o,N(N({},a),{},{p:[].concat((0,f.Z)(a.p),["left"]),w:b}));var y=M(a.x,z(a.w,u/100));"left"===d?y=a.x:i.rightSize?y=M(a.x,b):i.leftSize?y=M(a.x,G(i.leftSize)):"right"===d&&(y=M(y,G(-8)));var w=z(a.w,(100-u)/100);i.rightSize?w=G(i.rightSize):i.leftSize?w=M(a.w,G(-i.leftSize)):("right"===d||V(a.w))&&(w=H),e(t,n,r,i.right,o,N(N({},a),{},{p:[].concat((0,f.Z)(a.p),["right"]),x:m?M(y,G(8)):y,w:m?M(w,G(-8)):w})),m&&n.push(N(N({},a),{},{x:y,snapped:d,w:G(8),stacked:i.stacked}))}}if("pane"===i.type){var k=i.header,E=i.pud,O=o[E]||{isDraggable:!1,isClosable:!1},j=x.JU(a.p),Z=k||!j&&(O.isClosable||O.isDraggable),S=Z?k&&k.height||32:0;t.push({header:Z&&{pud:k&&k.pud,p:N(N({},a),{},{h:G(S)})},pud:E,p:N(N({},a),{},{y:M(a.y,G(S)),h:M(a.h,G(-S))}),isDraggable:O.isDraggable,isClosable:O.isClosable})}},Y=function(e){var t,n,r,i=e.stacked,o=e.onMouseDown,s=e.snapped,c=e.style,u=te(),l=(0,y.Z)(u,2),d=l[0],f=l[1],p=d?"var(--outline-default)":"var(--outline-dimmest)";s?(n="left"===s?i?"translate(0px, -2px) rotate(135deg)":"translate(-2px, 0px) rotate(45deg)":i?"translate(0px, 2px) rotate(-45deg)":"translate(2px, 0px) rotate(-135deg)",t={width:6,height:6,borderRight:"solid 1px ".concat(p),borderTop:"solid 1px ".concat(p),transition:"0.1s background-color",transform:n}):(r={backgroundColor:p,borderRadius:"var(--border-radius-4)"},(0,a.Z)(r,i?"height":"width",2),(0,a.Z)(r,i?"width":"height",25),(0,a.Z)(r,"transition","0.1s background-color"),t=r);return(0,k.jsx)("div",N(N({},f),{},{onMouseDown:o,onTouchStart:o,style:N({position:"absolute",display:"flex",justifyContent:"center",alignItems:"center",flex:"1 0 auto",overflow:"hidden",borderRadius:"var(--border-radius-4)",background:"var(--background-root)",cursor:i?"row-resize":"col-resize",zIndex:1},c),children:(0,k.jsx)("div",{style:t})}))},q=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=arguments.length>2?arguments[2]:void 0;if(0===n.length)return r;var i=(0,p.Z)(n),o=i[0],s=i.slice(1);return Array.isArray(t)?(t[o]=e(t[o],s,r),t):N(N({},t),{},(0,a.Z)({},o,e(t[o],s,r)))},J=function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];if(0===n.length)return t;var r=(0,p.Z)(n),i=r[0],o=r.slice(1);return e(t[i],o)},K=function(e){(0,r.Z)(n,e);var t=A(n);function n(){var e;(0,s.Z)(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return(e=t.call.apply(t,[this].concat(i))).state={protectEvents:!1,newLayout:null,debug:!1,dragging:null,resizing:null,layout:e.props.store.getState().layout,plugins:e.props.store.getState().plugins},e.getPluginComponent=function(t,n){var r=e.state.plugins[n],i=e.props,o=i.pluginComponents,a=i.wid,s=null;return s=r?r.broken?(0,k.jsx)(Q,{handleError:function(t){return e.handleError({error:t,pluginType:r.type,source:"component",pud:n})},message:r.errorMessage||"Plugin broken with no error :/"}):(s=o[r.type])?(0,k.jsx)(s,{wid:a,pud:n,dimensions:e.getPluginDims(n,{w:t.w,h:t.h}),style:B}):(0,k.jsx)(Q,{handleError:function(t){return e.handleError({error:t,pluginType:r.type,source:"component",pud:n})},message:"No plugin component by the name ".concat(n)}):(0,k.jsx)(Q,{handleError:function(t){return e.handleError({error:t,pluginType:"none",source:"component",pud:n})},message:"No known plugin by the name ".concat(n)})},e.onResizerDown=function(t,n,r){var i=t.target;e.setState({protectEvents:!0,resizing:{stacked:r}}),t.preventDefault(),t.stopPropagation();var o=0;!function t(n,i){if("pane"===n.type){var a=e.nodes[i.join(".")].ref;if(!a)return;o+=r?F(a).height:F(a).width}else if("split"===n.type)n.stacked===r?(t(n.left,[].concat((0,f.Z)(i),["left"])),t(n.right,[].concat((0,f.Z)(i),["right"]))):t(n.left,[].concat((0,f.Z)(i),["left"]));else if("tabs"===n.type){var s=n.active||0;t(n.tabs[s],[].concat((0,f.Z)(i),["tabs",s.toString()]))}}(J(e.state.layout,["tiling"].concat((0,f.Z)(n))),n),o+=8;var a=r?F(i).top:F(i).left,s=J(e.state.layout,["tiling"].concat((0,f.Z)(n),["position"]));"number"!==typeof s&&(s=50);var c=function(t){t.preventDefault(),t.stopPropagation();var i,c=t.touches?t.touches[0]:t,u=(r?c.pageY:c.pageX)-a,l=o*(s/100)+u;i=l>o-32?100:l<32?0:l/o*100,e.setState({newLayout:q(e.state.layout,["tiling"].concat((0,f.Z)(n),["position"]),i)})},u=function t(){document.removeEventListener("touchmove",c),document.removeEventListener("mousemove",c),document.removeEventListener("touchend",t),document.removeEventListener("mouseup",t),e.setState({protectEvents:!1,resizing:null}),null!==e.state.newLayout&&(e.props.store.dispatch({type:"SET_SPLIT_POSITION",position:J(e.state.newLayout,["tiling"].concat((0,f.Z)(n),["position"])),path:["tiling"].concat((0,f.Z)(n))}),e.setState({newLayout:null}))};document.addEventListener("touchmove",c),document.addEventListener("mousemove",c),document.addEventListener("touchend",u),document.addEventListener("mouseup",u)},e.onDrag=function(t,n){t.stopPropagation(),t.preventDefault();var r=t.pageX,i=t.pageY,o=null,a=[];for(var s in e.nodes){var c=e.nodes[s];if(c.ref){var u=F(c.ref),l=u.top,d=u.left,f=u.width,p=u.height,g={p:c.p,x:d,y:l,w:f,h:p,pud:c.pud};c.pud===n?o=g:a.push(g)}}e.setState({protectEvents:!0});var h=function(t){t.preventDefault(),t.stopPropagation();var s,c=t.pageX,u=t.pageY,l={target:null,side:"bottom",left:c,top:u},d=T(a);try{for(d.s();!(s=d.n()).done;){var f=s.value;if((e.state.plugins[f.pud]||{}).isDraggable&&(c>f.x&&c<f.x+f.w&&u>f.y&&u<f.y+f.h)){var p=c-f.x,g=f.x+f.w-c,h=u-f.y,v=f.y+f.h-u,m=Math.min(p,g,h,v);l.target=f.pud,m===p?l.side="left":m===g?l.side="right":m===h&&(l.side="top");break}}}catch(w){d.e(w)}finally{d.f()}var b=c-r,y=u-i;l.left=o.x+b,l.top=o.y+y,e.setState({dragging:N({pud:n,width:o.w,height:o.h},l)})};document.addEventListener("mousemove",h),document.addEventListener("mouseup",(function t(){e.state.dragging&&e.state.dragging.target&&e.props.store.dispatch($({pud:n,side:e.state.dragging.side,target:e.state.dragging.target})),e.setState({protectEvents:!1,dragging:null}),document.removeEventListener("mousemove",h),document.removeEventListener("mouseup",t)}))},e.nodes={},e.dimMap={},e.getPluginDims=function(t,n){var r=e.dimMap[t];return r&&r.h.pc===n.h.pc&&r.h.px===n.h.px&&r.w.pc===n.h.pc&&r.w.px===n.w.px?r:(e.dimMap[t]=n,n)},e}return(0,c.Z)(n,[{key:"cancelContextMenuIntercept",value:function(e){e.shiftKey&&e.altKey&&e.preventDefault()}},{key:"componentDidMount",value:function(){this.isWeMounted=!0,this.subscribe(),document.addEventListener("contextmenu",this.cancelContextMenuIntercept)}},{key:"componentWillUnmount",value:function(){this.unsubscribe&&this.unsubscribe(),document.removeEventListener("contextmenu",this.cancelContextMenuIntercept),this.isWeMounted=!1}},{key:"subscribe",value:function(){var e=this,t=this.props.store;this.unsubscribe=t.subscribe((function(){var n=t.getState(),r=n.layout,i=n.plugins;e.isWeMounted&&e.setState((function(e){for(var t in e.plugins){if(!i[t])return{layout:r,plugins:i};if(i[t].broken!==e.plugins[t].broken)return{layout:r,plugins:i}}return e.layout===r?null:{layout:r,plugins:i}}))}))}},{key:"shouldComponentUpdate",value:function(e,t){if(this.state!==t)return!0;for(var n in this.props)if(this.props[n]!==e[n])return!0;return!1}},{key:"onMaybeDrag",value:function(e,t){var n=this.state.plugins[t]&&this.state.plugins[t].isDraggable;(e.altKey||e.shiftKey)&&n&&this.onDrag(e,t)}},{key:"closeTabbedPlugin",value:function(e){var t=e.path,n=e.tabIndex,r=e.activeTabIndex;return function(e,i){var o=i().layout,a=x.QK(o,t).tabs,s=a[n].pud;if(e({type:"CLOSE_TAB",path:t,tabIndex:n}),a.length-1===0)e(N({type:"UPDATE_LAYOUT"},x.Od({layout:o,nodePath:t})));else if(n<=r){e({type:"SET_ACTIVE_TAB",tabIndex:Math.max(r-1,0),path:t})}e({type:"PLUGIN_CLOSED",closedPud:s})}}},{key:"closePlugin",value:function(e){var t=e.pud;return function(e,n){var r=n().layout;e(N({type:"UPDATE_LAYOUT"},x.Od({layout:r,pud:t}))),e({type:"PLUGIN_CLOSED",closedPud:t})}}},{key:"getPaneStyles",value:function(e,t){var n=V(t.w)||V(t.h),r=t.p.includes("tabs");return e?{opacity:.75,overflow:"hidden",visibility:n?"hidden":void 0,height:this.state.dragging.height,position:"absolute",left:0,top:0,transform:"translate(".concat(this.state.dragging.left,"px, ").concat(this.state.dragging.top-(t.h.px>0?t.h.px:0),"px)"),width:this.state.dragging.width,zIndex:99999,transition:"opacity 0.2s, max-width 0.2s, max-height 0.2s",maxWidth:"100vw",maxHeight:"100vh"}:{position:"absolute",visibility:n&&!r?"hidden":void 0,display:n&&r?"none":void 0,height:"calc(".concat(t.h.pc,"% + ").concat(t.h.px,"px)"),width:"calc(".concat(t.w.pc,"% + ").concat(t.w.px,"px)"),left:"calc(".concat(t.x.pc,"% + ").concat(t.x.px,"px)"),top:"calc(".concat(t.y.pc,"% + ").concat(t.y.px,"px)"),opacity:"1",transition:"opacity 0.2s, max-width 0.2s, max-height 0.2s",maxWidth:"100vw",maxHeight:"100vh"}}},{key:"render",value:function(){var e=this,t=this.state.newLayout||this.state.layout,n=t.tiling,r=t.floating,i=this.state.plugins,o=[],a=[],s=[];W(o,a,s,n,i);var c="default";return this.state.resizing?c=this.state.resizing.stacked?"row-resize":"col-resize":this.state.dragging&&(c="grabbing"),(0,k.jsxs)("div",{style:{height:"100%",width:"100%",position:"absolute"},children:[o.map((function(t){var n=t.pud,r=t.p,i=t.header,o=t.isClosable,a=t.isDraggable,s=e.state.plugins[n]||{},c=e.state.plugins[i&&i.pud]||{},l=i&&i.p.h.px,d=i&&i.pud&&(0,k.jsx)(Q,{handleError:function(t){return e.props.handleError({error:t,pluginType:c.type,source:"component",pud:n})},message:c.broken?c.errorMessage:void 0,children:(0,k.jsx)(w.zt,{store:e.props.classicStoreFor(n),children:e.getPluginComponent(i.p,i.pud)})}),f=e.state.dragging&&e.state.dragging.pud===n;return(0,k.jsxs)(u.Fragment,{children:[i&&(0,k.jsx)("div",{className:"WHO AM  I??",style:N(N({},e.getPaneStyles(f,i.p)),{},{backgroundColor:"var(--background-default)",color:"var(--foreground-default)",height:"".concat(l,"px"),alignItems:"center",display:"flex",justifyContent:"spaceBetween"}),children:(0,k.jsx)(P,{HeaderPlugin:d,isClosable:o,isDraggable:a,isTabbed:x.JU(r.p),onClose:function(){e.props.store.dispatch(e.closePlugin({pud:n}))},onDrag:function(t){return e.onDrag(t,n)}})}),(0,k.jsxs)("div",{ref:function(t){return e.nodes[r.p.join(".")]={ref:t,p:r,pud:n}},style:N(N({},e.getPaneStyles(f,r)),{},{borderRadius:"var(--border-radius-4)",boxShadow:f?"var(--shadow-2)":"none"}),onMouseDown:function(t){return e.onMaybeDrag(t,n)},children:[e.state.debug?(0,k.jsxs)("div",{style:{backgroundColor:"hsl(".concat(n.split("").map((function(e){return e.charCodeAt(0)})).reduce((function(e,t){return e+t})),", 50%, 50%)"),width:"100%",height:"100%",border:"inset 5px"},children:[n,(0,k.jsxs)("pre",{children:["x: ","calc(".concat(r.x.pc,"% + ").concat(r.x.px,"px)"),(0,k.jsx)("br",{}),"y: ","calc(".concat(r.y.pc,"% + ").concat(r.y.px,"px)"),(0,k.jsx)("br",{}),"w: ","calc(".concat(r.w.pc,"% + ").concat(r.w.px,"px)"),(0,k.jsx)("br",{}),"h: ","calc(".concat(r.h.pc,"% + ").concat(r.h.px,"px)"),(0,k.jsx)("br",{}),"p: ",r.p.join(" ")]})]}):(0,k.jsx)(Q,{handleError:function(t){return e.props.handleError({error:t,pluginType:s.type,source:"component",pud:n})},message:s.broken?s.errorMessage:void 0,children:(0,k.jsx)(w.zt,{store:e.props.classicStoreFor(n),children:e.getPluginComponent(r,n)})}),e.state.dragging&&e.state.dragging.target===n?(0,k.jsx)("div",{style:{position:"absolute",top:0,left:0,bottom:0,right:0,background:"rgba(127, 127, 127, 0.6)",transition:"transform 0.2s",transformOrigin:"top left",transform:"translate(".concat("right"===e.state.dragging.side?"50%":0,", ").concat("bottom"===e.state.dragging.side?"50%":0,") ").concat("left"===e.state.dragging.side||"right"===e.state.dragging.side?"scaleX(.5)":"scaleY(.5)")}}):null]})]},n)})),this.state.protectEvents&&(0,k.jsx)("div",{style:{zIndex:U,position:"absolute",top:0,bottom:0,left:0,right:0,cursor:c}}),a.map((function(t,n){var r=t.x,i=t.y,o=t.w,a=t.h,s=t.p,c=t.snapped,u=t.stacked;return(0,k.jsx)(Y,{onMouseDown:function(t){return e.onResizerDown(t,s,u)},snapped:c,stacked:u,style:{left:"calc(".concat(r.pc,"% + ").concat(r.px,"px)"),top:"calc(".concat(i.pc,"% + ").concat(i.px,"px)"),width:"calc(".concat(o.pc,"% + ").concat(o.px,"px)"),height:"calc(".concat(a.pc,"% + ").concat(a.px,"px)")}},n)})),s.map((function(t,n){var r=t.x,i=t.y,o=t.w,a=t.h,s=t.p,c=t.tabs,u=t.active;return(0,k.jsx)(ee,{tabsMetadata:c.map((function(t){if("split"===t){var r=J(e.state.layout,["tiling"].concat((0,f.Z)(s),["tabs"]))[n];t=r.left.pud||r.right.pud}return{title:e.state.layout.pluginTitles[t]||"untitled",isClosable:e.state.plugins[t]&&e.state.plugins[t].isClosable}})),active:u,setActive:function(t){return e.props.store.dispatch((function(e,n){var r=n(),i=["tiling"].concat((0,f.Z)(s));"shell"===J(r.layout,i.concat("tabs"))[t].pud&&(0,I.track)(I.events.SHELL_OPENED),e({type:"SET_ACTIVE_TAB",tabIndex:t,path:i})}))},close:function(t){var n=["tiling"].concat((0,f.Z)(s));e.props.store.dispatch(e.closeTabbedPlugin({path:n,tabIndex:t,activeTabIndex:u}))},style:{position:"absolute",left:"calc(".concat(r.pc,"% + ").concat(r.px,"px)"),top:"calc(".concat(i.pc,"% + ").concat(i.px,"px)"),width:"calc(".concat(o.pc,"% + ").concat(o.px,"px)"),height:"calc(".concat(a.pc,"% + ").concat(a.px,"px)")}},n)})),r.map((function(t){if(!e.state.plugins[t])return(0,k.jsx)(Q,{handleError:function(n){return e.props.handleError({error:n,pluginType:e.state.plugins[t].type,source:"component",pud:t})},message:"No plugin by the name ".concat(t)},t);var n=e.props.pluginComponents[e.state.plugins[t].type];return n?(0,k.jsx)(Q,{handleError:function(n){return e.props.handleError({error:n,pluginType:e.state.plugins[t].type,source:"component",pud:t})},children:(0,k.jsx)(w.zt,{store:e.props.classicStoreFor(t),children:(0,k.jsx)(n,{wid:e.props.wid,pud:t},t)})},t):(0,k.jsx)(Q,{handleError:function(n){return e.props.handleError({error:n,pluginType:e.state.plugins[t].type,source:"component",pud:t})},message:"No component found for plugin by the name ".concat(t)},t)}))]})}}]),n}(u.Component);function $(e){var t=e.pud,n=e.side,r=e.target;return function(e,i){var o=i().layout,a=x.Bp(o,t),s=x.QK(o,a);e(N({type:"UPDATE_LAYOUT"},x.Od({layout:o,pud:t}))),o=i().layout;var c=x.Bp(o,r);if(c){x.JU(c)&&(c=x.Il(c));var u="leftOf";"right"===n?u="rightOf":"top"===n?u="above":"bottom"===n&&(u="below"),e(N({type:"UPDATE_LAYOUT"},x.$T(o,s.pud,u,c,{position:50})))}}}var Q=function(e){(0,r.Z)(n,e);var t=A(n);function n(){var e;(0,s.Z)(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return(e=t.call.apply(t,[this].concat(i))).state={hasError:!!e.props.message,error:new Error(e.props.message)},e}return(0,c.Z)(n,[{key:"componentDidCatch",value:function(e,t){this.setState({hasError:!0,error:e,info:t}),this.props.handleError(e)}},{key:"render",value:function(){return this.state.hasError?(0,k.jsxs)("div",{style:{background:"red",color:"white",width:"100%",height:"100%",padding:"0",margin:"0",overflow:"hidden"},children:[(0,k.jsx)("h1",{children:"This Plugin Crashed!"}),this.state.info&&(0,k.jsx)("pre",{children:this.state.info.componentStack||JSON.stringify(this.state.info)}),this.state.error&&(0,k.jsx)("pre",{children:this.state.error.toString()})]}):this.props.children||null}}]),n}(u.Component);function ee(e){var t=e.active,n=void 0===t?0:t,r=e.setActive,i=void 0===r?function(){}:r,o=e.close,a=void 0===o?function(){}:o,s=e.tabsMetadata,c=e.style;return(0,k.jsx)("div",{style:c,children:(0,k.jsx)("div",{style:{height:L,fontFamily:"'IBM Plex Sans', sansSerif",backgroundColor:"var(--background-root)",display:"flex",alignItems:"flex-end",position:"relative",zIndex:2},children:s.map((function(e,t){return(0,k.jsx)(re,{title:e.title,isClosable:e.isClosable,onClose:function(){return a(t)},onClick:function(){return i(t)},isActive:t===n},t)}))})})}function te(){var e=u.useState(!1),t=(0,y.Z)(e,2),n=t[0],r=t[1];return[n,{onMouseEnter:function(){r(!0)},onMouseLeave:function(){r(!1)}}]}function ne(e){var t=e.isHovering,n=e.isActive;return N(N({height:"100%",boxSizing:"border-box",display:"inline-flex",alignItems:"center",justifyContent:"center",position:"relative",padding:"var(--space-8)",backgroundColor:"var(--background-root)",color:"var(--foreground-dimmer)",fontSize:"var(--font-size-default)",fontFamily:"var(--font-family-default)",borderTopRightRadius:"var(--border-radius-4)",borderTopLeftRadius:"var(--border-radius-4)",cursor:"pointer",transition:"0.2s background-color"},t?{backgroundColor:"var(--background-root)",color:"var(--foreground-default)"}:{}),n?{backgroundColor:"var(--background-default)",color:"var(--foreground-default)"}:{})}function re(e){var t=e.isActive,n=e.onClick,r=e.title,i=e.isClosable,o=e.onClose,a=te(),s=(0,y.Z)(a,2),c=s[0],u=s[1];return(0,k.jsx)("div",N(N({},u),{},{style:ne({isHovering:c,isActive:t}),onClick:n,children:(0,k.jsxs)("div",{style:{alignItems:"center",display:"flex",justifyContent:"space-between"},children:[(0,D.Qs)(r),i&&(0,k.jsx)(Z,{onClick:function(e){e.stopPropagation(),o()},Icon:E,style:{height:"8px",width:"8px",padding:0,marginLeft:"7px"}})]})}))}var ie=K,oe=n(34897),ae=n(51595),se=n(25108);function ce(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,o.Z)(e);if(t){var a=(0,o.Z)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return(0,i.Z)(this,n)}}function ue(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"===typeof e)return le(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return le(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function le(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function de(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function fe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?de(Object(n),!0).forEach((function(t){(0,a.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):de(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var pe=function(e){return function(t){return function(n){return"function"===typeof n?n(e.dispatch,e.getState):t(n)}}},ge=["activeFile"],he=function(){function e(){var t=this;(0,s.Z)(this,e),this.marshal=function(){var e=t.store.getState();return JSON.stringify(e)},this.unmarshal=function(e){var n=JSON.parse(e);t.store.dispatch({type:"SET_WORKSPACE",state:n})},this.bootstrap=function(e){t.store.dispatch(function(e){var t=e.wid,n=e.config;return function(e){for(var r in e({wid:t,type:"CREATE_WORKSPACE",language:n.language,layout:n.layout,activeFile:n.activeFile}),n.plugins)e(me({wid:t,pluginPud:r,pluginType:n.plugins[r].type,title:n.plugins[r].title,initialState:n.plugins[r].state,isClosable:n.plugins[r].isClosable,isDraggable:n.plugins[r].isDraggable}))}}({config:e}))},this.register=function(e,n){t.reducers[e]=n.reducer,t.recievers[e]=n.reciever||n.receiver,t.components[e]=n.Component},this.yikesInjectStore=function(e){t.yikesExtraStore=e},this.injectServices=function(e){t.services=e},this.handleError=function(e){var n=e.error,r=e.pluginType,i=e.source,o=e.pud;if(0===t.errorHandlers.length)return se.error("Plugin with type ",r," errored in ",i," error is: "),void se.error(n);t.errorHandlers.forEach((function(e){return e({error:n,pluginType:r,source:i,pud:o})}))},this.registerErrorHandler=function(e){return t.errorHandlers.push(e),function(){t.errorHandlers=t.errorHandlers.filter((function(t){return t!==e}))}},window.performance.clearMarks("create-workspace"),window.performance.mark("create-workspace"),this.wid=""+Math.random(),this.reducers={},this.recievers={},this.components={},this.pluginStores={},this.yikesExtraStore={getState:function(){return{}},subscribe:function(){return function(){}},dispatch:function(){}},this.errorHandlers=[];var n=[];this.govalConnectionStarted=null,this.classicStoreFor=function(e){var i={};if(t.pluginStores[e])return t.pluginStores[e];var o=t,s={getState:function(){return{get user(){return i.user=!0,o.yikesExtraStore.getState().user},get banners(){return i.banners=!0,o.yikesExtraStore.getState().banners},get replEnvironment(){return i.replEnvironment=!0,o.yikesExtraStore.getState().replEnvironment},get repls(){throw new Error("Please use repl shared reducer")},get replsByUrl(){throw new Error("Please use repl shared reducer")},get replsByUser(){throw new Error("Please use repl shared reducer")},get files(){throw new Error("Please use files shared reducer")},get messages(){return i.messages=!0,o.yikesExtraStore.getState().messages},get plans(){return i.plans=!0,o.yikesExtraStore.getState().plans},workspace:(0,a.Z)({},t.wid,t.store.getState()),get services(){return o.services}}},subscribe:function(n){var r={},o={},a=ge.reduce((function(e,n){return e[n]=t.store.getState()[n],e}),{});return t.store.subscribe((function(){var s=t.store.getState().plugins[e];if(s!==r)return r=s,void n();var c=!1,u=t.yikesExtraStore.getState();for(var l in i)u[l]!==o[l]&&(o[l]=u[l],c=!0);var d=t.store.getState();for(var f in a)d[f]!==a[f]&&(a[f]=d[f],c=!0);c&&n()}))},dispatch:function(i){if(i.type){var o={};i.path&&(o={path:i.path}),l.n_({category:"redux",message:"workspace action",data:fe({type:i?i.type:null},o)})}if(i.wid||"function"===typeof i){var a,s=pe(t.classicStoreFor(e))(r(u)(c))(i),d=ue(n);try{for(d.s();!(a=d.n()).done;){a.value.cb()}}catch(f){d.e(f)}finally{d.f()}return s}return t.yikesExtraStore.dispatch(i)}};return t.pluginStores[e]=s,s};var r=d(this.classicStoreFor,this.wid,this.recievers,this.handleError),i=b(this.wid,this.reducers,this.handleError),o=i(void 0,{type:"@@INIT"}),c=function(e){o=i(o,e)},u={getState:function(){return o},subscribe:function(e){var t=function e(){n=n.filter((function(t){return t.unsub!==e}))};return n.push({cb:e,unsub:t}),t},dispatch:function(e){if(e.type){var t={};e.path&&(t={path:e.path}),l.n_({category:"redux",message:"workspace action",data:fe({type:e?e.type:null},t)})}var i,o=pe(u)(r(u)(c))(e),a=ue(n);try{for(a.s();!(i=a.n()).done;){i.value.cb()}}catch(s){a.e(s)}finally{a.f()}return o}};window.store=u,this.store=u}return(0,c.Z)(e,[{key:"component",value:function(){var e=this;return function(){return(0,k.jsx)(oe.Z.Provider,{value:e.wid,children:(0,k.jsx)(ve,{store:e.store,classicStoreFor:e.classicStoreFor,wid:e.wid,pluginComponents:e.components,handleError:e.handleError,govalConnectionStarted:e.govalConnectionStarted})})}}}]),e}(),ve=function(e){(0,r.Z)(n,e);var t=ce(n);function n(){return(0,s.Z)(this,n),t.apply(this,arguments)}return(0,c.Z)(n,[{key:"componentDidMount",value:function(){var e=this.props.govalConnectionStarted;if(e){var t=window.performance.now()-e;ae.kg.info(I.events.GOVAL_TIME_TO_CONNECT,{time:t})}this.props.store.dispatch({type:"WORKSPACE_MOUNTED"})}},{key:"componentWillUnmount",value:function(){this.props.store.dispatch({type:"WORKSPACE_WILL_UNMOUNT"})}},{key:"render",value:function(){return(0,k.jsx)("div",{style:{height:"100%",position:"relative",display:"flex"},children:(0,k.jsx)(ie,{wid:this.props.wid,store:this.props.store,classicStoreFor:this.props.classicStoreFor,pluginComponents:this.props.pluginComponents,handleError:this.props.handleError})})}}]),n}(u.Component);function me(e){var t=e.wid,n=e.pluginPud,r=e.pluginType,i=e.title,o=e.initialState,a=e.isClosable,s=void 0!==a&&a,c=e.isDraggable;return{type:"LOAD_PLUGIN",wid:t,pluginPud:n,pluginType:r,title:i,initialState:o,isClosable:s,isDraggable:void 0!==c&&c}}},28955:function(e,t,n){n.d(t,{e$:function(){return l},$T:function(){return h},Od:function(){return v},PP:function(){return f},Bp:function(){return u},Jz:function(){return p},cV:function(){return g},i3:function(){return b},QK:function(){return m},Il:function(){return y},J9:function(){return w},JU:function(){return x}});var r=n(97131),i=n(17120),o=n(92809);function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){(0,o.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function c(e,t){if("split"===e.type){var n=c(e.left,t);if(n)return["left"].concat(n);var r=c(e.right,t);if(r)return["right"].concat(r)}else if("tabs"===e.type)for(var i=0;i<e.tabs.length;i++){var o=c(e.tabs[i],t);if(o)return["tabs",i].concat(o)}else if("pane"===e.type&&e.pud===t)return[];return null}function u(e,t){for(var n=0;n<e.floating.length;n++)if(e.floating[n]===t)return["floating",n];var r=c(e.tiling,t);return r?["tiling"].concat(r):null}function l(e,t){return!!u(e,t)}function d(e,t,n){if("split"===e.type){var r=d(e.left,t,n);if(r)return["left"].concat(r);var i=d(e.right,t,n);if(i)return["right"].concat(i)}else if("tabs"===e.type)for(var o=0;o<e.tabs.length;o++){var a=d(e.tabs[o],t,n);if(a)return["tabs",o].concat(a)}else if("pane"===e.type){if(t[e.pud].type===n)return[];if(e.header&&t[e.header.pud].type===n)return["header"]}return null}function f(e,t,n){var r=d(e.tiling,t,n);return r?["tiling"].concat(r):null}function p(){return["tiling"]}function g(){return["floating"]}function h(e,t,n,r,i){if("inside"===n){if(1!==r.length||"floating"!==r[0])throw new Error("position 'inside' should only be used for the path ['floating']");return i&&i.once&&e.floating.includes(t)?{path:["floating"],to:e.floating}:{path:["floating"],to:e.floating.concat(t)}}var o={type:"split"};if("undefined"!==typeof i?"undefined"!==typeof i.position?o=s(s({},o),{},{fixed:!!i.fixed,position:i.position||50}):"undefined"!==typeof i.leftSize?o=s(s({},o),{},{leftSize:i.leftSize}):"undefined"!==typeof i.rightSize&&(o=s(s({},o),{},{rightSize:i.rightSize})):o=s(s({},o),{},{fixed:!1,position:50}),"leftOf"===n)o=s(s({},o),{},{stacked:!1,right:m(e,r),left:{type:"pane",pud:t}});else if("rightOf"===n)o=s(s({},o),{},{stacked:!1,right:{type:"pane",pud:t},left:m(e,r)});else if("above"===n)o=s(s({},o),{},{stacked:!0,left:{type:"pane",pud:t},right:m(e,r)});else{if("below"!==n)throw new Error("unsupported new plugin type");o=s(s({},o),{},{stacked:!0,right:{type:"pane",pud:t},left:m(e,r)})}return{path:r.map((function(e){return e.toString()})),to:o}}function v(e,t){var n,r=u(e,t);if(!r)return{path:["tiling"],to:e.tiling};if("floating"===r[0]){var i=e.floating.indexOf(t);return{path:["floating"],to:e.floating.slice(0,i).concat(e.floating.slice(i+1))}}if("split"!==m(e,r.slice(0,-1)).type)throw new Error("remove only supports splits right now");return n="left"===r[r.length-1]?"right":"left",{path:r.slice(0,-1).map((function(e){return e.toString()})),to:m(e,r.slice(0,-1).concat(n))}}var m=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0;if(0===n.length)return t;var r=(0,i.Z)(n),o=r[0],a=r.slice(1);return e(t[o],a)};function b(e,t){return e.length!==t.length&&(e=e.slice(0,t.length),t=t.slice(0,e.length)),e.join()===t.join()?e:0===e.length?null:b(e.slice(0,-1),t.slice(0,-1))}function y(e){return e.slice(0,-1)}function w(e){return[].concat((0,r.Z)(e.slice(0,-1)),["left"===e[e.length-1]?"right":"left"])}function x(e){return"tabs"===e.slice(0,-1).pop()}},52973:function(e,t,n){n.d(t,{$:function(){return c}});var r=n(92809);function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function a(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"===typeof e)return s(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return s(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,c=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){c=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(c)throw o}}}}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function c(e){"function"!==typeof e.primary&&(e.primary=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e});var t=Object.keys(e);return function(n,r){var i,s,c=!1,u={},l=a(t);try{for(l.s();!(i=l.n()).done;){var d=i.value;if("primary"!==d){var f=e[d],p=n?n[d]:void 0,g=f(p,r);u[d]=g,c=c||g!==p}}}catch(v){l.e(v)}finally{l.f()}n&&(s=c?o(o({},n),u):n);var h=e.primary(s,r);return(c=c||h!==s)?o(o({},u),h):n}}},20138:function(e,t,n){n.d(t,{Z:function(){return i},J:function(){return o}});var r=n(82100);function i(e,t,n,r){var i=e.workspace[t].plugins[n];if(i.type!==r)throw new Error("expected type to be "+r);return i.state}function o(e,t,n,o){var a=(0,r.v9)((function(r){return i(r,e,t,n)}),o),s=(0,r.I0)();return[a,function(n){s({type:"SET_STATE",wid:e,pud:t,state:n})}]}},94793:function(e,t,n){function r(e){return e.startsWith("/")?e:null}function i(e){var t=r(e);if(null===t)throw new Error("Expected an absolute path but got ".concat(e));return t}function o(e){return e.startsWith("/home/runner/")?e.split("/").slice(4).join("/"):null}n.d(t,{IT:function(){return r},ZF:function(){return i},om:function(){return o}})},36265:function(e,t,n){function r(e,t){if("dev"===e)return!0;if("dev"===t)return!1;for(var n=function(e){var t=[0,0,0];return e.split(".").map(Number).forEach((function(n,r){if("number"!==typeof n||isNaN(n))throw new Error("invalid version: ".concat(e));t[r]=n})),t},r=n(e),i=n(t),o=0;o<3;o++){if(i[o]>r[o])return!1;if(r[o]>i[o])return!0}return!0}function i(e,t){return!r(e,t)}n.d(t,{H:function(){return r},h:function(){return i}})},61069:function(e,t,n){n.d(t,{Z:function(){return Q}});var r,i=n(30266),o=n(79056),a=n(65988),s=n(809),c=n.n(s),u=n(67294),l=n(56023),d=n(81529),f=n(10257),p=n(84476),g=n(26331),h=n(38279),v=n(42567),m=n(97131),b=n(24243),y=n(37429),w=n(61850),x=n(38934),k=n(55877),E=n.n(k),O=n(25731);function j(){return(j=(0,i.Z)(c().mark((function e(t){var n,o,a,s,u,l,d,f,p,g,h,v;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.parentPath,o=t.overwrite,a=t.fs,s=t.files,u=t.shouldUseFileTransferAPI,l=t.onStart,d=t.onUpload,f=t.onError,p=t.onDone,g=function(){var e=(0,i.Z)(c().mark((function e(t){var n,i,s,l,p,g,h,v,m,y;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.targetPath,i=t.file,s=t.progress,o){e.next=10;break}return e.next=4,a.stat(n);case 4:if(l=e.sent,!l.exists){e.next=10;break}return p={file:i,path:n,error:r.AlreadyExists},f(p),e.abrupt("return",p);case 10:return g=E()(),h=Date.now(),(0,x.track)(x.events.WS_FILE_UPLOAD_STARTED,{uploadID:g,size:i.size}),v=null,e.prev=14,e.next=17,(0,O.pV)(i);case 17:v=e.sent,e.next=25;break;case 20:return e.prev=20,e.t0=e.catch(14),m={file:i,path:n,error:r.FileRead},f(m),e.abrupt("return",m);case 25:if(y=b.Z.from(v),!u){e.next=31;break}return e.next=29,a.transferFile(n,y,(function(e,t){s.current=t/e}));case 29:e.next=33;break;case 31:return e.next=33,a.writeFile(n,y);case 33:return(0,x.track)(x.events.WS_UPLOADED_FILE,{uploadID:g,size:i.size,elapsedMillis:Date.now()-h}),d({file:i,path:n}),e.abrupt("return",{path:n,file:i});case 36:case"end":return e.stop()}}),e,null,[[14,20]])})));return function(t){return e.apply(this,arguments)}}(),h=s.map((function(e){var t=e.path||e.webkitRelativePath||e.name;return{targetPath:n?n+"/"+t:t,progress:(0,y.u)(0),file:e}})),l(h),e.next=6,Promise.all(h.map(g));case 6:v=e.sent,p({parentPath:n,uploads:v.filter((function(e){return!("error"in e)})),errors:v.reduce((function(e,t){return"error"in t?[].concat((0,m.Z)(e),[t]):e}),[])});case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Z(e){var t=e.fs,n=e.onDone,r=u.useState([]),i=(0,o.Z)(r,2),a=i[0],s=i[1],c=u.useRef(n);u.useEffect((function(){c.current=n}),[n]);var l=(0,w.Z)("flag-transfer-files");return{uploadFiles:u.useCallback((function(e){var n=e.parentPath,r=e.files;!function(e){j.apply(this,arguments)}({overwrite:e.overwrite,parentPath:n,files:r.filter(Boolean),fs:t,shouldUseFileTransferAPI:l,onStart:function(e){return s((function(t){return[].concat((0,m.Z)(t),(0,m.Z)(e))}))},onUpload:function(e){s((function(t){return t.filter((function(t){return t.targetPath!==e.path}))}))},onError:function(e){s((function(t){return t.filter((function(t){return t.targetPath!==e.path}))}))},onDone:function(e){c.current&&c.current(e)}})}),[t,s,l]),pendingUploads:a}}!function(e){e.AlreadyExists="ALREADY_EXIST",e.FileRead="FILE_READ",e.Network="NETWORK"}(r||(r={}));var S=n(68270),C=n(70264);function P(){var e=(0,f.Z)().session,t=u.useState(e.getAreHiddenFilesVisible()),n=(0,o.Z)(t,2),r=n[0],i=n[1];return u.useEffect((function(){return i(e.getAreHiddenFilesVisible()),e.onHiddenFileVisibilityToggled(i)}),[e]),r}var D=n(60356),I=n(35944);function T(e){var t=e.uploadFiles,n=e.onDownloadZip,r=u.useRef(null),i=u.useRef(null),o=P(),s=(0,D.Z)(),c=(0,f.Z)().session,l=u.useMemo((function(){if("undefined"===typeof document)return[];var e=document.createElement("input"),t="webkitdirectory"in e||"mozdirectory"in e||"msdirectory"in e||"odirectory"in e||"directory"in e,n=[C.s.UploadFile];return t&&n.push(C.s.UploadFolder),n.push(C.s.DownloadZip),n.push(o?C.s.HideHiddenFiles:C.s.ShowHiddenFiles),n}),[o]);return(0,I.BX)(I.HY,{children:[(0,I.tZ)("input",{ref:r,type:"file",onChange:function(e){var n=e.target.files;n&&t({files:Array.from(n)})},onClick:function(e){e.currentTarget.value=""},multiple:!0,accept:"*",className:"jsx-880321226"}),(0,I.tZ)("input",{ref:i,type:"file",onChange:function(e){var n=e.target.files;n&&t({files:Array.from(n)})},onClick:function(e){e.currentTarget.value=""},webkitdirectory:"true",mozdirectory:"true",msdirectory:"true",odirectory:"true",directory:"true",accept:"*",className:"jsx-880321226"}),(0,I.tZ)(C.Z,{actions:l,onAction:function(e){switch(e){case C.s.UploadFile:if(!r.current)return;return r.current.click(),void(0,S.Z)({replId:s,action:"upload"});case C.s.UploadFolder:if(!i.current)return;return i.current.click(),void(0,S.Z)({replId:s,action:"upload"});case C.s.DownloadZip:return n(),void(0,S.Z)({replId:s,action:"download"});case C.s.ShowHiddenFiles:return void c.setAreHiddenFilesVisible(!0);case C.s.HideHiddenFiles:c.setAreHiddenFilesVisible(!1)}}}),(0,I.tZ)(a.default,{id:"880321226",children:["input.jsx-880321226{display:none;}"]})]})}var _=n(53567),A=n(45971),R=n(95420),N=n(51444),U=n(972),L=n(88834),B=n(55994),F=n(90101),M=n(68047),z=n(45187),H=n(16482),G=n(39084),X=n(32535),V=n(81700),W=n.n(V),Y=n(7785),q=n(23286),J=n(49512),K=n(82457);function $(e){return e/1024/1024}function Q(e){var t,n,s,m,b,y,x,k,E,O,j=(0,N.Z)().showError,C=(0,D.Z)(),V=u.useState(null),Q=(0,o.Z)(V,2),ee=Q[0],te=Q[1],ne=(0,w.Z)("flag-monitor-repl-resources"),re=(0,f.Z)(),ie=re.session,oe=re.presence,ae=re.fs,se=re.dotReplit,ce=u.useState(null),ue=(0,o.Z)(ce,2),le=ue[0],de=ue[1],fe=(0,M.Z)(),pe=P(),ge=(0,z.aEG)({variables:{replId:C}}).data,he="Repl"===(null===ge||void 0===ge?void 0:ge.repl.__typename)?ge.repl:void 0,ve=he?he.url:void 0,me=ge?function(e){var t,n="Repl"===(null===e||void 0===e?void 0:e.repl.__typename)?e.repl:void 0,r=null!==e&&void 0!==e&&e.currentUser?e.currentUser:void 0;if(void 0===n||void 0===r)return q.J.Nothing;if("User"===(null===(t=n.owner)||void 0===t?void 0:t.__typename)){var i,o;if(r.id!==(null===(i=n.owner)||void 0===i?void 0:i.id))return q.J.Nothing;if(null===(o=r.capabilities)||void 0===o||!o.canBoost)return q.J.Upgrade;if(!n.isBoosted)return q.J.Boost}return q.J.Nothing}(ge):q.J.Nothing,be="Repl"===(null===ge||void 0===ge?void 0:ge.repl.__typename)?ge.repl.language:void 0,ye="Repl"===(null===ge||void 0===ge?void 0:ge.repl.__typename)&&(ge.repl.isProjectFork||ge.repl.isModelSolution||ge.repl.isModelSolutionFork),we=u.useCallback((function(){var e=(ve||window.location.pathname)+".zip";window.open(e,"_blank")}),[ve]),xe=u.useCallback(function(){var e=(0,i.Z)(c().mark((function e(t){var n;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(te(t),!t||!le){e.next=7;break}return e.next=4,ae.stat(le);case 4:n=e.sent,n.exists||de(fe||null);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[fe,le,ae]),ke=u.useState(null),Ee=(0,o.Z)(ke,2),Oe=Ee[0],je=Ee[1],Ze=u.useState(ie.getResourceMonitoringState()),Se=(0,o.Z)(Ze,2),Ce=Se[0],Pe=Se[1];u.useEffect((function(){return ie.onResourceMonitoringStateChanged((function(e){Pe(e)}))}),[ie,Pe]),u.useEffect((function(){fe!==le&&de(fe)}),[fe]);var De=Z({onDone:function(e){var t=e.parentPath,n=e.errors;if(n.length){var i=n.filter((function(e){return e.error===r.AlreadyExists}));i.length&&je({parentPath:t,errors:i});var o=n.filter((function(e){return e.error!==r.AlreadyExists}));o.length&&j("There was an error uploading: ".concat(o.map((function(e){return e.path})).join(", ")))}},fs:ae}),Ie=De.uploadFiles,Te=De.pendingUploads,_e=(null===be||void 0===be?void 0:be.includes("nix"))&&!pe,Ae=(0,Y.Z)(),Re=u.useState([]),Ne=(0,o.Z)(Re,2),Ue=Ne[0],Le=Ne[1];return u.useEffect((function(){return se.watch((function(e){Ae.current&&(e.error?e.error===X.Y.NotFound&&Le([]):e.config.hidden?Le(e.config.hidden.map((function(e){return W()(e,{extended:!0,globstar:!0})}))):Le([]))}))}),[se]),(0,I.tZ)(v.Z,{children:(0,I.tZ)(G.xW,{stepId:H.H.Sidepane,children:(0,I.BX)("div",{className:a.default.dynamic([["3645750475",[e.minHeight?e.minHeight:"auto"]]])+" filetree",children:[(0,I.BX)(_.Ug,{align:"center",wrap:"nowrap",spacing:0,className:"filetree-header",children:[(0,I.tZ)("div",{className:a.default.dynamic([["3645750475",[e.minHeight?e.minHeight:"auto"]]])+" heading",children:(0,I.tZ)(p.Z,{level:4,children:"Files"})}),(0,I.tZ)(L.Z,{border:!1,Icon:B.Z,className:"add-button",textColor:"var(--foreground-dimmer)",backgroundColor:"var(--background-default)",onClick:function(){(0,S.Z)({replId:C,action:"create",source:"filetree"}),xe(l.Tv.File)},"aria-label":"Add file","data-microtip-position":"bottom",role:"tooltip"}),(0,I.tZ)("div",{className:a.default.dynamic([["3645750475",[e.minHeight?e.minHeight:"auto"]]])+" filetree-action-separator"}),(0,I.tZ)(L.Z,{border:!1,Icon:F.Z,className:"add-button",textColor:"var(--foreground-dimmer)",backgroundColor:"var(--background-default)",onClick:function(){(0,S.Z)({replId:C,action:"create",source:"filetree"}),xe(l.Tv.Directory)},"aria-label":"Add folder","data-microtip-position":"bottom",role:"tooltip"}),(0,I.tZ)(T,{uploadFiles:Ie,onDownloadZip:we})]}),(0,I.tZ)(g.Z,{height:1}),(0,I.tZ)(h.Z,{onRename:function(){return null},onDownload:function(){return null},onDelete:function(){return null},onDuplicate:function(){return null},overwriteNode:function(){return null},getNodeType:function(){var e=(0,i.Z)(c().mark((function e(t){var n;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ae.readFile(t);case 2:return n=e.sent,e.abrupt("return",n.error===l.Df.IsDirectory?l.Tv.Directory:l.Tv.File);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),siblings:[],onClick:function(){return null},pendingUploads:Te,uploadFiles:Ie,pendingFileType:ee,setPendingFileType:xe,activePath:le,onNodeClick:function(e){var t=e.path,n=e.type,r=e.newTab;(de(t),n!==l.Tv.Directory)&&((0,S.Z)(r?{replId:C,action:"newTab",source:"filetree"}:{replId:C,action:"select",source:"filetree"}),ie.openFile(t,{newTab:r}),oe.getFollowedUser()&&oe.unfollowUser())},path:d.Q,transformChildren:be?(0,U.Z)({language:be,shouldHideHiddenFiles:_e,hiddenFiles:Ue,isProjectFork:ye}):void 0,fs:ae}),ne&&(0,I.tZ)(J.Z,{css:[K.l0.p(8),K.l0.backgroundColor.backgroundDefault,{borderTop:"1px solid ".concat(K.TV.backgroundHigher)},"",""],children:(0,I.tZ)(q.Z,{callToAction:me,cpuTotal:100,cpuCurrent:null!==(t=null===Ce||void 0===Ce||null===(n=Ce.utilization)||void 0===n?void 0:n.cpuUtilPercent)&&void 0!==t?t:0,ramTotal:$(null!==(s=null===Ce||void 0===Ce||null===(m=Ce.utilization)||void 0===m?void 0:m.memoryLimitBytes)&&void 0!==s?s:0),ramCurrent:$(null!==(b=null===Ce||void 0===Ce||null===(y=Ce.utilization)||void 0===y?void 0:y.memoryUsageBytes)&&void 0!==b?b:0),diskTotal:$(null!==(x=null===Ce||void 0===Ce||null===(k=Ce.utilization)||void 0===k?void 0:k.storageTotalBytes)&&void 0!==x?x:0),diskCurrent:$(null!==(E=null===Ce||void 0===Ce||null===(O=Ce.utilization)||void 0===O?void 0:O.storageUsedBytes)&&void 0!==E?E:0)})}),(0,I.tZ)(A.Z,{isOpen:Boolean(Oe),onRequestClose:function(){return je(null)},children:Oe?(0,I.tZ)(R.Z,{paths:Oe.errors.map((function(e){return e.path})),onCancel:function(){return je(null)},onConfirm:function(){Ie({overwrite:!0,parentPath:Oe.parentPath,files:Oe.errors.map((function(e){return e.file}))}),je(null)}}):null}),(0,I.tZ)(a.default,{id:"3645750475",dynamic:[e.minHeight?e.minHeight:"auto"],children:[".filetree.__jsx-style-dynamic-selector{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;height:100%;overflow:hidden;border-top-right-radius:var(--border-radius-4);border-bottom-right-radius:var(--border-radius-4);background-color:var(--background-default);min-height:".concat(e.minHeight?e.minHeight:"auto",";}"),".filetree.__jsx-style-dynamic-selector .filetree-header{padding:var(--space-8);background-color:var(--background-default);position:-webkit-sticky;position:sticky;top:0;}",".filetree-action-separator.__jsx-style-dynamic-selector{height:6px;width:0;border-right:1px solid var(--foreground-dimmest);}",".add-button:hover{color:var(--foreground-default) !important;}",".heading.__jsx-style-dynamic-selector{margin-right:auto;}"]})]})})})}},75358:function(e,t,n){n.d(t,{r:function(){return y},Y:function(){return m}});var r=n(67294),i=n(68047),o=n(92809),a=n(96622),s=n(35944);function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach((function(t){(0,o.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e){return(0,s.BX)(a.Z,u(u({},e),{},{children:[(0,s.tZ)("path",{d:"M23 19C23 19.5304 22.7893 20.0391 22.4142 20.4142C22.0391 20.7893 21.5304 21 21 21H3C2.46957 21 1.96086 20.7893 1.58579 20.4142C1.21071 20.0391 1 19.5304 1 19V8C1 7.46957 1.21071 6.96086 1.58579 6.58579C1.96086 6.21071 2.46957 6 3 6H7L9 3H15L17 6H21C21.5304 6 22.0391 6.21071 22.4142 6.58579C22.7893 6.96086 23 7.46957 23 8V19Z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),(0,s.tZ)("path",{d:"M12 17C14.2091 17 16 15.2091 16 13C16 10.7909 14.2091 9 12 9C9.79086 9 8 10.7909 8 13C8 15.2091 9.79086 17 12 17Z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})]}))}var d=n(53721),f=n(49001),p=n(59633);function g(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"===typeof e)return h(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return h(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function h(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var v=new Set(["draw.js"]);function m(e,t){var n=(0,f.f6)(),o=(0,i.Z)(),a=r.useCallback((function(e,n){var r,i;null===(r=t.current)||void 0===r||null===(i=r.contentWindow)||void 0===i||i.postMessage({action:"FILE_UPDATE",file:e,content:n},"*")}),[t]);r.useEffect((function(){if(t.current&&n){var r,i=g(v);try{var o=function(){var n=r.value;t.current.onload=function(){e.readFile(n).then((function(e){e.error||a(n,e.content.toString())}))}};for(i.s();!(r=i.n()).done;)o()}catch(s){i.e(s)}finally{i.f()}}}),[e,a,t,n]),r.useEffect((function(){if(n&&o&&v.has(o))return e.watchOtFile(o,{onReady:function(e){var t=e.initialContent;return a(o,t.toString())},onChange:function(e){var t=e.latestContent;return a(o,t)}})}),[e,o,a,n])}var b={name:"r1kkn5",styles:"transform:scale(0.8)"},y=function(e){var t=e.iframe;return r.useEffect((function(){var e=function(e){switch(e.data.action){case"DOWNLOAD":var t=document.createElement("a");document.body.appendChild(t),t.setAttribute("style","display: none"),t.href=e.data.url,t.download=e.data.filename,t.click(),document.body.removeChild(t)}};return window.addEventListener("message",e),function(){window.removeEventListener("message",e)}}),[]),(0,s.BX)(s.HY,{children:[(0,s.tZ)(p.J,{alt:"Save image",onClick:function(){var e,n;null===(e=t.current)||void 0===e||null===(n=e.contentWindow)||void 0===n||n.postMessage({action:"REQUEST_SCREENSHOT"},"*")},children:(0,s.tZ)(l,{})}),(0,s.tZ)(p.J,{alt:"Toggle Record",onClick:function(){var e,n;null===(e=t.current)||void 0===e||null===(n=e.contentWindow)||void 0===n||n.postMessage({action:"REQUEST_TOGGLE_RECORD"},"*")},children:(0,s.tZ)(d.Z,{filled:!0,css:b})})]})}},59633:function(e,t,n){n.d(t,{J:function(){return C},Z:function(){return D}});var r=n(79056),i=n(92809),o=n(65988),a=n(67294),s=n(5537),c=n(46379),u=n(76642),l=n(16289),d=n(95211),f=n(94184),p=n.n(f),g=n(45187),h=n(88834),v=n(41649),m=n(35944);function b(e){var t=e.repl,n=e.onCancel,i=e.onLink,s=(0,a.useState)(null),c=s[0],u=s[1],l=(0,g.T9I)(),d=(0,r.Z)(l,2),f=d[0],b=d[1],w=(0,a.useRef)(null),x=(0,a.useState)(""),k=x[0],E=x[1];(0,a.useEffect)((function(){b.data&&"Repl"===b.data.linkReplDomain.__typename&&i()}),[b.data,i]);var O=k.includes(".")&&k.split(".")[0].length>0&&k.split(".")[1].length>0,j=t.hostedUrl.replace(/^https:\/\//,"");return(0,m.BX)("div",{className:"jsx-2066200193 edit-domain",children:[(0,m.tZ)("div",{className:"jsx-2066200193 title",children:"Link An Existing Domain"}),(0,m.BX)("div",{className:"jsx-2066200193 subtitle",children:["Learn more"," ",(0,m.tZ)("a",{href:"https://docs.replit.com/repls/web-hosting#custom-domains",target:"_blank",className:"jsx-2066200193",children:"here"}),"."]}),(0,m.BX)("ol",{className:"jsx-2066200193 steps",children:[(0,m.tZ)("li",{className:"jsx-2066200193",children:(0,m.BX)("div",{className:"jsx-2066200193",children:[(0,m.tZ)("label",{className:"jsx-2066200193",children:"Enter Your Domain:"}),(0,m.tZ)(v.ZP,{disabled:"loading"===c,required:!0,value:k,onChange:function(e){E(e.target.value)},placeholder:"example.com"})]})}),O?(0,m.tZ)("li",{className:"jsx-2066200193",children:(0,m.BX)("div",{className:"jsx-2066200193",children:[(0,m.BX)("div",{className:"jsx-2066200193",children:["Add a ",(0,m.tZ)("code",{className:"jsx-2066200193",children:"CNAME"})," record to your domain pointing at:"]}),(0,m.BX)("div",{className:"jsx-2066200193 cname-url",children:[(0,m.tZ)(v.ZP,{readOnly:!0,ref:w,onChange:function(){return null},value:j,onClick:function(){w.current&&w.current.select()}}),(0,m.tZ)(h.Z,{onClick:function(){w.current&&(w.current.select(),document.execCommand("copy"))},children:"Copy"})]})]})}):null,"loading"===c||"error"===c?(0,m.tZ)("li",{className:"jsx-2066200193",children:(0,m.tZ)("div",{className:"jsx-2066200193",children:(0,m.tZ)(y,{replId:t.id,domain:k,onVerified:function(){return u("verified")},onError:function(){return u("error")}})})}):null,"verified"===c?(0,m.tZ)("li",{className:"jsx-2066200193",children:"Your domain is configured correctly. Linking could take a few minutes. Please don't leave this page."}):null]}),(0,m.BX)("div",{className:"jsx-2066200193 controls",children:[(0,m.tZ)(h.Z,{onClick:n,children:"Close"}),(0,m.tZ)("div",{className:"jsx-2066200193 "+(p()("next",{"show-next":O&&"loading"!==c})||""),children:"verified"===c?(0,m.tZ)(h.Z,{color:"primary",loading:b.loading,onClick:function(){b.loading||f({variables:{replId:t.id,domain:k}})},children:b.loading?"Linking...":"Link Domain"}):(0,m.tZ)(h.Z,{color:"primary",onClick:function(){return u("loading")},children:"Next"})})]}),(0,m.tZ)(o.default,{id:"2066200193",children:[".edit-domain.jsx-2066200193{display:grid;grid-row-gap:var(--space-16);}",".title.jsx-2066200193{font-size:20px;}",".subtitle.jsx-2066200193,.label.jsx-2066200193{font-size:18px;}","li.jsx-2066200193{margin-bottom:var(--space-16);}","li.jsx-2066200193>div.jsx-2066200193{display:grid;grid-row-gap:var(--space-8);}",".cname-url.jsx-2066200193{display:grid;grid-column-gap:var(--space-8);grid-template-columns:1fr auto;}",".controls.jsx-2066200193{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;}",".next.jsx-2066200193{visibility:hidden;}",".next.show-next.jsx-2066200193{visibility:visible;}"]})]})}function y(e){var t,n,r=e.domain,i=e.replId,s=e.onVerified,c=e.onError,u=(0,g.ZUY)({variables:{replId:i,domain:r},pollInterval:1e3}),l=u.data,d=u.stopPolling;return(0,a.useEffect)((function(){if(l&&"Repl"===l.repl.__typename){var e=l.repl;if(e.checkDomain){var t=e.checkDomain,n=t.retry,r=t.verified;r||n?(!r&&n||d(),r&&s()):c()}}}),[l,d,s,c]),"Repl"===(null===l||void 0===l?void 0:l.repl.__typename)&&null!==(t=l.repl.checkDomain)&&void 0!==t&&t.status&&l.repl.checkDomain.retry?(0,m.BX)("div",{className:"jsx-1173750789 verify-domain",children:[(0,m.tZ)("div",{className:"jsx-1173750789 loading"}),(0,m.tZ)("div",{className:"jsx-1173750789",children:l.repl.checkDomain.status}),(0,m.tZ)(o.default,{id:"1173750789",children:[".verify-domain.jsx-1173750789{display:grid;grid-template-columns:auto 1fr;grid-column-gap:var(--space-8);-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;}",".loading.jsx-1173750789{width:20px;height:20px;border-radius:100%;border:solid 3px #eee;border-top:solid 3px #888;-webkit-transform:rotate(0deg);-ms-transform:rotate(0deg);transform:rotate(0deg);-webkit-animation:linear domain-loading-jsx-1173750789 1s infinite;animation:linear domain-loading-jsx-1173750789 1s infinite;}","@-webkit-keyframes domain-loading-jsx-1173750789{from{-webkit-transform:rotate(0deg);-ms-transform:rotate(0deg);transform:rotate(0deg);}to{-webkit-transform:rotate(360deg);-ms-transform:rotate(360deg);transform:rotate(360deg);}}","@keyframes domain-loading-jsx-1173750789{from{-webkit-transform:rotate(0deg);-ms-transform:rotate(0deg);transform:rotate(0deg);}to{-webkit-transform:rotate(360deg);-ms-transform:rotate(360deg);transform:rotate(360deg);}}"]})]}):"Repl"!==(null===l||void 0===l?void 0:l.repl.__typename)||null!==(n=l.repl.checkDomain)&&void 0!==n&&n.retry?null:(0,m.tZ)(m.HY,{children:"We ran into an internal error while checking the domain. Please try again later."})}function w(e){var t=e.replId,n=e.domain,i=e.onCancel,s=e.onUnlink,c=(0,g.pCu)({variables:{input:{id:t,domain:null}}}),u=(0,r.Z)(c,2),l=u[0],d=u[1];return(0,a.useEffect)((function(){d.data&&d.data.updateRepl.repl&&s()}),[d.data,s]),(0,m.BX)("div",{className:"jsx-2620693481 unlink-domain",children:[(0,m.BX)("div",{className:"jsx-2620693481",children:["Your repl is being served at"," ",(0,m.tZ)("a",{target:"_blank",rel:"noopener",href:"https://"+n,className:"jsx-2620693481",children:n})]}),(0,m.BX)("div",{className:"jsx-2620693481 controls",children:[(0,m.tZ)(h.Z,{onClick:i,children:"Close"}),(0,m.tZ)(h.Z,{color:"negative",onClick:function(){d.loading||l()},children:d.loading?"Unlinking...":"Unlink Domain"})]}),(0,m.tZ)(o.default,{id:"2620693481",children:[".unlink-domain.jsx-2620693481{display:grid;grid-row-gap:var(--space-24);}",".controls.jsx-2620693481{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;}"]})]})}function x(e){var t=e.replId,n=e.onCancel,r=e.onUnlink,i=e.onLink,a=(0,g.KG0)({variables:{replId:t}}),s=a.data,c=null;if(a.loading)c=(0,m.tZ)(m.HY,{children:"loading..."});else if(s&&"Repl"===s.repl.__typename){var u=s.repl;c=u.config.domain?(0,m.tZ)(w,{replId:u.id,domain:u.config.domain,onUnlink:r,onCancel:n}):(0,m.tZ)(b,{repl:u,onLink:i,onCancel:n})}else s&&"ReplRedirect"===s.repl.__typename?c=(0,m.BX)("div",{children:["This repl has moved to"," ",(0,m.tZ)("a",{href:s.repl.replUrl,children:s.repl.replUrl})]}):s&&"SubscriptionExpiredError"===s.repl.__typename&&(c=(0,m.tZ)("div",{children:"Subscription expired"}));return(0,m.BX)("div",{className:"jsx-2281586937",children:[c,(0,m.tZ)(o.default,{id:"2281586937",children:["div.jsx-2281586937{padding:var(--space-16);color:var(--foreground-default);}"]})]})}var k=n(70565),E=n(49512),O=n(82457),j=n(75358);function Z(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var S={name:"1ghk6ov",styles:"color:var(--foreground-dimmest);:hover{color:var(--foreground-default);}"},C=function(e){return(0,m.tZ)(k.Z,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Z(Object(n),!0).forEach((function(t){(0,i.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Z(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({css:S},e))},P={name:"opde7s",styles:"color:inherit"};function D(e){var t=a.useState(!1),n=(0,r.Z)(t,2),i=n[0],f=n[1];return(0,m.BX)(E.Z,{css:[O.l0.rowWithGap(4),O.l0.p(8),"",""],children:[(0,m.tZ)(C,{alt:e.refreshing?"Refreshing...":"Refresh",onClick:e.onRefresh,children:(0,m.tZ)("div",{className:"jsx-3445740206 "+"rotate-wrapper ".concat(e.refreshing?"rotate":""),children:(0,m.tZ)(c.Z,{})})}),(0,m.tZ)("input",{value:e.url,type:"text",onClick:function(t){e.trackUrlSelect(),t.currentTarget.select()},readOnly:!0,className:"jsx-3445740206"}),e.canEditDomain&&(0,m.BX)("div",{className:"jsx-3445740206 edit-domain-wrap",children:[(0,m.tZ)(C,{alt:"Custom domain",onClick:function(){return f(!i)},children:(0,m.tZ)(s.Z,{})}),i?(0,m.tZ)("div",{className:"jsx-3445740206 edit-domain",children:(0,m.tZ)(x,{onCancel:function(){return f(!1)},onLink:function(){return f(!1)},onUnlink:function(){return f(!1)},replId:e.replId})}):null]}),e.anon?(0,m.tZ)("div",{"data-microtip-size":"large","data-microtip-position":"bottom-left",role:"tooltip",className:"jsx-3445740206",children:(0,m.tZ)(l.Z,{})}):null,(0,m.tZ)("a",{href:e.url,css:P,target:"_blank",className:"jsx-3445740206",children:(0,m.tZ)(C,{alt:"Open in a new tab",children:(0,m.tZ)(u.Z,{})})}),e.isKaboomDraw&&e.iframe&&(0,m.tZ)(j.r,{iframe:e.iframe}),e.canBeClosed&&(0,m.tZ)(C,{alt:"Close web view",onClick:e.closeCallback,children:(0,m.tZ)(d.Z,{})}),(0,m.tZ)(o.default,{id:"3445740206",children:[".edit-domain-wrap.jsx-3445740206{position:relative;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;}","input.jsx-3445740206{-webkit-align-self:center;-ms-flex-item-align:center;align-self:center;outline:none;border:1px solid var(--background-highest);background-color:transparent;padding:2px 4px;margin:0 var(--space-8);color:var(--foreground-default);font-size:13px;-webkit-box-flex:1;-webkit-flex-grow:1;-ms-flex-positive:1;flex-grow:1;border-radius:var(--border-radius-4);}","input.jsx-3445740206:focus{border-color:var(--outline-default);background-color:var(--background-root);}","a.jsx-3445740206,a.jsx-3445740206:hover{border-bottom:none;}","button.jsx-3445740206{border:0;background:transparent;box-shadow:none;cursor:pointer;}","button.jsx-3445740206:focus{outline:0 none;}",".edit-domain.jsx-3445740206{padding:var(--space-8) var(--space-16);position:absolute;top:100%;right:0;width:90vw;background-color:var(--background-default);border:1px solid var(--background-highest);border-radius:var(--border-radius-4);z-index:10;}",".rotate.jsx-3445740206{-webkit-animation:rotate-jsx-3445740206 infinite 0.5s;animation:rotate-jsx-3445740206 infinite 0.5s;}",".rotate-wrapper.jsx-3445740206{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;}","@media screen and (min-width:540px){.edit-domain.jsx-3445740206{width:520px;}}","@-webkit-keyframes rotate-jsx-3445740206{from{-webkit-transform:rotate(0deg);-ms-transform:rotate(0deg);transform:rotate(0deg);}to{-webkit-transform:rotate(360deg);-ms-transform:rotate(360deg);transform:rotate(360deg);}}","@keyframes rotate-jsx-3445740206{from{-webkit-transform:rotate(0deg);-ms-transform:rotate(0deg);transform:rotate(0deg);}to{-webkit-transform:rotate(360deg);-ms-transform:rotate(360deg);transform:rotate(360deg);}}"]})]})}},41632:function(e,t,n){n.d(t,{Z:function(){return s}});var r=n(30266),i=n(809),o=n.n(i),a=(n(54098),n(25108));function s(){return c.apply(this,arguments)}function c(){return(c=(0,r.Z)(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!localStorage.getItem("gurl")){e.next=3;break}return a.log("Getting gurl from localstorage"),e.abrupt("return",localStorage.getItem("gurl"));case 3:e.next=5;break;case 5:return e.abrupt("return",null);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},44180:function(e,t,n){n.d(t,{t:function(){return k},Z:function(){return Z}});var r=n(92809),i=n(30266),o=n(809),a=n.n(o),s=n(71171),c=n.n(s),u=n(71371),l=n(95962),d=n(38934),f=n(11163),p=n(51218),g=n(86797),h=n(45187),v=n(51595),m=n(34155),b=n(25108);function y(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function w(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?y(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):y(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var x=Boolean(m.env.CAPTCHA_EMBEDS);function k(e){if(e){var t=function(e){var t=new URL(e),n={secure:!1,port:""+t.port,host:t.hostname};return"wss:"===t.protocol?n.secure=!0:"ws:"!==t.protocol&&b.log(e,"Expected gurl protocol to be ws or wss, we'll give it a shot anyway"),n.port||(n.port=n.secure?"443":"80"),n}(e),n=t.secure,r=t.host,i=t.port;if("eval.repl.it"!==r&&"gp-v2.herokuapp.com"!==r&&"gp-v2.replit.com"!==r&&"eval.replit.com"!==r)return(0,d.track)(d.events.LORE_USED_OVERRIDE_CLUSTER_METADATA,{gurl:e}),{id:"development",gurl:"ws".concat(n?"s":"","://").concat(r,":").concat(i),conmanURL:"http".concat(n?"s":"","://").concat(r,":").concat(i)}}}function E(e){var t=Math.floor(500*Math.random()),n=1e3*Math.pow(1.7,e);return Math.min(n,15e3)+t}function O(){var e=window.performance.getEntriesByName("create-workspace");if(0===e.length)return u.Tb(new Error("Expected create-workspace mark")),!1;if(e.length>1)return u.Tb(new Error("Expected a single create-workspace mark")),!1;var t=e[0];return window.performance.now()-t.startTime}var j=0;function Z(e){return S.apply(this,arguments)}function S(){return(S=(0,i.Z)(a().mark((function e(t){var n,r,o,s,u,m,b,y,k,Z,S,C,P,D,I,T,_,A,R,N,U,L,B,F,M,z;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.client,r=t.repl,o=t.shouldAbort,s=t.onRetry,u=t.overrideClusterMetadata,m=t.prefetchedConnectionMetadata,b=t.isLoggedIn,p.l){e.next=3;break}throw new Error("Expected apollo client");case 3:j++,y={connectionMetadata:m,timeout:1e4,pollingHost:void 0},f.default.query.fallback&&(y.pollingHost="gp-v2.replit.com"),k=0,Z=0,S=!1,C=r.id,P=r.language,D=r.slug,I=c()(),T=function(){var e=(0,i.Z)(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e){setTimeout((function(){e()}),E(Z))})));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();case 12:if(!1!==n.isConnected()){e.next=92;break}if(!o()){e.next=15;break}return e.abrupt("return");case 15:return _=Boolean(f.default.query.lite||f.default.query.embed),A=window.performance.now(),R=c()(),N={host:window.location.host,retries:Z,replId:C,language:P,slug:D,attemptUuid:R,govalConnectUuid:I,connectCount:j},U="",e.prev=20,e.next=23,p.l.query({query:h.Nfd});case 23:if(L=e.sent,B=L.data,F=Boolean(B.shouldBypassCaptcha),b||_&&!x||F){e.next=32;break}return e.next=30,(0,l.Z)();case 30:U=e.sent,v.kg.info(d.events.GOVAL_CONNECTION_STEP,w(w({},N),{},{time:window.performance.now()-A,timeSinceCreateWorkspace:O(),step:"captcha",failed:!1}));case 32:e.next=44;break;case 34:if(e.prev=34,e.t0=e.catch(20),v.kg.info(d.events.GOVAL_CONNECTION_STEP,w(w({},N),{},{time:window.performance.now()-A,timeSinceCreateWorkspace:O(),step:"captcha",failed:!0})),!o()){e.next=39;break}return e.abrupt("return");case 39:return Z++,s(Z),e.next=43,T();case 43:return e.abrupt("continue",12);case 44:if(!o()){e.next=46;break}return e.abrupt("return");case 46:if(M=window.performance.now(),m&&!S){e.next=67;break}return e.prev=48,e.next=51,(0,g.Z)({url:"/data/repls/".concat(r.id,"/get_connection_metadata"),captcha:U,isEmbed:_,hCaptchaSiteKey:l.w,clientVersion:"8da4ffb",overrideClusterMetadata:u,retry:Z});case 51:y.connectionMetadata=e.sent,v.kg.info(d.events.GOVAL_CONNECTION_STEP,w(w({},N),{},{time:window.performance.now()-M,timeSinceCreateWorkspace:O(),step:"fetchConnectionMetadata",failed:!1})),e.next=65;break;case 55:if(e.prev=55,e.t1=e.catch(48),v.kg.info(d.events.GOVAL_CONNECTION_STEP,w(w({},N),{},{time:window.performance.now()-M,timeSinceCreateWorkspace:O(),step:"fetchConnectionMetadata",failed:!0})),!o()){e.next=60;break}return e.abrupt("return");case 60:return Z++,s(Z),e.next=64,T();case 64:return e.abrupt("continue",12);case 65:if(!o()){e.next=67;break}return e.abrupt("return");case 67:return S=!0,z=window.performance.now(),e.prev=69,e.next=72,n.connect(y);case 72:window.v1ws=n.ws,e.next=89;break;case 75:if(e.prev=75,e.t2=e.catch(69),!e.t2.message.includes("Client.close")){e.next=79;break}return e.abrupt("return");case 79:if(!o()){e.next=81;break}return e.abrupt("return");case 81:return 2!==k||y.pollingHost||(y.pollingHost="gp-v2.replit.com",v.kg.info(d.events.GOVAL2_FELLBACK,{error:e.t2.message||"",retries:Z,host:window.location.hostname})),v.kg.info(d.events.GOVAL_CONNECTION_STEP,w(w({},N),{},{time:window.performance.now()-z,timeSinceCreateWorkspace:O(),step:"connect",failed:!0})),k++,Z++,s(Z),e.next=88,T();case 88:return e.abrupt("continue",12);case 89:v.kg.info(d.events.GOVAL_CONNECTION_STEP,w(w({},N),{},{time:window.performance.now()-z,timeSinceCreateWorkspace:O(),step:"connect",failed:!1})),e.next=12;break;case 92:case"end":return e.stop()}}),e,null,[[20,34],[48,55],[69,75]])})))).apply(this,arguments)}},65393:function(e,t,n){n.d(t,{Z:function(){return xt}});var r=n(79056),i=n(92809),o=n(65988),a=n(67294),s=n(71371),c=n(44653),u=n(41664),l=n(68724),d=n(32324),f=n(55104),p=n(35944);function g(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function h(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?g(Object(n),!0).forEach((function(t){(0,i.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):g(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var v=function(e){var t=e.repl,n=t.user?(0,p.tZ)(u.default,h(h({},(0,c.Ru)(t.user)),{},{children:(0,p.tZ)("a",{style:{color:"var(--accent-primary-default)",fontWeight:500,textDecoration:"none"},className:"username",children:t.user.username})})):(0,p.tZ)("span",{className:"username",children:"@anonymous"});return(0,p.BX)("div",{className:"jsx-3518488481 workspace-header-info",children:[(0,p.BX)("div",{className:"jsx-3518488481 workspace-header-title",children:[(0,p.tZ)("span",{className:"jsx-3518488481 breadcrumb interactive",children:(0,p.tZ)("span",{onClick:function(e){return e.stopPropagation()},className:"jsx-3518488481 breadcrumb-content",children:n})}),(0,p.tZ)("span",{className:"jsx-3518488481 slash",children:"/"}),(0,p.tZ)("span",{className:"jsx-3518488481 breadcrumb repl-title",children:(0,p.tZ)("span",{className:"jsx-3518488481 breadcrumb-content",children:t.title})})]}),(0,p.tZ)("div",{className:"jsx-3518488481 spacer"}),(0,p.tZ)("div",{title:t.templateInfo.label,className:"jsx-3518488481 language-icon-container",children:(0,p.tZ)(f.Z,{iconUrl:t.templateInfo.iconUrl,size:16,alt:t.templateInfo.label})}),(0,p.tZ)(o.default,{id:"3518488481",children:[".workspace-header-info.jsx-3518488481,.workspace-header-title.jsx-3518488481{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:start;-webkit-justify-content:start;-ms-flex-pack:start;justify-content:start;overflow:hidden;-webkit-flex-wrap:nowrap;-ms-flex-wrap:nowrap;flex-wrap:nowrap;font-size:var(--font-size-default);}",".workspace-header-info.jsx-3518488481{width:100%;}",".workspace-header-user-link.jsx-3518488481{color:var(--accent-primary-default);-webkit-text-decoration:none;text-decoration:none;}",".language-icon-container.jsx-3518488481{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;padding:var(--space-4);background-color:var(--background-higher);border-radius:var(--border-radius-8);position:relative;}",".breadcrumb.jsx-3518488481{display:-webkit-inline-box;display:-webkit-inline-flex;display:-ms-inline-flexbox;display:inline-flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;border-radius:var(--border-radius-4);padding:2px var(--space-4);width:auto;}",".breadcrumb.interactive.jsx-3518488481:hover{background-color:var(--background-higher);}",".breadcrumb-content.jsx-3518488481{display:inline-block;overflow:hidden;text-overflow:ellipsis;max-width:152px;}",".spacer.jsx-3518488481{width:var(--space-8);-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;pointer-events:none;}",".username.jsx-3518488481,.repl-title.jsx-3518488481{white-space:nowrap;color:var(--foreground-default);}",".slash.jsx-3518488481{color:var(--foreground-dimmest);padding:0 2px;}",".repl-title.jsx-3518488481{overflow:hidden;}"]})]})},m=n(38934),b=n(85822),y=n(11163),w=n(23495),x=n(45187),k=n(41649),E=function(e){var t=e.maxLength,n=void 0===t?140:t,r=e.value,i=void 0===r?"":r,a=e.hideLabel,s=void 0!==a&&a;return(0,p.BX)("div",{className:"jsx-112147882",children:[i.length," / ",n," ",s?"":"characters",(0,p.tZ)(o.default,{id:"112147882",children:["div.jsx-112147882{color:var(--foreground-dimmer);font-size:0.75em;text-align:right;margin-top:var(--space-8);}"]})]})},O=n(51444),j=n(53567),Z=n(88834),S=n(46348),C=n(94184),P=n.n(C),D=n(34940),I=n(25517),T=n(56887),_=n(42230);function A(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function R(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?A(Object(n),!0).forEach((function(t){(0,i.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):A(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function N(e){var t,n=e.isBoosted||e.needsUpgrade,r=(0,x.E63)({skip:n,fetchPolicy:"cache-and-network"}),i=r.data,a=r.loading,s=(null===i||void 0===i||null===(t=i.currentUser)||void 0===t?void 0:t.canBoost)||!1,c=e.alwaysOn?1:3,u=e.isBoosted?1:3,l=e.isBoosted?"Your repl is currently boosted":"Your repl will be 2x faster",d=s?{}:{"aria-label":"Boost limit reached","data-microtip-position":"top",role:"tooltip"};return(0,p.BX)(p.HY,{children:[(0,p.BX)("div",{className:o.default.dynamic([["2311824613",[e.isBoosted?"var(--accent-positive-default)":"var(--foreground-dimmest)",e.isBoosted?"var(--accent-positive-default)":"var(--foreground-dimmest)",e.needsUpgrade?"none":"auto",e.needsUpgrade?.5:1,e.needsUpgrade?"not-allowed":"pointer"]]])+" always-on",children:[(0,p.BX)(j.gC,{children:[(0,p.BX)(j.Ug,{spacing:"4px",align:"center",children:[(0,p.tZ)(I.Z,{foreground:c,align:"center",children:(0,p.tZ)(_.Z,{})}),(0,p.tZ)(I.Z,{foreground:c,size:"small",fontWeight:"medium",children:"Always On"})]}),(0,p.tZ)(I.Z,{size:"xsmall",foreground:c,children:"Your repl will never fall asleep"})]}),(0,p.tZ)("div",{className:o.default.dynamic([["2311824613",[e.isBoosted?"var(--accent-positive-default)":"var(--foreground-dimmest)",e.isBoosted?"var(--accent-positive-default)":"var(--foreground-dimmest)",e.needsUpgrade?"none":"auto",e.needsUpgrade?.5:1,e.needsUpgrade?"not-allowed":"pointer"]]])+" toggle-box",children:(0,p.tZ)(D.Z,{isOn:e.alwaysOn,onChange:function(){e.onChange(!e.alwaysOn)}})})]}),(0,p.BX)("div",{className:o.default.dynamic([["2311824613",[e.isBoosted?"var(--accent-positive-default)":"var(--foreground-dimmest)",e.isBoosted?"var(--accent-positive-default)":"var(--foreground-dimmest)",e.needsUpgrade?"none":"auto",e.needsUpgrade?.5:1,e.needsUpgrade?"not-allowed":"pointer"]]])+" "+(P()("boost",{"is-boosted":e.isBoosted})||""),children:[(0,p.BX)(j.gC,{children:[(0,p.BX)(j.Ug,{spacing:"4px",align:"center",justify:"center",children:[(0,p.tZ)(I.Z,{className:"rocket-text",foreground:u,align:"center",children:(0,p.tZ)(T.Z,{})}),(0,p.tZ)(I.Z,{className:"boost-text",foreground:u,size:"small",fontWeight:e.isBoosted?"medium":"regular",children:"Boost"})]}),(0,p.tZ)(I.Z,{size:"xsmall",foreground:u,children:l})]}),(0,p.tZ)("div",{className:o.default.dynamic([["2311824613",[e.isBoosted?"var(--accent-positive-default)":"var(--foreground-dimmest)",e.isBoosted?"var(--accent-positive-default)":"var(--foreground-dimmest)",e.needsUpgrade?"none":"auto",e.needsUpgrade?.5:1,e.needsUpgrade?"not-allowed":"pointer"]]])+" toggle-box",children:e.isBoosted?(0,p.tZ)(Z.Z,{onClick:function(){e.onUnboostClick()},filled:!1,border:!1,children:(0,p.tZ)(S.Z,{color:"var(--foreground-default)"})}):(0,p.tZ)("div",R(R({},d),{},{className:o.default.dynamic([["2311824613",[e.isBoosted?"var(--accent-positive-default)":"var(--foreground-dimmest)",e.isBoosted?"var(--accent-positive-default)":"var(--foreground-dimmest)",e.needsUpgrade?"none":"auto",e.needsUpgrade?.5:1,e.needsUpgrade?"not-allowed":"pointer"]]])+" "+(d&&null!=d.className&&d.className||""),children:(0,p.BX)(Z.Z,{textColor:"var(--accent-positive-default)",disabled:!s,loading:a,onClick:function(){e.onBoostChange(!0)},children:[(0,p.tZ)("span",{className:o.default.dynamic([["2311824613",[e.isBoosted?"var(--accent-positive-default)":"var(--foreground-dimmest)",e.isBoosted?"var(--accent-positive-default)":"var(--foreground-dimmest)",e.needsUpgrade?"none":"auto",e.needsUpgrade?.5:1,e.needsUpgrade?"not-allowed":"pointer"]]])+" rocket-container",children:(0,p.tZ)(T.Z,{fontSize:"16px"})}),"Add Boost"]})}))})]}),(0,p.tZ)(o.default,{id:"2311824613",dynamic:[e.isBoosted?"var(--accent-positive-default)":"var(--foreground-dimmest)",e.isBoosted?"var(--accent-positive-default)":"var(--foreground-dimmest)",e.needsUpgrade?"none":"auto",e.needsUpgrade?.5:1,e.needsUpgrade?"not-allowed":"pointer"],children:[".always-on.__jsx-style-dynamic-selector,.boost.__jsx-style-dynamic-selector{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;padding:var(--space-8);-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;}",".always-on.__jsx-style-dynamic-selector{margin-bottom:var(--space-8);}",".boost.__jsx-style-dynamic-selector .rocket-text{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;color:".concat(e.isBoosted?"var(--accent-positive-default)":"var(--foreground-dimmest)",";width:16px;}"),".boost.__jsx-style-dynamic-selector .boost-text{color:".concat(e.isBoosted?"var(--accent-positive-default)":"var(--foreground-dimmest)",";}"),".is-boosted.__jsx-style-dynamic-selector{background-color:var(--accent-positive-dimmest);border-radius:var(--border-radius-4);}",".rocket-container.__jsx-style-dynamic-selector{margin-right:var(--space-4);}",".boost-menu-item.__jsx-style-dynamic-selector{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;color:var(--accent-negative-default);}",".boost-icon-container.__jsx-style-dynamic-selector{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;padding:0 var(--space-4);}",".boost-menu-text.__jsx-style-dynamic-selector{padding:0 var(--space-4);}",".toggle-box.__jsx-style-dynamic-selector{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex:1 1 auto;-ms-flex:1 1 auto;flex:1 1 auto;-webkit-box-pack:end;-webkit-justify-content:flex-end;-ms-flex-pack:end;justify-content:flex-end;pointer-events:".concat(e.needsUpgrade?"none":"auto",";opacity:").concat(e.needsUpgrade?.5:1,";cursor:").concat(e.needsUpgrade?"not-allowed":"pointer",";}")]})]})}var U=n(45971),L=n(35566),B=n(73073),F=n(41371),M=n(6552),z=n(14900),H=n(82457),G=n(99911),X=n(30266),V=n(809),W=n.n(V),Y=n(95610),q=n(51218),J=n(41632),K=n(44180),$=n(7186);function Q(e){return ee.apply(this,arguments)}function ee(){return(ee=(0,X.Z)(W().mark((function e(t){return W().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",te(t));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function te(e){return ne.apply(this,arguments)}function ne(){return(ne=(0,X.Z)(W().mark((function e(t){var n,r=arguments;return W().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.length>1&&void 0!==r[1]?r[1]:1,e.prev=1,e.next=4,re(t);case 4:e.next=11;break;case 6:if(e.prev=6,e.t0=e.catch(1),!(n>5)){e.next=10;break}throw e.t0;case 10:setTimeout((function(){te(t,n+1)}),1e3*(Math.pow(2,n)-1));case 11:case"end":return e.stop()}}),e,null,[[1,6]])})))).apply(this,arguments)}function re(e){return ie.apply(this,arguments)}function ie(){return(ie=(0,X.Z)(W().mark((function e(t){var n,r,i,o,a,s,c;return W().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=(0,Y.Z)({onUnrecoverableError:function(e){throw new Error("Failed to create temporary goval connection. Received error ".concat(e.message))}}),q.l){e.next=4;break}throw n.destroy(),new Error("Expected Apollo Client");case 4:return e.next=6,q.l.query({query:x.PkY,variables:{id:t}});case 6:if(r=e.sent,"Repl"===(i=r.data).repl.__typename){e.next=11;break}throw n.destroy(),new Error("Failed to query repl info when creating temporary connection");case 11:return o=i.currentUser,a=i.repl,e.next=14,(0,J.Z)();case 14:return s=e.sent,c=(0,K.t)(s),e.abrupt("return",new Promise((function(e){n.onConnectionStateChanged((function(t){t===Y.e.CONNECTED&&(n.destroy(),e())})),n.connect({context:(0,$.U)({repl:a,currentUser:o}),overrideClusterMetadata:c})})));case 17:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var oe=n(34572),ae=n(75478),se=n(41667),ce=n(74834),ue=n(97131),le=n(84476),de=n(30825),fe=n(50573),pe=(n(11609),n(32046)),ge=n(80723),he=n(16264),ve=n(95211),me=n(85231),be=n(51966);function ye(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function we(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ye(Object(n),!0).forEach((function(t){(0,i.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ye(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var xe={styles:(0,p.tZ)(o.default,{id:"304238800",children:["div.jsx-304238800{border-radius:calc(var(--border-radius-8) * 2);color:var(--foreground-default);background-color:var(--background-higher);border:1px solid var(--background-highest);-webkit-flex:0 0 auto;-ms-flex:0 0 auto;flex:0 0 auto;line-height:100%;}"]}),className:"jsx-304238800"},ke={styles:(0,p.tZ)(o.default,{id:"1601823018",children:["span.jsx-1601823018{padding:var(--space-4) var(--space-8);}"]}),className:"jsx-1601823018"},Ee={styles:(0,p.tZ)(o.default,{id:"57095474",children:["span.jsx-57095474{padding:var(--space-4) 0 var(--space-4) var(--space-8);}"]}),className:"jsx-57095474"};function Oe(e){var t=e.name,n=e.onRemoveClick,r=e.removable;return(0,p.BX)(j.Ug,{className:xe.className,wrap:"nowrap",align:"stretch",children:[(0,p.BX)(I.Z,{className:r?Ee.className:ke.className,children:[(0,p.tZ)(I.Z,{size:"xsmall",foreground:2,children:"#"}),(0,p.tZ)(I.Z,{size:"xsmall",foreground:1,children:t})]}),r?(0,p.tZ)("div",{className:"jsx-477340038 button-wrap",children:(0,p.tZ)("button",{onClick:n,className:"jsx-477340038",children:(0,p.tZ)(ve.Z,{})})}):null,xe.styles,r?Ee.styles:ke.styles,(0,p.tZ)(o.default,{id:"477340038",children:[".button-wrap.jsx-477340038,button.jsx-477340038{display:block;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;}","button.jsx-477340038{width:24px;color:var(--foreground-default);background-color:transparent;border:0 none;cursor:pointer;}","button.jsx-477340038:hover{color:var(--accent-primary-default);}","button.jsx-477340038:active,button.jsx-477340038:hover{outline:0 none;border-color:var(--accent-primary-dimmer);}"]})]})}var je=/^[0-9a-zA-Z]+$/;function Ze(e){var t=e.replId,n=e.initialTags,i=e.max,s=e.onChange,c=a.useState(n),u=(0,r.Z)(c,2),l=u[0],d=u[1],f=a.useState([]),g=(0,r.Z)(f,2),h=g[0],v=g[1],m=a.useState(!1),b=(0,r.Z)(m,2),y=b[0],w=b[1],k=a.useState(""),E=(0,r.Z)(k,2),O=E[0],Z=E[1],S=a.useRef(null),C=(0,pe.Z)(O,100);(0,x.FTr)({variables:{replId:t,search:C},onCompleted:function(e){v("SuggestedTagsResult"===e.suggestedTags.__typename?e.suggestedTags.tags:[])}});var D=l.map((function(e){return e.id})),T=h.filter((function(e){return!D.includes(e.id)}))||[],_=a.useRef(!0);a.useEffect((function(){_.current&&(_.current=!1),s(l)}),[l,s]);var A=(0,ge.Kb)({inputValue:O,items:T,defaultHighlightedIndex:0,itemToString:function(e){return e?e.id:""},onSelectedItemChange:function(e){if(e.selectedItem){var t=e.selectedItem;d([].concat((0,ue.Z)(l),[t])),Z(""),A.reset(),S.current&&(S.current.focus(),A.openMenu())}}}),R="a-zA-Z0-9";return(0,p.BX)("div",{className:"jsx-4162972321",children:[(0,p.BX)("div",{className:"jsx-4162972321 tag-selector",children:[l.map((function(e,t){return(0,p.tZ)("div",{className:"jsx-4162972321 tag",children:(0,p.tZ)(Oe,{removable:!0,name:e.id,onRemoveClick:function(){d([].concat((0,ue.Z)(l.slice(0,t)),(0,ue.Z)(l.slice(t+1))))}})},e.id)})),l.length<i?(0,p.BX)("div",we(we({},A.getComboboxProps({onClick:function(){S.current&&S.current.focus()}})),{},{className:"jsx-4162972321 "+(P()("input-tag",{"is-focused":y})||""),children:[y?(0,p.tZ)(I.Z,{foreground:2,children:"#"}):null,(0,p.BX)("div",{className:"jsx-4162972321 input-wrap",children:[y?(0,p.tZ)("span",{className:"jsx-4162972321 input-value-sizer",children:(0,p.tZ)(I.Z,{children:C||R})}):(0,p.BX)("span",{className:"jsx-4162972321 add-cta",children:[(0,p.tZ)(me.Z,{size:12})," ",(0,p.tZ)("span",{className:"jsx-4162972321",children:"Add a tag"})]}),(0,p.tZ)("input",we(we({},A.getInputProps({placeholder:y?R:"",ref:S,onKeyDown:function(e){"Enter"!==e.key||!e.currentTarget.value||T.length||D.includes(e.currentTarget.value)?"Backspace"===e.key&&!e.currentTarget.value&&l.length&&d(l.slice(0,l.length-1)):A.selectItem({id:e.currentTarget.value,replCount:0})},onChange:function(e){var t=e.currentTarget.value;t?je.test(t)&&(t.length>30||Z(t)):Z("")},onFocus:function(){w(!0),A.openMenu()},onBlur:function(e){w(!1),T.length?Z(""):e.currentTarget.value&&(D.includes(e.currentTarget.value)||(A.selectItem({id:e.currentTarget.value,replCount:0}),Z("")))}})),{},{className:"jsx-4162972321"}))]}),T.length&&A.isOpen?(0,p.tZ)("ul",{className:"jsx-4162972321",children:T.map((function(e,t){return(0,p.tZ)("li",we(we({},A.getItemProps({item:e,index:t})),{},{className:"jsx-4162972321 "+(P()("item",{active:A.highlightedIndex===t})||""),children:(0,p.tZ)("div",{className:"jsx-4162972321",children:(0,p.tZ)("div",{className:"jsx-4162972321 block-text",children:(0,p.BX)(j.Ug,{wrap:"nowrap",justify:"space-between",align:"center",spacing:1,children:[(0,p.BX)("div",{className:"jsx-4162972321",children:[(0,p.tZ)(I.Z,{foreground:2,children:"#"}),C?(0,p.tZ)(he.gr,{source:e.id,match:C,style:{color:"var(--foreground-dimmer)"}}):e.id," "]}),e.replCount?(0,p.tZ)(I.Z,{size:"xsmall",foreground:2,children:(0,be.Z)("repl",e.replCount,!0)}):null]})})})}),e.id)}))}):null]})):null]}),(0,p.tZ)(o.default,{id:"4162972321",children:[".tag-selector.jsx-4162972321{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;margin:calc(-1 * var(--space-4));}",".input-tag.jsx-4162972321,.tag.jsx-4162972321{margin:var(--space-4);}",".input-tag.jsx-4162972321{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;align:stretch;background-color:var(--background-root);border-radius:calc(var(--border-radius-8) * 2);line-height:100%;padding:var(--space-4) var(--space-8);border:1px solid var(--background-highest);-webkit-transition:border-color 0.1s,background-color 0.1s;transition:border-color 0.1s,background-color 0.1s;position:relative;cursor:pointer;}",".input-tag.jsx-4162972321:hover{border-color:var(--accent-primary-default);}",".input-tag.is-focused.jsx-4162972321{cursor:text;border-color:var(--accent-primary-default);background-color:var(--background-default);}",".add-cta.jsx-4162972321{color:var(--accent-primary-default);font-size:var(--font-size-small);display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;}",".add-cta.jsx-4162972321>span.jsx-4162972321{padding-left:var(--space-4);}","input.jsx-4162972321:focus.jsx-4162972321::-webkit-input-placeholder{color:var(--foreground-dimmest);}","input.jsx-4162972321:focus.jsx-4162972321::-moz-placeholder{color:var(--foreground-dimmest);}","input.jsx-4162972321:focus.jsx-4162972321:-ms-input-placeholder{color:var(--foreground-dimmest);}","input.jsx-4162972321:focus.jsx-4162972321::placeholder{color:var(--foreground-dimmest);}",".input-wrap.jsx-4162972321{position:relative;}",".input-value-sizer.jsx-4162972321{visibility:hidden;}","input.jsx-4162972321{font-size:var(--font-size-small);font-family:inherit;font-weight:inherit;cursor:inherit;color:var(--foreground-default);background-color:transparent;position:absolute;top:0;left:0;width:100%;height:100%;padding:0;border:0 none;}","input.jsx-4162972321:active,input.jsx-4162972321:focus{outline:none;}","input.jsx-4162972321::-webkit-input-placeholder{color:var(--foreground-dimmer);}","input.jsx-4162972321::-moz-placeholder{color:var(--foreground-dimmer);}","input.jsx-4162972321:-ms-input-placeholder{color:var(--foreground-dimmer);}","input.jsx-4162972321::placeholder{color:var(--foreground-dimmer);}","ul.jsx-4162972321{position:absolute;top:100%;left:0;z-index:10;background-color:var(--background-higher);border:1px solid var(--outline-dimmest);border-radius:var(--border-radius-4);font-family:var(--font-family-default);margin-top:var(--space-8);padding:var(--space-4);list-style:none;box-shadow:0 0 2.5px var(--outline-dimmest) inset;max-height:200px;overflow:auto;}","ul.jsx-4162972321:focus{outline:0 none;}","li.jsx-4162972321{width:100%;cursor:pointer;list-style:none;padding:var(--space-8) var(--space-4);border-radius:var(--border-radius-4);color:var(--foreground-default);font-size:var(--font-size-small);font-weight:var(--font-weight-medium);white-space:nowrap;}",".active.jsx-4162972321{background-color:var(--accent-primary-dimmer);}"]})]})}function Se(e){var t=e.onContinue;return(0,p.BX)(j.gC,{spacing:3,align:"end",children:[(0,p.BX)(j.gC,{spacing:2,align:"stretch",children:[(0,p.BX)(j.gC,{spacing:1,children:[(0,p.tZ)(le.Z,{level:3,fontWeight:"medium",children:"Publish"}),(0,p.tZ)("h3",{className:"jsx-1513705162 subtitle",children:"Publish your first repl to Apps!"})]}),(0,p.tZ)("img",{src:"/public/images/apps-intro.jpg",className:"jsx-1513705162"}),(0,p.tZ)(I.Z,{foreground:2,children:"Apps is where you can easily browse and share repls for others to run, comment, and fork."}),(0,p.tZ)(I.Z,{foreground:2,children:"Please take a moment to review our publishing guidelines and remember to be kind, constructive, and creative!"}),(0,p.BX)("a",{target:"_blank",rel:"noopener",href:"https://docs.replit.com/repls/apps-and-publishing",className:"jsx-1513705162 guidelines-link",children:[(0,p.tZ)("span",{className:"jsx-1513705162 icon-container",children:(0,p.tZ)(M.Z,{})}),"Read the publishing guidelines"]})]}),(0,p.tZ)(j.Ug,{children:(0,p.tZ)(Z.Z,{filled:!0,color:"primary",onClick:function(){return t()},children:"Continue"})}),(0,p.tZ)(o.default,{id:"1513705162",children:["img.jsx-1513705162{width:100%;border-radius:var(--border-radius-4);}",".guidelines-link.jsx-1513705162{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;padding:var(--space-8);background-color:var(--accent-primary-dimmest);color:var(--accent-primary-default);font-weight:var(--font-weight-medium);width:100%;border-radius:var(--border-radius-4);margin:var(--space-8) 0;}",".subtitle.jsx-1513705162{font-size:var(--font-size-subhead-default);color:var(--accent-primary-default);font-weight:var(--font-weight-medium);}",".icon-container.jsx-1513705162{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;margin-right:var(--space-4);}"]})]})}var Ce=n(54749);function Pe(e){var t,n,r=e.replId,i=(0,x.fNr)({variables:{replId:r},fetchPolicy:"cache-and-network"}),o=i.data,a=i.loading,s=i.error;if(a)return{loading:a,pendingChanges:null,error:null};if(s)return{loading:!1,pendingChanges:null,error:s};var c="Repl"===(null===o||void 0===o?void 0:o.repl.__typename)?o.repl:null;return c?{loading:!1,pendingChanges:(null===(t=c.deployment)||void 0===t||null===(n=t.activeRelease)||void 0===n?void 0:n.pendingChanges)||[],error:s}:{loading:!1,pendingChanges:null,error:new Error("Repl not found")}}var De=n(42409),Ie=n(5537),Te=n(11069);function _e(e){var t=a.useRef(null),n=a.useState(e.value),i=(0,r.Z)(n,2),s=i[0],c=i[1],u=a.useState(null),l=(0,r.Z)(u,2),d=l[0],g=l[1],h=(0,de.Z)({onUpload:function(t){var n=t.url;e.onChange(n)},onUploadPreview:function(e){var t=e.dataUrl;c(t)},onError:function(e){g(e.message)}});a.useEffect((function(){c(e.value)}),[e.value]);var v=null===s||void 0===s?void 0:s.startsWith("data:");return(0,p.BX)(j.gC,{spacing:"var(--space-4)",children:[(0,p.BX)("div",{onClick:function(){var e;null===(e=t.current)||void 0===e||e.click()},"aria-label":s?"Change icon":"Upload an icon","data-microtip-position":"right",role:"tooltip",className:"jsx-813239815 "+((s?"update-icon":"add-icon")||""),children:[s?(0,p.BX)(p.HY,{children:[(0,p.tZ)(f.Z,{iconUrl:s,size:32,alt:"icon"}),v?(0,p.tZ)("div",{className:"jsx-813239815 loading-state",children:(0,p.tZ)("div",{className:"jsx-813239815 loading-icon",children:(0,p.tZ)(Te.Z,{})})}):(0,p.tZ)("div",{className:"jsx-813239815 hover-state",children:(0,p.tZ)(Ie.Z,{})})]}):(0,p.tZ)(fe.Z,{}),(0,p.tZ)("input",{ref:t,accept:"image/*",type:"file",onChange:function(e){var t=e.target,n=t.validity,r=t.files;n.valid&&null!==r&&void 0!==r&&r.length&&(g(null),h.uploadImage(r[0]))},className:"jsx-813239815"})]}),d?(0,p.tZ)("div",{className:"jsx-813239815 error",children:d}):null,(0,p.tZ)(o.default,{id:"813239815",children:[".add-icon.jsx-813239815{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;border:1px dashed var(--foreground-dimmest);background-color:var(--background-root);width:".concat(32,"px;height:").concat(32,"px;}"),".add-icon.jsx-813239815:hover{color:var(--accent-primary-default);border-color:var(--accent-primary-default);}",".add-icon.jsx-813239815,.update-icon.jsx-813239815{position:relative;cursor:pointer;background-color:var(--background-higher);border-radius:var(--border-radius-4);padding:2px;}",".update-icon.jsx-813239815:hover .hover-state.jsx-813239815{opacity:0.8;}",".hover-state.jsx-813239815{opacity:0;}",".loading-state.jsx-813239815{opacity:0.8;}",".loading-icon.jsx-813239815{-webkit-animation:rotate-jsx-813239815 1s linear infinite;animation:rotate-jsx-813239815 1s linear infinite;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;}","@-webkit-keyframes rotate-jsx-813239815{from{-webkit-transform:rotate(0deg);-ms-transform:rotate(0deg);transform:rotate(0deg);}to{-webkit-transform:rotate(360deg);-ms-transform:rotate(360deg);transform:rotate(360deg);}}","@keyframes rotate-jsx-813239815{from{-webkit-transform:rotate(0deg);-ms-transform:rotate(0deg);transform:rotate(0deg);}to{-webkit-transform:rotate(360deg);-ms-transform:rotate(360deg);transform:rotate(360deg);}}",".hover-state.jsx-813239815,.loading-state.jsx-813239815{color:var(--accent-primary-default);position:absolute;top:0;left:0;width:100%;height:100%;border-radius:var(--border-radius-4);background-color:var(--background-root);overflow:hidden;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;}","input.jsx-813239815{opacity:0;position:absolute;top:0;left:0;width:100%;height:100%;z-index:-1;}",".error.jsx-813239815{font-size:var(--font-size-default);color:var(--accent-negative-default);}"]})]})}var Ae=n(98960),Re=n(75299),Ne=1e3;function Ue(e){var t=e.checked;return(0,p.BX)("div",{className:"jsx-4126375210 "+(P()({checked:t})||""),children:[(0,p.tZ)(Ae.Z,{}),(0,p.tZ)(o.default,{id:"4126375210",children:["div.jsx-4126375210{color:var(--foreground-default);border-radius:50%;background-color:var(--background-highest);display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;width:18px;height:18px;}",".checked.jsx-4126375210{background-color:var(--accent-positive-default);color:var(--white);}"]})]})}function Le(e){var t=e.completed,n=e.children;return(0,p.BX)(j.Ug,{align:"center",spacing:"4px",children:[(0,p.tZ)(Ue,{checked:t}),(0,p.tZ)(I.Z,{fontWeight:"medium",children:n})]})}var Be,Fe=["textarea.jsx-1856304805{color:var(--foreground-default);font-size:var(--font-size-default);font-family:var(--font-family-default);background-color:var(--background-root);font-family:var(--font-family-default);background-color:var(--background-root);padding:12px;display:block;min-height:60px;max-height:240px;overflow-y:scroll;width:100%;border-radius:var(--border-radius-4);border:1px solid var(--outline-dimmest);line-height:1.2em;resize:none;-webkit-transition:0.1s box-shadow,0.2s background-color,0.2s border-color;transition:0.1s box-shadow,0.2s background-color,0.2s border-color;}",".jsx-1856304805::-webkit-input-placeholder{color:var(--foreground-dimmer);}",".jsx-1856304805::-moz-placeholder{color:var(--foreground-dimmer);}",".jsx-1856304805:-ms-input-placeholder{color:var(--foreground-dimmer);}",".jsx-1856304805::placeholder{color:var(--foreground-dimmer);}","textarea.jsx-1856304805:hover{border-color:var(--accent-primary-dimmer);}","textarea.jsx-1856304805:focus,textarea.jsx-1856304805:active{outline:none;border-color:var(--accent-primary-dimmer);}","textarea.jsx-1856304805:focus{background-color:var(--background-default);color:var(--foreground-default);border-radius:var(--border-radius-4);box-shadow:var(--shadow-1);}"];function Me(e){var t=e.value,n=e.onChange,r=e.placeholder,i=(0,Re.Z)().ref;return(0,p.BX)(j.gC,{spacing:1,align:"stretch",children:[(0,p.tZ)(Le,{completed:Boolean(t),children:"Description"}),(0,p.BX)(j.gC,{spacing:1,align:"stretch",children:[(0,p.tZ)("textarea",{placeholder:r,maxLength:Ne,ref:i,value:t,onChange:function(e){var t=e.currentTarget.value;t.length>Ne||n(t)},className:"jsx-".concat(Fe.__hash)}),(0,p.BX)(I.Z,{size:"small",align:"right",foreground:2,children:[t.length,"/",Ne]})]}),(0,p.tZ)(o.default,{id:Fe.__hash,children:Fe})]})}function ze(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function He(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ze(Object(n),!0).forEach((function(t){(0,i.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ze(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Ge(e){var t=e.replId,n=e.onClick,r=Pe({replId:t}),i=r.loading,o=r.error,a=r.pendingChanges;return o?(0,p.tZ)("div",{children:o.message}):i?(0,p.tZ)(Z.Z,{disabled:!0,children:"Loading..."}):null!==a&&void 0!==a&&a.length?(0,p.tZ)(Z.Z,{onClick:n,children:"Publish Update"}):0===(null===a||void 0===a?void 0:a.length)?(0,p.tZ)("div",{children:(0,p.tZ)(Z.Z,{disabled:!0,children:"Template Published"})}):null}function Xe(e){var t=e.replId,n=e.onDone,r=(0,x.yJ4)({variables:{replId:t}}).data,i="Repl"===(null===r||void 0===r?void 0:r.repl.__typename)?r.repl:null;return i?(0,p.BX)(j.gC,{spacing:3,align:"stretch",children:[(0,p.BX)(j.gC,{spacing:1,align:"stretch",children:[(0,p.BX)("div",{className:"jsx-2372071523 confirmation-heading",children:[i.title," is published!"]}),(0,p.tZ)("div",{className:"jsx-2372071523",children:(0,p.BX)(I.Z,{foreground:2,children:["Now the community can comment, react, and find your repl on"," ",(0,p.tZ)(u.default,{as:"/templates",href:"/templates",children:(0,p.tZ)("a",{className:"jsx-2372071523",children:(0,p.tZ)("b",{className:"jsx-2372071523",children:"Templates"})})})]})})]}),(0,p.BX)(j.Ug,{justify:"end",spacing:1,children:[(0,p.tZ)(Z.Z,{onClick:n,children:"Done"}),(0,p.tZ)(u.default,He(He({},(0,G.j3)(i)),{},{children:(0,p.tZ)("a",{style:{textDecoration:"none"},className:"jsx-2372071523",children:(0,p.tZ)(Z.Z,{Icon:M.Z,color:"primary",onClick:n,children:"Spotlight page"})})}))]}),(0,p.tZ)(o.default,{id:"2372071523",children:[".confirmation-heading.jsx-2372071523{font-size:var(--font-size-header-default);font-weight:var(--font-weight-bold);color:var(--accent-positive-default);}"]})]}):null}function Ve(e){var t=e.repl,n=e.onDone,i=a.useState(null),o=(0,r.Z)(i,2),c=o[0],u=o[1],l=a.useState(t.description||""),d=(0,r.Z)(l,2),f=d[0],g=d[1],h=a.useState(t.iconUrl||null),v=(0,r.Z)(h,2),m=v[0],b=v[1];a.useEffect((function(){g(t.description||""),b(t.iconUrl||null)}),[null===t||void 0===t?void 0:t.description,null===t||void 0===t?void 0:t.iconUrl]);var y=(0,x.n7M)({onCompleted:function(e){"Repl"!==e.createReplDeployment.__typename?"UserError"===e.createReplDeployment.__typename&&u(e.createReplDeployment.message):n({didPublish:!0})},onError:function(e){s.Tb(e),u((0,w.bc)(e.message))}}),k=(0,r.Z)(y,2),E=k[0],O=k[1].loading,S=f&&m?{replId:t.id,description:f,iconUrl:m}:null,C=O||!S;return(0,p.tZ)("form",{onSubmit:function(e){e.preventDefault(),S&&E({variables:{input:S}})},children:(0,p.BX)(j.gC,{spacing:4,align:"stretch",children:[(0,p.BX)(j.gC,{spacing:2,align:"stretch",children:[(0,p.tZ)(Le,{completed:Boolean(m),children:"Icon"}),(0,p.tZ)(_e,{value:m,onChange:b})]}),(0,p.tZ)(Me,{placeholder:"Explain a little bit about what this repl is.",value:f,onChange:g}),c?(0,p.tZ)(Ye,{message:c}):null,(0,p.BX)(j.Ug,{align:"center",spacing:1,justify:"end",children:[(0,p.tZ)(Z.Z,{filled:!1,border:!1,onClick:function(){return n({didPublish:!1})},children:"Cancel"}),(0,p.tZ)(Z.Z,{color:"primary",disabled:C,type:"submit",children:O?"Publishing...":"Publish"})]})]})})}function We(e){var t=e.replId,n=e.onDone,i=a.useState(null),o=(0,r.Z)(i,2),s=o[0],c=o[1],u=Pe({replId:t}).pendingChanges,l=a.useState(""),d=(0,r.Z)(l,2),f=d[0],g=d[1],h=(0,x.ZPL)({variables:{input:{replId:t,description:f}},onCompleted:function(e){"Repl"!==e.createReplRelease.__typename?"UserError"===e.createReplRelease.__typename&&c(e.createReplRelease.message):n({didPublish:!0})}}),v=(0,r.Z)(h,2),m=v[0],b=v[1];if(!u)return null;if(!u.length)return(0,p.tZ)("div",{children:(0,p.tZ)(I.Z,{foreground:2,align:"center",children:"No changes to publish"})});var y=Boolean(f);return(0,p.BX)(j.gC,{spacing:2,align:"stretch",children:[(0,p.tZ)(le.Z,{level:3,children:"Update Template"}),(0,p.tZ)(j.gC,{spacing:"var(--space-4)",children:u.map((function(e){return(0,p.BX)(j.Ug,{spacing:"var(--space-4)",align:"center",wrap:"nowrap",children:[(0,p.tZ)("div",{children:(0,p.tZ)(De.Z,{})}),(0,p.tZ)(I.Z,{truncate:!0,children:e.fileName}),(0,p.BX)(I.Z,{foreground:3,children:["(",qe[e.changeType],")"]})]},e.fileName)}))}),(0,p.tZ)("form",{onSubmit:function(e){e.preventDefault(),y&&!b.loading&&(c(null),m())},children:(0,p.BX)(j.gC,{spacing:2,align:"stretch",children:[(0,p.tZ)(Me,{placeholder:"Explain a little about this update.",value:f,onChange:g}),s?(0,p.tZ)(Ye,{message:s}):null,(0,p.BX)(j.Ug,{align:"center",spacing:1,justify:"end",children:[(0,p.tZ)(Z.Z,{filled:!1,border:!1,onClick:function(){return n({didPublish:!1})},children:"Cancel"}),(0,p.tZ)(Z.Z,{color:"primary",disabled:!y,type:"submit",children:b.loading?"Updating...":"Publish update"})]})]})})]})}function Ye(e){var t=e.message;return(0,p.tZ)(I.Z,{style:{color:"red"},children:t})}Fe.__hash="1856304805";var qe=(Be={},(0,i.Z)(Be,x.J53.NewFile,"new"),(0,i.Z)(Be,x.J53.ModfiedFile,"changed"),(0,i.Z)(Be,x.J53.DeletedFile,"deleted"),Be),Je=n(34152);function Ke(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function $e(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ke(Object(n),!0).forEach((function(t){(0,i.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ke(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Qe(){return(0,p.BX)("a",{target:"_blank",href:"https://docs.replit.com/repls/apps-and-publishing",rel:"noopener",className:"jsx-1213407808 guidelines-link",children:[(0,p.tZ)("span",{className:"jsx-1213407808 icon-container",children:(0,p.tZ)(M.Z,{})}),"Guidelines",(0,p.tZ)(o.default,{id:"1213407808",children:[".guidelines-link.jsx-1213407808{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;padding:var(--space-8);background-color:var(--accent-primary-dimmest);color:var(--accent-primary-default);font-weight:var(--font-weight-medium);font-size:var(--font-size-small);border-radius:var(--border-radius-4);margin:var(--space-8) 0;}",".icon-container.jsx-1213407808{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;margin-right:var(--space-4);}"]})]})}function et(e){var t=e.value,n=e.onChange,i=e.title,s=a.useRef(null),c=a.useState(!1),u=(0,r.Z)(c,2),l=u[0],d=u[1],f=a.useState(null),g=(0,r.Z)(f,2),h=g[0],v=g[1],m=a.useState(t),b=(0,r.Z)(m,2),y=b[0],w=b[1],x=(0,de.Z)({onUpload:function(e){var t=e.url;n(t)},onUploadPreview:function(e){var t=e.dataUrl;w(t)},onError:function(e){v(e.message)}});a.useEffect((function(){w(t)}),[t]);return(0,p.BX)(j.gC,{spacing:2,align:"stretch",children:[(0,p.tZ)(Le,{completed:Boolean(t),children:"Cover image"}),(0,p.BX)("div",{onDragOver:function(e){e.preventDefault(),d(!0)},onDrop:function(e){var t,n;e.preventDefault();var r=null===(t=e.dataTransfer)||void 0===t||null===(n=t.files)||void 0===n?void 0:n[0];r&&(r.type.startsWith("image/")?(v(null),x.uploadImage(r)):v("Expected an image file"))},className:"jsx-4015375041 "+(P()("drop-area",{"is-dragging-over":l})||""),children:[y?(0,p.tZ)("div",{className:"jsx-4015375041 image-wrap",children:(0,p.tZ)("img",{src:y,alt:i,className:"jsx-4015375041"})}):null,y?null:(0,p.tZ)("div",{className:"jsx-4015375041 cta-content-wrap",children:(0,p.BX)(j.gC,{spacing:2,align:"center",children:[(0,p.tZ)("span",{className:"jsx-4015375041 upload-icon",children:(0,p.tZ)(fe.Z,{})}),(0,p.tZ)(I.Z,{fontWeight:"bold",foreground:2,children:"Drag and drop a cover image"}),(0,p.tZ)(Z.Z,{onClick:function(){s.current&&s.current.click()},filled:!1,border:!1,color:"primary",children:"Or select a file"})]})}),y?(0,p.tZ)("div",{className:"jsx-4015375041 image-controls",children:(0,p.BX)(j.gC,{spacing:1,align:"end",children:[(0,p.tZ)(Z.Z,{onClick:function(e){e.stopPropagation(),s.current&&s.current.click()},children:"Change"}),h?(0,p.tZ)("div",{className:"jsx-4015375041 error",children:h}):null]})}):null,!y&&h?(0,p.tZ)("div",{className:"jsx-4015375041 error fixed",children:h}):null,(0,p.tZ)("input",{ref:s,accept:"image/*",type:"file",onChange:function(e){var t=e.target,n=t.validity,r=t.files;n.valid&&null!==r&&void 0!==r&&r.length&&(v(null),x.uploadImage(r[0]))},className:"jsx-4015375041"})]}),(0,p.tZ)(o.default,{id:"4015375041",children:[".drop-area.jsx-4015375041{position:relative;background-color:var(--background-root);height:300px;border:1px dashed var(--foreground-dimmest);border-radius:var(--border-radius-4);display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;}",".is-dragging-over.jsx-4015375041 .upload-icon.jsx-4015375041{-webkit-transform:scale(1.1);-ms-transform:scale(1.1);transform:scale(1.1);color:var(--accent-primary-default);}",".upload-icon.jsx-4015375041{color:var(--foreground-dimmer);-webkit-transition:-webkit-transform 100ms ease-out;-webkit-transition:transform 100ms ease-out;transition:transform 100ms ease-out;}",".upload-icon.jsx-4015375041 svg{height:auto;width:48px;}",".image-controls.jsx-4015375041{position:absolute;top:var(--space-8);right:var(--space-8);}","input.jsx-4015375041{width:0.1px;height:0.1px;opacity:0;overflow:hidden;position:absolute;z-index:-1;}","img.jsx-4015375041{position:absolute;top:0;left:0;width:100%;height:100%;object-fit:cover;border-radius:var(--border-radius-4);}",".error.jsx-4015375041{padding:var(--space-16);text-align:right;font-size:var(--font-size-default);color:var(--accent-negative-default);background-color:rgba(0,0,0,0.8);}",".error.fixed.jsx-4015375041{position:absolute;top:var(--space-8);right:var(--space-8);}"]})]})}var tt;function nt(e){var t=e.replId,n=e.onDone,r=(0,x.ouc)({variables:{replId:t}}).data,i="Repl"===(null===r||void 0===r?void 0:r.repl.__typename)?r.repl:null;return i?(0,p.BX)(j.gC,{spacing:3,align:"stretch",children:[(0,p.BX)(j.gC,{spacing:1,align:"stretch",children:[(0,p.BX)("div",{className:"jsx-2372071523 confirmation-heading",children:[i.title," is published!"]}),(0,p.tZ)("div",{className:"jsx-2372071523",children:(0,p.BX)(I.Z,{foreground:2,children:["Now the community can comment, react, and find your repl on"," ",(0,p.tZ)(u.default,{as:"/apps",href:"/apps",children:(0,p.tZ)("a",{className:"jsx-2372071523",children:(0,p.tZ)("b",{className:"jsx-2372071523",children:"Apps"})})})]})})]}),(0,p.BX)(j.Ug,{justify:"end",spacing:1,children:[(0,p.tZ)(Z.Z,{onClick:n,children:"Done"}),(0,p.tZ)(u.default,$e($e({},(0,G.j3)(i)),{},{children:(0,p.tZ)("a",{style:{textDecoration:"none"},className:"jsx-2372071523",children:(0,p.tZ)(Z.Z,{Icon:M.Z,color:"primary",onClick:n,children:"Spotlight page"})})}))]}),(0,p.tZ)(o.default,{id:"2372071523",children:[".confirmation-heading.jsx-2372071523{font-size:var(--font-size-header-default);font-weight:var(--font-weight-bold);color:var(--accent-positive-default);}"]})]}):null}function rt(e){var t,n=e.repl,i=e.source,o=e.onDone,c=e.initialTags,u=void 0===c?[]:c,l=(0,O.Z)().showError,d=a.useState(n.description||""),f=(0,r.Z)(d,2),g=f[0],h=f[1],v=a.useState(n.imageUrl||null),b=(0,r.Z)(v,2),y=b[0],k=b[1],E=a.useState((function(){var e=n.tags.length?n.tags:[{id:n.lang.tagName,replCount:0}];return[].concat((0,ue.Z)(u),(0,ue.Z)(e)).slice(0,5)})),S=(0,r.Z)(E,2),C=S[0],P=S[1],T=a.useState(!1!==(null===(t=n.commentSettings)||void 0===t?void 0:t.enabled)),_=(0,r.Z)(T,2),A=_[0],R=_[1];a.useEffect((function(){var e;h(n.description||""),k(n.imageUrl||null),P(n.tags.length?n.tags:[{id:n.lang.tagName,replCount:0}]),R(!1!==(null===(e=n.commentSettings)||void 0===e?void 0:e.enabled))}),[n]);var N=(0,x.nkF)({onCompleted:function(e){if("Repl"===e.publishRepl.__typename)return(0,m.track)(m.events.POST_MADE,{source:i,isPublish:!0,title:e.publishRepl.title,description:e.publishRepl.description,isRemixed:Boolean(e.publishRepl.origin&&e.publishRepl.origin.publishedAs!==x.O2h.Template),coverImage:!!e.publishRepl.imageUrl}),void o({didPublish:!0});"UserError"===e.publishRepl.__typename&&l(e.publishRepl.message)},onError:function(e){s.Tb(e),l((0,w.bc)(e.message))}}),U=(0,r.Z)(N,2),L=U[0],B=U[1].loading,F=g&&y&&C.length>=1&&C.length<=5?{replTitle:n.title,replId:n.id,description:g,imageUrl:y,enableComments:A,tags:C.map((function(e){return e.id}))}:null,M=B||!F;return(0,p.tZ)("form",{onSubmit:function(e){e.preventDefault(),F&&L({variables:{input:F}})},children:(0,p.BX)(j.gC,{spacing:4,align:"stretch",children:[(0,p.tZ)(Me,{placeholder:"Explain a little bit about what this repl is.",value:g,onChange:h}),(0,p.tZ)(et,{value:y,onChange:k,title:n.title}),(0,p.BX)(j.gC,{spacing:1,align:"stretch",children:[(0,p.BX)(Le,{completed:C.length>=1,children:["Tags"," ",C.length?(0,p.tZ)(I.Z,{foreground:2,children:C.length}):null]}),(0,p.tZ)(Ze,{replId:n.id,initialTags:C,onChange:P,max:5}),(0,p.BX)(I.Z,{size:"small",foreground:2,children:[C.length<1?(0,p.BX)(p.HY,{children:["Add at least ",(0,p.tZ)("b",{children:1})," ",(0,be.Z)("tag",1)]}):null,C.length>=1&&C.length<5?(0,p.BX)(p.HY,{children:["Add up to ",(0,p.tZ)("b",{children:5-C.length})," more"," ",(0,be.Z)("tag",5-C.length)]}):null,5===C.length?(0,p.tZ)(p.HY,{children:"You have added the maximum number of tags"}):null]})]}),(0,p.BX)(j.Ug,{align:"center",spacing:2,justify:"space-between",children:[(0,p.tZ)(I.Z,{children:"Allow comments"}),(0,p.tZ)(D.Z,{isOn:A,onChange:function(){return R((function(e){return!e}))}})]}),(0,p.BX)(j.Ug,{align:"center",spacing:1,justify:"end",children:[(0,p.tZ)(Z.Z,{filled:!1,border:!1,onClick:function(){return o({didPublish:!1})},children:"Cancel"}),(0,p.tZ)(Z.Z,{color:"primary",disabled:M,type:"submit",children:B?"Publishing...":(0,p.BX)(p.HY,{children:["Publish",n.lastPublishedAt?" update":""]})})]})]})})}function it(e){var t=e.replId,n=e.replUrl,i=e.onDone,o=e.initialTags,s=e.source,c=(0,x.ouc)({variables:{replId:t,replUrl:n}}).data,l=a.useState(tt.Community),d=(0,r.Z)(l,2),f=d[0],g=d[1],h="Repl"===(null===c||void 0===c?void 0:c.repl.__typename)?c.repl:null,v=null===c||void 0===c?void 0:c.currentUser;if(!h||!v)return(0,p.tZ)("div",{children:"Loading..."});if(h.publishedAs===x.O2h.Template)return(0,p.tZ)(We,{replId:h.id,onDone:function(e){var t=e.didPublish;return i({kind:tt.Template,didPublish:t})}});var m=[tt.Community,tt.Template];return h?(0,p.BX)(j.gC,{spacing:2,align:"stretch",children:[v.isTemplateDeveloper&&!h.publishedAs?(0,p.tZ)("div",{style:{padding:"16px 16px 0 16px"},children:(0,p.tZ)(oe.Z,{options:m,onChange:function(e){return g(m[e])},selectedOption:m.indexOf(f)})}):null,f===tt.Community?(0,p.tZ)(Je.Z,{replId:t}):null,f===tt.App?(0,p.BX)(j.gC,{spacing:4,align:"stretch",children:[(0,p.BX)(j.gC,{spacing:1,align:"stretch",children:[(0,p.BX)(j.Ug,{align:"center",justify:"space-between",children:[(0,p.BX)(le.Z,{level:3,children:["Publish",h.lastPublishedAt?" update":""]}),(0,p.tZ)(Qe,{})]}),(0,p.tZ)("div",{children:(0,p.BX)(I.Z,{tag:"div",foreground:2,children:["Publishing lets other people find your repl on"," ",(0,p.tZ)(u.default,{as:"/apps",href:"/apps",children:(0,p.tZ)("a",{target:"_blank",children:"Apps"})})]})})]}),(0,p.tZ)(rt,{initialTags:o,repl:h,onDone:function(e){var t=e.didPublish;i({didPublish:t,kind:tt.App})},source:s})]}):null,f!==tt.Template||h.publishedAs?null:(0,p.tZ)(Ve,{source:s,repl:h,onDone:function(e){var t=e.didPublish;i({didPublish:t,kind:tt.Template})}})]}):null}function ot(e){var t=e.replId,n=e.onDone,r=e.source,i=(0,Ce.Z)("publish","publish-guidelines"),o=i.shouldDisplay,s=i.register,c=i.dismiss;return a.useEffect((function(){s()}),[s]),(0,p.tZ)(p.HY,{children:o?(0,p.tZ)(Se,{onContinue:c}):(0,p.tZ)(it,{replId:t,source:r,onDone:n})})}!function(e){e.Community="Community",e.Template="Template",e.App="App"}(tt||(tt={}));var at=n(7785);function st(e){var t=e.onUnboost,n=e.hideModal;return(0,p.BX)("div",{className:"jsx-4045367983 wrap",children:[(0,p.tZ)("div",{className:"jsx-4045367983 title",children:"Unboost Repl"}),(0,p.tZ)("div",{className:"jsx-4045367983 text",children:"Are you sure you want to unboost your repl? This will downgrade your repl to a less powerful machine."}),(0,p.BX)(j.Ug,{spacing:1,justify:"end",children:[(0,p.tZ)(Z.Z,{onClick:n,autoFocus:!0,children:"Cancel"}),(0,p.tZ)(Z.Z,{color:"negative",onClick:function(){t(),n()},children:"Confirm"})]}),(0,p.tZ)(o.default,{id:"4045367983",children:[".wrap.jsx-4045367983{background-color:var(--background-default);border-radius:var(--border-radius-4);color:var(--foreground-default);}",".title.jsx-4045367983{color:var(--accent-negative-default);}",".wrap.jsx-4045367983{display:grid;grid-row-gap:25px;}",".title.jsx-4045367983{font-size:var(--font-size-subhead-big);}",".text.jsx-4045367983{margin-bottom:5px;}","@media screen and (min-width:600px){.wrap.jsx-4045367983{padding:75px 50px 75px;}}"]})]})}var ct,ut,lt=n(61357),dt=n(87293),ft=n(73561),pt=n(60461),gt=n(45378),ht=n(96915),vt=n(16729);function mt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function bt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?mt(Object(n),!0).forEach((function(t){(0,i.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):mt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function yt(e){var t=e.user;return(0,p.BX)(p.HY,{children:[t?(0,p.tZ)(u.default,bt(bt({},(0,c.Ru)(t)),{},{children:(0,p.tZ)("a",{onClick:function(e){e.stopPropagation()},className:o.default.dynamic([["275873743",[d.j.tabletMax]]])+" icon",children:(0,p.tZ)(pt.Z,{src:t.image,alt:t.username,size:32})})})):(0,p.tZ)("div",{className:o.default.dynamic([["275873743",[d.j.tabletMax]]])+" icon",children:(0,p.tZ)(l.Z,{size:"inherit"})}),(0,p.tZ)(o.default,{id:"275873743",dynamic:[d.j.tabletMax],children:[".icon.__jsx-style-dynamic-selector{display:none;}","@media screen and (min-width:".concat(d.j.tabletMax,"px){.icon.__jsx-style-dynamic-selector{display:block;}}")]})]})}function wt(e){var t=e.isPrivate,n=e.isSelected,r=t?se.Z:ae.Z,i=t?"Private":"Public",o=n?1:2;return(0,p.BX)(j.Ug,{align:"center",justify:"center",spacing:1,children:[(0,p.tZ)(j.Ug,{align:"center",justify:"center",children:(0,p.tZ)(r,{})}),(0,p.tZ)(I.Z,{truncate:!0,foreground:o,align:"center",size:"small",children:i})]})}function xt(e){var t=e.repl,n=e.refetch,i=e.onUpdateRepl,s=e.showInModal,c=a.useState(!1),u=(0,r.Z)(c,2),l=u[0],d=u[1],f=null;if(l){var g=(0,p.tZ)(Et,{setIsEditing:d,repl:t,refetch:n,onUpdateRepl:i});f=s?(0,p.tZ)(U.Z,{isOpen:!0,onRequestClose:function(){return d(!1)},children:g}):(0,p.tZ)(kt,{children:g})}return(0,p.BX)("div",{className:"jsx-3335883948 repl-info",children:[(0,p.BX)("div",{onClick:function(){d(!l)},className:"jsx-3335883948 repl-info-click-area",children:[(0,p.tZ)(yt,{user:t.user}),(0,p.tZ)(v,{repl:t}),t.isAlwaysOn&&(0,p.tZ)("div",{"aria-label":"Always on","data-microtip-position":"bottom",role:"tooltip",className:"jsx-3335883948 always-on-indicator"})]}),f,(0,p.tZ)(o.default,{id:"3335883948",children:[".repl-info.jsx-3335883948{position:relative;}",".repl-info-click-area.jsx-3335883948{cursor:pointer;display:grid;grid-auto-flow:column;grid-column-gap:var(--space-8);-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;padding:var(--space-4);color:var(--foreground-dimmer);border-radius:var(--border-radius-4);border:1px solid transparent;}",".repl-info-click-area.jsx-3335883948:hover{border:1px solid var(--background-highest);}"]})]})}function kt(e){var t=e.children;return(0,p.BX)(p.HY,{children:[(0,p.tZ)("div",{className:o.default.dynamic([["784036774",[d.j.mobileMax]]])+" click-blanket"}),(0,p.tZ)("div",{className:o.default.dynamic([["784036774",[d.j.mobileMax]]])+" edit-repl",children:t}),(0,p.tZ)(o.default,{id:"784036774",dynamic:[d.j.mobileMax],children:[".edit-repl.__jsx-style-dynamic-selector{background-color:var(--background-default);border:1px solid var(--background-higher);color:var(--foreground-default);border-radius:var(--border-radius-4);box-shadow:var(--shadow-1);z-index:10000;position:absolute;left:0;top:calc(100% + var(--space-8));max-width:460px;width:64vw;max-height:calc(100vh - calc(100% + var(--space-8)));overflow-y:auto;overflow-x:hidden;}",".edit-repl.__jsx-style-dynamic-selector .list-wrapper{z-index:1;top:var(--space-24);left:var(--space-8);}",".click-blanket.__jsx-style-dynamic-selector{cursor:pointer;position:absolute;top:0;left:0;width:100%;height:100%;}","@media screen and (max-width:".concat(d.j.mobileMax,"px){.edit-repl.__jsx-style-dynamic-selector{width:80vw;}}")]})]})}function Et(e){var t,n=e.repl,i=e.onUpdateRepl,c=e.setIsEditing,l=(0,y.useRouter)(),f=a.useState(!1),g=(0,r.Z)(f,2),h=g[0],v=g[1],C=a.useState(null),P=(0,r.Z)(C,2),D=P[0],T=P[1],_=a.useState(n.isBoosted),A=(0,r.Z)(_,2),R=A[0],X=A[1],V=a.useState(n.isRenamed?n.title:""),W=(0,r.Z)(V,2),Y=W[0],q=W[1],J=a.useState(n.description||""),K=(0,r.Z)(J,2),$=K[0],ee=K[1],te=a.useState(n.rawTemplateLabel),ne=(0,r.Z)(te,2),re=ne[0],ie=ne[1],ae=a.useState(null),ue=(0,r.Z)(ae,2),le=ue[0],de=ue[1],pe=(0,O.Z)().showError;a.useEffect((function(){ee(n.description||"")}),[n.description]);var ge=(0,at.Z)(),he=a.useRef(n),ve=(0,x.ap1)({variables:{id:n.id},onCompleted:function(){return l.push("/home","/~")},update:(0,b.t)({id:n.id}),onError:function(e){return pe((0,w.bc)(e.message))}}),me=(0,r.Z)(ve,1)[0],be=(0,x.vib)({onError:function(e){return pe((0,w.bc)(e.message))},onCompleted:function(e){var t=e.updateRepl.repl,r=he.current,o={};r.description!==t.description&&(o.description=t.description),r.title!==t.title&&(o.title=t.title),r.url!==t.url&&(o.url=t.url),r.isRenamed!==t.isRenamed&&(o.isRenamed=!!t.isRenamed),he.current=n,Object.keys(o).length>0&&(i(o),c(!1))}}),ye=(0,r.Z)(be,1)[0],we=(0,ft.Z)(),xe=(0,r.Z)(we,2),ke=xe[0],Ee=xe[1].loading,Oe=(0,x.prL)({onCompleted:function(e){ge.current&&("UserError"===e.setAlwaysOn.__typename?de(e.setAlwaysOn.message):de(null))},onError:function(e){return pe((0,w.bc)(e.message))}}),je=(0,r.Z)(Oe,2),Ze=je[0],Se=je[1].loading,Ce=(0,x.BjH)({variables:{replId:n.id},onCompleted:function(e){var t=e.boostRepl;"UserError"!==t.__typename?(Q(n.id).catch((function(e){s.Tb(e),ge.current&&de("Something went wrong when boosting your repl. Please refresh or try again.")})),ge.current&&(de(null),X(!0))):ge.current&&de(t.message)},onError:function(e){s.Tb(e),pe((0,w.bc)(e.message))}}),Pe=(0,r.Z)(Ce,2),De=Pe[0],Ie=Pe[1].loading,Te=n.currentUserPermissions.publish,Ae=(0,x.m9A)({variables:{input:{replId:n.id}},onError:function(e){s.Tb(e),pe((0,w.bc)(e.message))}}),Re=(0,r.Z)(Ae,2),Ue=Re[0],Le=Re[1],Be=(0,x.gFT)({variables:{input:{replId:n.id}},onError:function(e){s.Tb(e),pe((0,w.bc)(e.message))}}),Fe=(0,r.Z)(Be,2),Me=Fe[0],ze=Fe[1],He=(0,x.cry)({variables:{replId:n.id},onCompleted:function(e){var t=e.unboostRepl;"UserError"!==t.__typename?(Q(n.id).catch((function(e){s.Tb(e),ge.current&&de("Something went wrong when unboosting your repl. Please refresh or try again.")})),ge.current&&(de(null),X(!1))):de(t.message)},onError:function(e){s.Tb(e),pe((0,w.bc)(e.message))}}),Ve=(0,r.Z)(He,2),Ye=Ve[0],qe=Ve[1].loading,Je=a.useMemo((function(){return!(!Y||Y===n.title)||(re!==n.rawTemplateLabel||!(""===$&&!n.description)&&$!==n.description)}),[n,Y,$,re]),Ke=a.useCallback((function(){if(Je){var e={id:n.id,title:Y||n.title,description:$,templateLabel:n.currentUserPermissions.changeTemplateLabel?re:void 0};ye({variables:{input:e}})}}),[Je,ye,n,Y,$,re]),$e=h||null!==D||Ee,Qe=(0,F.Z)((function(){$e||(Je?Ke():c(!1))}),[$e,Je,Ke]),et=a.useContext(gt.G).usesDigitalGoodsService,rt=function(){Ie||qe||(R?Ye():De())},pt=n.isRenamed?"name your repl":"default name: ".concat(n.title),mt=[x.Sy.Submit,x.Sy.PublishTemplate,x.Sy.EditTemplate].includes(n.workspaceCta),yt=[];n.currentUserPermissions.fork&&yt.push({value:ct.Fork,label:"Fork",icon:(0,p.tZ)(dt.Z,{})}),Te&&yt.unshift({value:ct.Spotlight,label:"Spotlight",link:(0,G.j3)(n),icon:(0,p.tZ)(M.Z,{})}),n.publishedAs===x.O2h.App&&Te&&yt.push({value:ct.Unpublish,label:"Unpublish",icon:(0,p.tZ)(ce.Z,{})}),n.publishedAs===x.O2h.Template&&Te&&yt.push({value:ct.UnpublishTemplate,label:"Unpublish template",icon:(0,p.tZ)(ce.Z,{})}),n.currentUserPermissions.delete&&yt.push({isDestructive:!0,value:ct.Delete,label:"Delete",icon:(0,p.tZ)(S.Z,{})});var xt=n.currentUserPermissions.changePrivacy===x.HA$.SubscriptionRequired,kt=n.currentUserPermissions.changeAlwaysOn===x.fnM.SubscriptionRequired,Et=xt?"Get access to Private repls, Always On, and Boosts.":"Get access to Always On and Boosts.";return(0,p.BX)("div",{ref:Qe,className:o.default.dynamic([["2408243813",[n.currentUserPermissions.changeDescription?"auto":"not-allowed",xt?"var(--background-root)":"var(--background-default)",xt?"none":"auto",xt?.5:1,xt?"not-allowed":"pointer",kt?"var(--background-root)":"var(--background-default)",d.j.mobileMax]]])+" repl-info-form",children:[(0,p.tZ)("form",{onSubmit:function(e){e.preventDefault(),Ke()},className:o.default.dynamic([["2408243813",[n.currentUserPermissions.changeDescription?"auto":"not-allowed",xt?"var(--background-root)":"var(--background-default)",xt?"none":"auto",xt?.5:1,xt?"not-allowed":"pointer",kt?"var(--background-root)":"var(--background-default)",d.j.mobileMax]]]),children:(0,p.BX)(j.gC,{wrap:"nowrap",spacing:2,align:"stretch",children:[(0,p.BX)(j.gC,{wrap:"nowrap",spacing:"4px",align:"stretch",children:[(0,p.BX)(j.Ug,{spacing:1,align:"center",justify:"space-between",children:[(0,p.BX)("div",{className:o.default.dynamic([["2408243813",[n.currentUserPermissions.changeDescription?"auto":"not-allowed",xt?"var(--background-root)":"var(--background-default)",xt?"none":"auto",xt?.5:1,xt?"not-allowed":"pointer",kt?"var(--background-root)":"var(--background-default)",d.j.mobileMax]]]),children:[n.publishedAs===x.O2h.Template&&Te?(0,p.tZ)(Ge,{onClick:function(){return T(ut.PublishTemplateUpdate)},replId:n.id}):null,!n.isRenamed&&Te?(0,p.tZ)("div",{"data-microtip-position":"right","aria-label":"Name your repl to publish",role:"tooltip",className:o.default.dynamic([["2408243813",[n.currentUserPermissions.changeDescription?"auto":"not-allowed",xt?"var(--background-root)":"var(--background-default)",xt?"none":"auto",xt?.5:1,xt?"not-allowed":"pointer",kt?"var(--background-root)":"var(--background-default)",d.j.mobileMax]]]),children:(0,p.tZ)(Z.Z,{Icon:fe.Z,color:"primary",disabled:!0,children:"Publish"})}):null,n.isRenamed&&Te?(0,p.tZ)(Z.Z,{Icon:fe.Z,color:"primary",onClick:function(){return T(ut.Community)},children:"Publish"}):null,Te?null:(0,p.tZ)(u.default,bt(bt({},(0,G.j3)(n)),{},{children:(0,p.tZ)("a",{style:{textDecoration:"none"},className:o.default.dynamic([["2408243813",[n.currentUserPermissions.changeDescription?"auto":"not-allowed",xt?"var(--background-root)":"var(--background-default)",xt?"none":"auto",xt?.5:1,xt?"not-allowed":"pointer",kt?"var(--background-root)":"var(--background-default)",d.j.mobileMax]]]),children:(0,p.tZ)(Z.Z,{Icon:M.Z,color:"primary",className:"spotlight-button",children:"Spotlight page"})})}))]}),(0,p.tZ)(lt.Z,{items:yt,onItemClick:function(e){switch(e.value){case ct.Unpublish:return void T(ut.UnpublishApp);case ct.UnpublishTemplate:return void T(ut.UnpublishTemplate);case ct.Fork:return void T(ut.ForkRepl);case ct.Delete:T(ut.DeleteRepl)}},onOpenChange:v})]}),n.lastPublishedAt&&Te?(0,p.BX)(I.Z,{size:"small",foreground:3,children:["Last published on"," ",new Date(n.lastPublishedAt).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})]}):null]}),n.currentUserPermissions.changeIconUrl&&n.publishedAs===x.O2h.Template?(0,p.tZ)(_e,{value:n.iconUrl,onChange:function(e){return ye({variables:{input:{id:n.id,iconUrl:e}},optimisticResponse:{updateRepl:{__typename:"UpdateReplPayload",repl:bt(bt({},n),{},{iconUrl:e})}}})}}):null,(0,p.BX)(j.gC,{wrap:"nowrap",align:"end",children:[(0,p.tZ)(k.ZP,{style:{cursor:n.currentUserPermissions.changeTitle?"auto":"not-allowed"},disabled:!n.currentUserPermissions.changeTitle,maxLength:60,placeholder:pt,value:Y,onChange:function(e){return q(e.target.value)},spellCheck:!1}),(0,p.tZ)(E,{maxLength:60,value:Y,hideLabel:!0})]}),(0,p.BX)(j.gC,{wrap:"nowrap",align:"end",children:[(0,p.tZ)("textarea",{onKeyDown:function(e){13===e.keyCode&&(e.ctrlKey||e.metaKey)},disabled:!n.currentUserPermissions.changeDescription,maxLength:Ne,value:$,onChange:function(e){return ee(e.target.value)},placeholder:"What does this repl do?",className:o.default.dynamic([["2408243813",[n.currentUserPermissions.changeDescription?"auto":"not-allowed",xt?"var(--background-root)":"var(--background-default)",xt?"none":"auto",xt?.5:1,xt?"not-allowed":"pointer",kt?"var(--background-root)":"var(--background-default)",d.j.mobileMax]]])}),(0,p.tZ)(E,{maxLength:Ne,value:$,hideLabel:!0})]}),n.currentUserPermissions.changeTemplateLabel&&(0,p.tZ)(z.Z,{css:[H.l0.p(8),H.l0.borderRadius(8),"",""],children:(0,p.BX)(j.gC,{wrap:"nowrap",spacing:1,children:[(0,p.BX)(j.Ug,{spacing:1,children:[(0,p.tZ)(se.Z,{}),(0,p.tZ)(I.Z,{children:"Template Label"})]}),(0,p.tZ)(k.ZP,{value:re,maxLength:60,placeholder:"Template Label",spellCheck:!1,onChange:function(e){return ie(e.target.value)}})]})})]})}),mt?null:(0,p.BX)(p.HY,{children:[kt&&(0,p.tZ)("div",{className:o.default.dynamic([["2408243813",[n.currentUserPermissions.changeDescription?"auto":"not-allowed",xt?"var(--background-root)":"var(--background-default)",xt?"none":"auto",xt?.5:1,xt?"not-allowed":"pointer",kt?"var(--background-root)":"var(--background-default)",d.j.mobileMax]]]),children:et?(0,p.BX)(j.gC,{justify:"center",align:"center",style:{paddingBottom:"var(--space-16)"},children:[(0,p.tZ)(I.Z,{foreground:3,children:Et}),(0,p.BX)(I.Z,{foreground:3,children:["Go to"," ",(0,p.tZ)("a",{href:"https://replit.com/site/pricing",target:"_blank",className:o.default.dynamic([["2408243813",[n.currentUserPermissions.changeDescription?"auto":"not-allowed",xt?"var(--background-root)":"var(--background-default)",xt?"none":"auto",xt?.5:1,xt?"not-allowed":"pointer",kt?"var(--background-root)":"var(--background-default)",d.j.mobileMax]]]),children:"replit.com"})," ","to upgrade your account."]})]}):(0,p.BX)(p.HY,{children:[(0,p.tZ)("div",{className:o.default.dynamic([["2408243813",[n.currentUserPermissions.changeDescription?"auto":"not-allowed",xt?"var(--background-root)":"var(--background-default)",xt?"none":"auto",xt?.5:1,xt?"not-allowed":"pointer",kt?"var(--background-root)":"var(--background-default)",d.j.mobileMax]]])+" upgrade-button-container",children:(0,p.tZ)(Z.Z,{textColor:"white",backgroundColor:"var(--accent-primary-default)",fullWidth:!0,onClick:function(){(0,m.track)(m.events.UPGRADE_SELECTED,{source:"inline",planID:"hacker"}),T(ut.SubscribeUser)},children:"Upgrade to Hacker"})}),(0,p.tZ)("div",{className:o.default.dynamic([["2408243813",[n.currentUserPermissions.changeDescription?"auto":"not-allowed",xt?"var(--background-root)":"var(--background-default)",xt?"none":"auto",xt?.5:1,xt?"not-allowed":"pointer",kt?"var(--background-root)":"var(--background-default)",d.j.mobileMax]]])+" upgrade-text-container",children:(0,p.tZ)(I.Z,{foreground:3,children:Et})})]})}),(0,p.BX)(j.gC,{className:"hacker-features-container",children:[n.currentUserPermissions.changePrivacy!==x.HA$.Disallowed&&(0,p.tZ)("div",{className:o.default.dynamic([["2408243813",[n.currentUserPermissions.changeDescription?"auto":"not-allowed",xt?"var(--background-root)":"var(--background-default)",xt?"none":"auto",xt?.5:1,xt?"not-allowed":"pointer",kt?"var(--background-root)":"var(--background-default)",d.j.mobileMax]]])+" edit-repl-privacy",children:(0,p.tZ)(oe.Z,{options:[(0,p.tZ)(wt,{isPrivate:!1,isSelected:!n.isPrivate}),(0,p.tZ)(wt,{isPrivate:!0,isSelected:n.isPrivate})],selectedOption:n.isPrivate?1:0,onChange:function(){return ye({variables:{input:{id:n.id,isPrivate:!n.isPrivate}},optimisticResponse:{updateRepl:{__typename:"UpdateReplPayload",repl:bt(bt({},n),{},{isPrivate:!n.isPrivate})}}})},width:"100%"})}),n.currentUserPermissions.changeAlwaysOn!==x.fnM.Disallowed&&(0,p.BX)("div",{className:o.default.dynamic([["2408243813",[n.currentUserPermissions.changeDescription?"auto":"not-allowed",xt?"var(--background-root)":"var(--background-default)",xt?"none":"auto",xt?.5:1,xt?"not-allowed":"pointer",kt?"var(--background-root)":"var(--background-default)",d.j.mobileMax]]])+" set-always-online",children:[(0,p.tZ)(N,{alwaysOn:n.isAlwaysOn,isBoosted:R,onChange:function(){if(!Se){var e=!n.isAlwaysOn;Ze({variables:{replId:n.id,enabled:e},optimisticResponse:{setAlwaysOn:bt(bt({__typename:"Repl"},n),{},{isAlwaysOn:e})}})}},onBoostChange:rt,needsUpgrade:kt,onUpgrade:function(){return T(ut.SubscribeUser)},onUnboostClick:function(){return T(ut.UnboostRepl)}}),le&&(0,p.tZ)("div",{className:o.default.dynamic([["2408243813",[n.currentUserPermissions.changeDescription?"auto":"not-allowed",xt?"var(--background-root)":"var(--background-default)",xt?"none":"auto",xt?.5:1,xt?"not-allowed":"pointer",kt?"var(--background-root)":"var(--background-default)",d.j.mobileMax]]])+" always-on-boost-error-container",children:(0,p.tZ)(I.Z,{size:"small",children:le})})]})]})]}),(0,p.tZ)(U.Z,{isOpen:D===ut.DeleteRepl,onRequestClose:function(){return T(null)},children:(0,p.tZ)(L.Z,{delete:me,entityType:"Repl",hideModal:function(){return T(null)}})}),(0,p.tZ)(U.Z,{isOpen:D===ut.UnboostRepl,onRequestClose:function(){return T(null)},children:(0,p.tZ)(st,{onUnboost:rt,hideModal:function(){return T(null)}})}),(0,p.tZ)(U.Z,{isOpen:D===ut.ForkRepl,onRequestClose:function(){return T(null)},children:(0,p.tZ)(vt.Z,{onFork:function(e,t){ke({originId:n.id,teamId:e,title:t,forkToPersonal:!e,trackingData:{forkSource:"editReplPopoverMenuItem"}}),(0,m.track)(m.events.REPLS_REPL_SELF_FORKED,{replId:n.id})},initialValue:n.title,hideModal:function(){return T(null)},teamContext:null===(t=n.user)||void 0===t?void 0:t.username})}),(0,p.tZ)(B.Z,{isOpen:D===ut.SubscribeUser,onClose:function(){return T(null)},trackingInfo:{context:"workspace-header"}}),(0,p.tZ)(U.Z,{isOpen:D===ut.UnpublishApp,onRequestClose:function(){return T(null)},children:(0,p.tZ)(ht.Z,{isDestructive:!0,title:"Unpublish Repl",onCancel:function(){return T(null)},onConfirm:function(){Le.loading||(Ue(),T(null))},children:"Your repl will no longer be discoverable on Apps. You can republish again at any time, and all of your comments or reactions will stick around."})}),(0,p.tZ)(U.Z,{isOpen:D===ut.UnpublishTemplate,onRequestClose:function(){return T(null)},children:(0,p.tZ)(ht.Z,{isDestructive:!0,title:"Unpublish Template",onCancel:function(){return T(null)},onConfirm:function(){ze.loading||(Me(),T(null))},children:"Your repl will no longer be discoverable on Templates. You can republish again at any time, and all of your comments or reactions will stick around."})}),(0,p.tZ)(U.Z,{isOpen:D===ut.Publish,onRequestClose:function(){return T(null)},children:(0,p.tZ)(U.h,{children:(0,p.tZ)(ot,{source:"replEnvironment",replId:n.id,onDone:function(e){var t=e.didPublish,n=e.kind;T(t?n===tt.Template?ut.PublishTemplateConfirmation:ut.PublishAppConfirmation:null)}})})}),(0,p.tZ)(U.Z,{isOpen:D===ut.Community,onRequestClose:function(){return T(null)},children:(0,p.tZ)(it,{source:"replEnvironment",replId:n.id,onDone:function(e){e.didPublish||T(null)}})}),(0,p.tZ)(U.Z,{isOpen:D===ut.PublishTemplateUpdate,onRequestClose:function(){return T(null)},children:(0,p.tZ)(U.h,{children:(0,p.tZ)(We,{replId:n.id,onDone:function(e){var t=e.didPublish;T(t?ut.PublishTemplateConfirmation:null)}})})}),(0,p.tZ)(U.Z,{isOpen:D===ut.PublishTemplateConfirmation,onRequestClose:function(){return T(null)},children:(0,p.tZ)(U.h,{children:(0,p.tZ)(Xe,{replId:n.id,onDone:function(){T(null)}})})}),(0,p.tZ)(U.Z,{isOpen:D===ut.PublishAppConfirmation,onRequestClose:function(){return T(null)},children:(0,p.tZ)(U.h,{children:(0,p.tZ)(nt,{replId:n.id,onDone:function(){T(null)}})})}),(0,p.tZ)(o.default,{id:"2408243813",dynamic:[n.currentUserPermissions.changeDescription?"auto":"not-allowed",xt?"var(--background-root)":"var(--background-default)",xt?"none":"auto",xt?.5:1,xt?"not-allowed":"pointer",kt?"var(--background-root)":"var(--background-default)",d.j.mobileMax],children:[".repl-info-form.__jsx-style-dynamic-selector{position:relative;}","form.__jsx-style-dynamic-selector{padding:var(--space-16);}","textarea.__jsx-style-dynamic-selector{min-height:42px;height:200px;resize:none;cursor:".concat(n.currentUserPermissions.changeDescription?"auto":"not-allowed",";font-size:var(--font-size-default);font-family:var(--font-family-default);padding:var(--space-8);display:block;width:100%;border-radius:var(--border-radius-4);border:1px solid var(--outline-dimmest);-webkit-transition:0.2s border-color;transition:0.2s border-color;background-color:transparent;color:var(--foreground-default);}"),"textarea.__jsx-style-dynamic-selector:hover{border-color:var(--accent-primary-dimmer);}","textarea.__jsx-style-dynamic-selector:active,textarea.__jsx-style-dynamic-selector:focus{border-color:var(--accent-primary-default);}","textarea.__jsx-style-dynamic-selector:disabled{opacity:0.5;}","textarea.__jsx-style-dynamic-selector:focus,textarea.__jsx-style-dynamic-selector:active{outline:none;border-color:var(--accent-primary-default);}",".edit-repl-privacy.__jsx-style-dynamic-selector{background-color:".concat(xt?"var(--background-root)":"var(--background-default)",";color:var(--foreground-dimmer);pointer-events:").concat(xt?"none":"auto",";opacity:").concat(xt?.5:1,";cursor:").concat(xt?"not-allowed":"pointer",";}"),".set-always-online.__jsx-style-dynamic-selector{background-color:".concat(kt?"var(--background-root)":"var(--background-default)",";}"),".edit-repl-privacy.__jsx-style-dynamic-selector,.set-always-online.__jsx-style-dynamic-selector{width:100%;padding:var(--space-8);}",".edit-repl.__jsx-style-dynamic-selector .hacker-features-container{margin:var(--space-8);}",".edit-repl-actions.__jsx-style-dynamic-selector{padding:0 var(--space-16);}",".menu-item.__jsx-style-dynamic-selector{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;color:var(--foreground-default);}",".delete-menu-item.__jsx-style-dynamic-selector{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;color:var(--accent-negative-default);}",".icon-container.__jsx-style-dynamic-selector{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;padding:0 var(--space-4);}",".menu-text.__jsx-style-dynamic-selector{padding:0 var(--space-4);}",".upgrade-button-container.__jsx-style-dynamic-selector{padding:0 var(--space-8);}",".upgrade-button-container.__jsx-style-dynamic-selector .sentence-case{text-transform:none;}",".upgrade-text-container.__jsx-style-dynamic-selector{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;padding:var(--space-8);-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;}",".always-on-indicator.__jsx-style-dynamic-selector{margin-left:var(--space-4);margin-right:var(--space-8);width:8px;height:8px;border-radius:100%;background-color:var(--accent-green-default);box-shadow:0 0 12px var(--accent-green-default);}",".always-on-boost-error-container.__jsx-style-dynamic-selector{margin-top:var(--space-8);}",".always-on-boost-error-container.__jsx-style-dynamic-selector .text{color:var(--accent-negative-default);}","@media screen and (max-width:".concat(d.j.mobileMax,"px){.edit-repl.__jsx-style-dynamic-selector{width:80vw;}}")]})]})}!function(e){e.Fork="Fork",e.Delete="Delete",e.Unpublish="Unpublish",e.UnpublishTemplate="UnpublishTemplate",e.Spotlight="Spotlight"}(ct||(ct={})),function(e){e.DeleteRepl="DeleteRepl",e.ForkRepl="ForkRepl",e.UnboostRepl="UnboostRepl",e.SubscribeUser="SubscribeUser",e.Publish="Publish",e.PublishAppConfirmation="PublishAppConfirmation",e.UnpublishApp="UnpublishApp",e.PublishTemplateConfirmation="PublishTemplateConfirmation",e.PublishTemplateUpdate="PublishTemplateUpdate",e.UnpublishTemplate="UnpublishTemplate",e.Community="Community"}(ut||(ut={}))},79081:function(e,t,n){n.d(t,{Z:function(){return u}});var r=n(68216),i=n(25997),o=n(92809),a=n(48764).Buffer,s=8192,c="utf8",u=function(){function e(){(0,r.Z)(this,e),(0,o.Z)(this,"index",void 0),(0,o.Z)(this,"buffer",void 0),this.index=0,this.buffer=new a(s)}return(0,i.Z)(e,[{key:"append",value:function(e){var t=a.from(e,c);if(this.buffer.length-this.index>=t.length)t.copy(this.buffer,this.index,0,t.length);else{var n=(Math.ceil((this.index+t.length)/s)+1)*s;0===this.index?(this.buffer=new a(n),t.copy(this.buffer,0,0,t.length)):this.buffer=a.concat([this.buffer.slice(0,this.index),t],n)}this.index+=t.length}},{key:"tryReadHeaders",value:function(){for(var e,t=0;t+3<this.index&&(13!==this.buffer[t]||10!==this.buffer[t+1]||13!==this.buffer[t+2]||10!==this.buffer[t+3]);)t++;if(t+3>=this.index)return e;e=Object.create(null),this.buffer.toString("ascii",0,t).split("\r\n").forEach((function(t){var n=t.indexOf(":");if(-1===n)throw new Error("Message header must separate key and value using :");var r=t.substr(0,n),i=t.substr(n+1).trim();if(!e)throw new Error("Expected result");e[r]=i}));var n=t+4;return this.buffer=this.buffer.slice(n),this.index=this.index-n,e}},{key:"tryReadContent",value:function(e){if(this.index<e)return null;var t=this.buffer.toString(c,0,e),n=e;return this.buffer.copy(this.buffer,0,n),this.index=this.index-n,t}},{key:"numberOfBytes",value:function(){return this.index}}]),e}()},7444:function(e,t,n){n.d(t,{Q:function(){return r},Z:function(){return i}});var r="idle";function i(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:r,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"EVAL_STARTED":case"EVAL_SETUP":return"running";case"STOP_EVAL":return"stopping";case"EVAL_ENDED":return"idle";case"SET_RUN_STATE":return t.runstate;default:return e}}}}]);
//# sourceMappingURL=1295-c091650b14513acc68d3.js.map